---
layout: page
title: Domain Management | Business Admin | Akana API Platform Help
description: Configure authentication domains for APIs defined in the platform.
product: cm
category: learn
sub-nav-class: Business Administration
weight: 3216
type: page
nav-title: Domain Management
---
<h1 id="top">Domains</h1>
<p>{<span class="apidoc_red">Stub of article worked on for Ian on ATMO-23078 Mar 2018. Ian said: I think we really need a standalone doc under learning for this. It’s still very terminology heavy and this makes it a bit hard to follow.
I’ll try and write something myself to see if I can create something more along the lines of what I’m looking for.</span>}</p>
<p>{<strong>This was in bus_admin_domains.htm. Any relative links that don't have a filename are to that file.</strong>}</p>
<ol>
	<li><a href="#domain_oidc_provider">How do I set up an OpenID Connect Provider domain?</a></li>
</ol>


<h2 id="domain_oidc_provider">How do I set up an OpenID Connect Provider domain?</h2>
<p>If you're setting up an OpenID Connect Provider domain, you'll need to choose the OAuth Provider domain option.</p>
<p>There are some differences between an <a href="basics_glossary.htm#gl_oauth_provider">OAuth Provider</a> and an <a href="basics_glossary.htm#gl_openidconnect_provider">OpenID Connect Provider</a>; for example, OpenID Connect has the userinfo endpoint. The platform's OAuth Provider domain option accommodates both.</p>
<p>The procedure below covers setup for a simple scenario where you're using the platform as an OpenID Connect provider, using an LDAP server for authentication.</p>
<p><strong>Note</strong>: If you just want to use OpenID Connect to authenticate the resource owner, choose the OpenID Relying Party Domain. The OAuth / OpenID Connect Provider domain is the one to choose if you want to use the platform as an OpenID Connect Provider.</p>
<p><strong>Prerequisites:</strong></p>
<ul>
	<li><strong>Authentication domain</strong>: You must already have set up a resource owner authentication domain, such as an LDAP domain, for user authentication.</li>
	<li id="domain_oidc_provider_jwt"><strong>JWT support</strong>: If you want to support JWT Bearer Access Tokens, you'd need to set up public/private key (key info) for the organization identity that will issue the tokens. For instructions, see <a href="bus_admin_domains.htm#how_platform_identity">How do I set up a platform identity for my domain?</a></li>
	<li>{<span class="apidoc_red">what else do you need to have in place before we even do this? Prerequisites/assumptions?</span>}</li>
</ul>
<p>Here's a high-level summary of the steps you'll need to follow to set this up:</p>
<ol>
	<li>Add an OAuth Provider domain (<!-- #BeginLibraryItem "/Library/hdr_more_admin.lbi" -->&nbsp;<strong>More</strong> &gt; <strong>Admin</strong> &gt;&nbsp;<!-- #EndLibraryItem --><strong>Domains</strong> &gt; <strong>Add Domain</strong> &gt; choose <strong>OAuth Provider</strong>).</li>
	<li>On Tab 2, <strong>Grant Types</strong>:
		<ul>
			<li>Choose one or more OAuth grant types that you want to support with the OpenID Connect Provider domain.
			<p><strong>Note</strong>: Do not choose JWT Bearer Assertion. If JWT is used, the user info is in the JWT bearer assertion, so user authentication via a resource owner authentication domain is not needed. {<span class="apidoc_red">Is that correct? Not totally sure why we have to not choose JWT here</span>}</p></li>
			<li>For <strong>Resource Owner Authentication Domain</strong>, choose the domain that you've already set up for user authentication.</li>
			</ul>
		</li>
	<li>On Tab 3, <strong>Token</strong>:
		<ul>
			<li>For simplicity you could choose <strong>Referenced Bearer</strong>. For information about why you might want to choose Referenced Bearer or JWT Bearer, see <a href="bus_admin_domains.htm#should_i_choose_reference_bearer_or_jwt_bearer">Should I choose Referenced Bearer or JWT Bearer Access token?</a></li>
			<li>If you want to choose <strong>JWT Bearer</strong>, you'll need to specify the token issuer and have key info set up for the issuer. See the <a href="#domain_oidc_provider_jwt">JWT support</a> prerequisite above. For the issuer, you could use the tenant name.</li>
			<li>If you want to, check Include <strong>Resource Owner UserInfo</strong>. For information about why you might want to choose this option, see <a href="bus_admin_domains.htm#resource_owner_userinfo_in_bearer_token_why">Why choose to include resource owner userinfo in the Bearer Access token?</a></li>
			<li><strong>Default Access Token Type</strong>: If you choose both token types, it's a good idea to specify your preference.</li>
			</ul>
		</li>
	<li>Tab 4, <strong>OpenID Connect</strong>: The values you specify on this page are what make the domain an OpenID Connect provider rather than a non-OIDC OAuth Provider. On this page:
		<ul>
			<li>Check the <strong>OpenID Connect 1.0 Enabled</strong> box.</li>
			<li>If needed, choose additional scopes other than <strong>openid</strong> and <strong>scope</strong> which are the defaults.</li>
			<li>Accept the defaults, or specify additional OpenID Connect values as needed.</li>
			</ul>
		</li>
	<li>On Tab 5, <strong>Scopes</strong>:
		<ul>
			<li>Specify one or more additional scopes that you want your domain to support; for example, you might create a scope named <strong>Read</strong> that you can assign to allow read-only permission. Note that scopes cannot be edited; make sure that the scope names are exactly correct, including capitalization. Defining scopes allows API owners to apply different scopes to different operations within an API service.</li>
			<li>If desired, specify the default scope.</li>
			</ul>
		</li>
	<li>On Tab 6, <strong>Properties</strong>:
		<ul>
			<li>If needed, specify one or more grant properties. Grant properties capture the grant information to be sent to the downstream service; for example, if you want to ask the user additional information relating to the OAuth grant. Optional. </li>
		</ul>
	</li>
	<li>On Tab 7, <strong>Branding</strong>:
	<ul>
		<li>Specify the Authorization Server URL: the full URL of the container where the OAuth provider is, include scheme and hostname. For example: <strong>https://www.myauthorizationserver:9800</strong>.</li>
	</ul></li>
	<li>Save your new domain.</li>
</ol>
<p><strong>Note</strong>: The userinfo endpoint for the domain is: {authorization_server_url}/oauth/userinfo. For example, if the authorization server URL is <strong>https://www.myauthorizationserver:9800</strong>, the userinfo endpoint is <strong>https://www.myauthorizationserver:9800/oauth/userinfo</strong>. See <a href="bus_admin_domains.htm#domain_oauth_provider_authserverurl">Authorization Server URL</a> (help for Branding tab).</p>
<p>Once the domain is set up, you can associate it with an API and test it in Test Client to make sure everything is working as expected.</p>
<p>For details about the additional options and settings available in this domain configuration, if needed, see <a href="bus_admin_domains.htm#domain_oauth_provider_configure">How do I set up and configure an OAuth Provider domain?</a></p>
<p><a href="#top">Back to top</a></p>




