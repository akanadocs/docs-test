---
layout: page
title: Custom Workflows | Site Administration | Akana API Platform Help
description: Add, change, delete, and assign custom workflows for resources in the business.
product: cm
category: learn
sub-nav-class: Site Administration
weight: 3228
type: page
nav-title: Custom Workflows
---
<h2 id="top">Custom Workflows</h2>
<p>Add, change, and delete custom workflows for resources on the platforms.</p>
<h5 class="stamp">API Platform Version: 8.1 and later</h5>
<div class = "divider1"></div>

<h3 style="color: gray;">Table of Contents</h3>
<ol class="table_of_contents">
  <li><a href="#what_is_a_custom_workflow">What is a custom workflow?</a></li>
  <li><a href="#which_workflows_can_i_customize">Which workflows can I customize?</a></li>
  <li><a href="#how_do_i_set_up_and_manage_custom_workflows">How do I set up and manage custom workflows?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_apis">How do I specify a custom workflow for APIs?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_apps">How do I specify a custom workflow for apps?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_api_contracts">How do I specify a custom workflow for API contracts?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_groups">How do I specify a custom workflow for groups?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_tickets">How do I specify a custom workflow for tickets?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_users">How do I specify a custom workflow for platform users?</a></li>
  <li><a href="#what_is_the_default_workflow_for_api_contracts">What is the default workflow for API contracts?</a></li>
  <li><a href="#what_is_the_default_workflow_for_groups">What is the default workflow for groups?</a></li>
  <li><a href="#what_is_the_default_workflow_for_tickets">What is the default workflow for tickets?</a></li>
  <li><a href="#what_is_the_default_workflow_for_platform_users">What is the default workflow for platform users?</a></li>
  <li><a href="#how_do_i_specify_a_workflow_for_user_2fa">How do I specify a workflow for two-factor authentication of users?</a></li>
  <li><a href="#how_do_i_set_up_custom_workflow_to_implement_2fa_by_phone">How do I set up custom workflow to implement 2FA by phone?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_reviews">How do I specify a custom workflow for reviews?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_discussions">How do I specify a custom workflow for discussions?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_oauth_grants">How do I specify a custom workflow for OAuth grants?</a></li>
  <li><a href="#workflow_not_available">I uploaded a custom workflow, but it isn't showing as available. What do I do?</a></li>
  <li><a href="#how_do_i_set_up_an_app_deletion_approval_workflow">How do I set up an app deletion approval workflow?</a></li>
  <li><a href="#related_topics">Related Topics</a></li>
</ol>



<div class = "divider1"></div>



<a name="what_is_a_custom_workflow"></a><h3>What is a custom workflow?</h3>
<p>There is a standard workflow for various types of resources on the platform. Some of these are controlled to some degree by options that can be specified in the user interface; for example, an API can be set up so that access requests to a specific environment are granted automatically or must be manually approved. However, other aspects of workflow cannot be modified by users via the user interface; for example, the roles required to modify a ticket.</p>
<p>In some cases, it's possible to replace the default workflow with a custom workflow, at the business level. The Site Admin can upload a customized workflow to the platform, and the Site Admin can modify the site configuration to change the workflow assigned to a specific type of object. For example, you could customize the Ticket workflow so that each new ticket automatically triggers an email to create a ticket in your own internal trouble ticketing system.</p>
<p>The workflow definition guides the sequences of activities associated with resources. Workflow definition includes two important factors:</p>
<ul>
  <li><strong>State</strong>: the current state of the resource, which determines what actions can be taken. For example, a ticket can only be closed if it is currently open. </li>
  <li><strong>Role</strong>: certain actions are restricted to certain user roles. For example, only the individual who wrote a ticket, or the Administrator for the resource, can close a ticket.</li>
</ul>
<p>The combination of these two factors, State and Role, guide the resource through its workflow.</p>
<p><a href="#top">Back to top</a></p>



<a name="which_workflows_can_i_customize"></a><h3>Which workflows can I customize?</h3>
<p>A Site Admin can upload certain custom workflows, in Administration/Workflows; the Site Admin can change the default workflow for certain resources in the applicable Administration/Config page or, in the case of OAuth Grant workflow, in the OAuth Provider domain definition. For directions, see <a href="#how_do_i_set_up_and_manage_custom_workflows">How do I set up and manage custom workflows?</a> below.</p>
<table width="38%" cellspacing="0px" class="doctable" style="width: 98%;">
  <thead>
  <tr>
    <th width="25%">Resource Type</th>
    <th width="30%">Set WF in...</th>
    <th width="20%">Default WF?</th>
    </tr>
</thead>
<tbody>
  <tr class="t2row">
    <td>API</td>
    <td>Config &gt; APIs</td>
    <td>No</td>
    </tr>
  <tr class="t1row">
    <td>App</td>
    <td>Config &gt; Apps</td>
    <td>No</td>
    </tr>
  <tr class="t2row">
    <td>Connections (API Access Request)</td>
    <td>Config &gt; Apps</td>
    <td>Yes</td>
  </tr>
  <tr class="t1row">
    <td>Discussions</td>
    <td>Config &gt; Discussions</td>
    <td class="t1row">Yes</td>
    </tr>
  <tr class="t2row">
    <td>Discussion Comments</td>
    <td>Config &gt; Discussions</td>
    <td>Yes</td>
    </tr>
  <tr class="t1row">
    <td>Group Membership</td>
    <td>Config &gt; Groups</td>
    <td class="t1row">Yes</td>
    </tr>
  <tr class="t2row">
    <td>OAuth Grant</td>
    <td>Domains &gt; OAuth Provider Domain &gt; Branding tab</td>
    <td>Yes</td>
    </tr>
  <tr class="t1row">
    <td>Review</td>
    <td>Config &gt; Reviews</td>
    <td class="t1row">Yes</td>
    </tr>
  <tr class="t2row">
    <td>Ticket</td>
    <td>Config &gt; Tickets</td>
    <td>Yes</td>
    </tr>
  <tr class="t1row">
    <td>User</td>
    <td>Config &gt; Users</td>
    <td class="t1row">Yes</td>
    </tr>
</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_set_up_and_manage_custom_workflows"></a><h3>How do I set up and manage custom workflows?</h3>
<p>In the platform, with regard to workflow, resources fall into three categories:</p>
<ul>
  <li>There is a default workflow assigned to the resource, but it can be customized.</li>
  <li>There is no default workflow assigned, but a custom workflow can be applied.</li>
  <li>The resource is not governed by workflow.</li>
</ul>
<p>For a list of resources to which you can apply a custom workflow, see <a href="#which_workflows_can_i_customize">Which workflows can I customize?</a> above.</p>
<p>Once the Site Admin has uploaded a custom workflow, the Site Admin can specify that workflow as the default for the resource type. From that point onwards, the new workflow applies to any new resources of that type.</p>
<p>For example, let's say you customize the Ticket workflow so that each new ticket automatically triggers an email to create a ticket in your own internal trouble ticketing system. New tickets trigger this action; existing tickets are not affected.</p>

<h5><a name="to_upload_a_custom_workflow"></a>To upload a custom workflow:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Workflows</strong>.</li>
  <li>Click <strong>Add Workflow</strong>.</li>
  <li>Enter the following values to describe the new workflow:
    <ul>
      <li>Name</li>
      <li>Description</li>
      <li>Object Type&#8212;the type of resource the workflow applies to; <strong>APIs</strong>, <strong>Application</strong>, <strong>API Access Request</strong>, <strong>Group Membership</strong>, or <strong>Ticket</strong>.</li>
    </ul>
    </li>
  
  <li>Browse to the location of your custom workflow file and upload it.</li>
  <li>Click <strong>Finish</strong>.</li>
</ol>

<p>Once you've uploaded the custom workflow, the next step is for the Site Admin to assign the custom workflow to the correct resource type, following the instructions for the applicable object type:</p>
<ul>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_apps">How do I specify a custom workflow for apps?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_apis">How do I specify a custom workflow for APIs?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_api_contracts">How do I specify a custom workflow for API contracts?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_groups">How do I specify a custom workflow for groups?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_tickets">How do I specify a custom workflow for tickets?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_users">How do I specify a custom workflow for platform users?</a></li>
  <li><a href="#how_do_i_specify_a_workflow_for_user_2fa">How do I specify a workflow for two-factor authentication of users?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_reviews">How do I specify a custom workflow for reviews?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_discussions">How do I specify a custom workflow for discussions?</a></li>
  <li><a href="#how_do_i_specify_a_custom_workflow_for_oauth_grants">How do I specify a custom workflow for OAuth grants?</a></li>
</ul>
<p class="apidoc_note"><strong>Note</strong>: Generally, when you specify a new custom workflow for a resource, it affects all future resources. Existing resources are not affected. In some cases, it's possible to modify the workflow used for an individual resource. For example, the API Admin can modify the workflow that a specific API uses, in the API Details page. The Users workflow is an exception; if it is in place, it affects all users.</p>

<h5>To delete a custom workflow:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Workflows</strong>.</li>
  <li>Find the workflow on the list and click <strong>Delete</strong>.</li>
</ol>

<h5>To edit a custom workflow:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Workflows</strong>.</li>
  <li>Find the workflow on the list and click <strong>Edit</strong>.</li>
  <li>At the Edit Workflow page, make changes as needed and then click <strong>Finish</strong>.</li>
</ol>

<h5>To view a custom workflow:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Workflows</strong>.</li>
  <li>Find the workflow on the list and click <strong>View</strong>. The workflow XML file is displayed in a separate window.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_custom_workflow_for_apis"></a><h3>How do I specify a custom workflow for APIs?</h3>
<p>The Site Admin can specify a custom workflow and set that as the default workflow for all future APIs on the platform. When the default workflow is changed, the new workflow applies to all new APIs, but existing APIs are not affected.</p>
<p>Before you can specify the custom workflow as the platform default, you must first create the custom workflow externally and upload it. For instructions, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</p>
<h5>To specify a custom workflow for APIs:</h5>
<ol><li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Settings</strong> &gt; <strong>APIs</strong>.</li>
  <li>Under API Workflow Definition, click the drop-down list to choose the custom workflow. 
  <span class="apidoc_note"><strong>Note</strong>: If the workflow isn't available for selection, it hasn't yet been uploaded. For instructions, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</span>
</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p>For more information on API settings, refer to <a href="site_admin_settings.htm#to_configure_api_settings">To configure API settings</a>.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_custom_workflow_for_apps"></a><h3>How do I specify a custom workflow for apps?</h3>
<p>By default, there is no workflow for apps. However, the Site Admin can specify a custom workflow.</p>
<p>Platform installion includes an out-of-the-box app workflow, <strong>appversion-workflow-template1.xml</strong>, that implements an approval process for app deletion.</p>
<p>If this workflow is in effect, and an app developer deletes an app version, a deletion request is sent to the Business Admin for approval. The app is inactivated pending approval; at this point, developers cannot make any changes to the app, although the Business Admin can still make changes. When the Business Admin approves the request, the app is fully deleted. If for any reason the Business Admin denies the request, the app is restored to normal operation.</p>
<p>To specify this workflow as the default for apps on the platform, the Site Admin must modify the app configuration settings.</p>
<p>To implement a different custom workflow, the Site Admin must first create the custom workflow externally and upload it. For instructions, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>. For information about custom workflows, see <a href="http://docs.akana.com/cm/assets/AAP_WP_Workflow.pdf" target="_blank"> Akana API Platform: Custom Workflows</a> on docs.akana.com.</p>
<h5>To specify a custom workflow for apps:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Settings</strong> &gt; <strong>Apps</strong>.</li>
  <li>Under App Workflow Definition, click the drop-down list to choose the custom workflow. 
  <span class="apidoc_note"><strong>Note</strong>: If the workflow isn't available for selection, it hasn't yet been uploaded. For more information, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</span>
</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p>For more information on app settings, refer to <a href="site_admin_settings.htm#to_configure_app_settings">To configure app settings</a>.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_custom_workflow_for_api_contracts"></a><h3>How do I specify a custom workflow for API contracts?</h3>
<p>The Site Admin can specify a custom workflow and set that as the default workflow for all future API contracts on the platform. When the default workflow is changed, the new workflow applies to all new contracts, but existing contracts are not affected.</p>
<p>Before the Site Admin can specify the custom workflow as the platform default, the Site Admin must first create the custom workflow externally and upload it. For instructions, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</p>
<h5>To specify a custom workflow for API contracts:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Settings</strong> &gt; <strong>Connections</strong>.</li>
  <li>Under General App/API Connection Settings, choose Sandbox or Live and click the drop-down list to choose the custom workflow. <span class="apidoc_note"><strong>Note</strong>: If the workflow isn't available for selection, it hasn't yet been uploaded. For more information, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</span>
</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p>For more information on applicable settings, refer to <a href="site_admin_settings.htm#to_configure_app_api_connection_settings">To configure app/API connection settings</a>.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_custom_workflow_for_groups"></a><h3>How do I specify a custom workflow for groups?</h3>
<p>The Site Admin can specify a custom workflow and set that as the default workflow for all future groups on the platform. When the default workflow is changed, the new workflow applies to all new groups, but existing groups are not affected.</p>
<p>Before the Site Admin can specify the custom workflow as the platform default, the Site Admin must first create the custom workflow externally and upload it. For instructions, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</p>
<h5>To specify a custom workflow for groups:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Settings</strong> &gt; <strong>Groups</strong>.</li>
  <li>Under Group Membership Workflow, click the drop-down list to choose the custom workflow. 
  <span class="apidoc_note"><strong>Note</strong>: If the workflow isn't available for selection, it hasn't yet been uploaded. For more information, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</span>
</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p>For more information on Group settings, refer to <a href="site_admin_settings.htm#to_configure_group_settings">To configure group settings</a>.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_custom_workflow_for_tickets"></a><h3>How do I specify a custom workflow for tickets?</h3>
<p>The Site Admin can specify a custom workflow and set that as the default workflow for all future tickets on the platform. When the default workflow is changed, the new workflow applies to all new tickets, but existing tickets are not affected.</p>
<p>Before the Site Admin can specify the custom workflow as the platform default, the Site Admin must first create the custom workflow externally and upload it. For instructions, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</p>
<h5>To specify a custom workflow for tickets:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Settings</strong> &gt; <strong>Tickets</strong>.</li>
  <li>Under Ticket Workflow Definition, click the drop-down list to choose the custom workflow. 
  <span class="apidoc_note"><strong>Note</strong>: If the workflow isn't available for selection, it hasn't yet been uploaded. For more information, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</span>
</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p>For more information on ticket settings, refer to <a href="site_admin_settings.htm#to_configure_ticket_settings">To configure ticket settings</a>.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_custom_workflow_for_users"></a><h3>How do I specify a custom workflow for platform users?</h3>
<p>You can use the default out-of-the-box user workflow in combination with user settings and business security settings relating to users, to control user experience on the platform and if needed to restrict what users can do. If you need more flexibility, you can design your own custom workflow.</p>
<p>The Site Admin can specify a custom workflow and set that as the default workflow for all future users on the platform. When the default workflow is changed, the new workflow applies to all new users. In addition, for an API platform upgrade scenario, running the Upgrade CM Models task adds existing users to the new workflow.</p>
<p>Before the Site Admin can specify the custom workflow as the platform default, the Site Admin must first create the custom workflow externally and upload it. For instructions, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>. For information about custom workflows, see <a href="http://docs.akana.com/cm/assets/AAP_WP_Workflow.pdf" target="_blank"> Akana API Platform: Custom Workflows</a> on docs.akana.com.</p>
<h5>To specify a custom workflow for platform users:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Settings</strong> &gt; <strong>Users</strong>.</li>
  <li>Under User Workflow Definition, click the drop-down list to choose the custom workflow. <span class="apidoc_note"><strong>Note</strong>: If the workflow isn't available for selection, it hasn't yet been uploaded. For more information, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</span> </li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p>For more information on user settings, refer to <a href="site_admin_settings.htm#settings_config_users">How do I configure settings for users?</a></p>
<p><a href="#top">Back to top</a></p>



<a name="what_is_the_default_workflow_for_api_contracts"></a><h3>What is the default workflow for API contracts?</h3>
<p>The default workflow for API contracts is shown below. This diagram shows all the states an API access contract can be in, and the actions that are valid for each state.</p>
<p><img src="assets/workflow_contracts.jpg" alt="default workflow: API contracts" /></p>
<p><a href="#top">Back to top</a></p>



<a name="what_is_the_default_workflow_for_groups"></a><h3>What is the default workflow for groups?</h3>
<p>The default workflow for groups is shown below. This applies for all types of groups, including:</p>
<ul>
  <li>App teams</li>
  <li>Independent Groups</li>
  <li>API Admins</li>
  <li>API Context Groups</li>
  <li>Site Admins</li>
  <li>Business Admins</li>
</ul>
<p class="apidoc_note"><strong>Note</strong>: The workflow below shows the most complex group scenario, where the group has Admins, Leaders, and Members (Independent Group, API Context Group). For other types of groups, all members have Admin rights.</p>
<p><img src="assets/workflow_groups.jpg" alt="default workflow: groups" /></p>
<p><a href="#top">Back to top</a></p>



<a name="what_is_the_default_workflow_for_tickets"></a><h3>What is the default workflow for tickets?</h3>
<p>The default workflow for tickets is shown below.</p>
<p><img src="assets/workflow_tickets.jpg" alt="default workflow: groups" /></p>
<p><a href="#top">Back to top</a></p>



<a name="what_is_the_default_workflow_for_platform_users"></a><h3>What is the default workflow for platform users?</h3>
<p>There is currently a default workflow that applies to all local platform users. Users who log in using a third-party identity provider are not managed by the default workflow.</p>
<p>The default workflow for platform users has a slightly different process depending on the type of user:</p>
<ul>
  <li>Self-signup user</li>
  <li>User invited by a Site Admin</li>
</ul>
<p>In all cases, the user profile can be modified as needed by the Site Admin.</p>
<p>If the platform settings allow users to modify their profiles, the user can also modify his/her own profile. This is evaluated in the workflow by means of the @ModifyProfile reserved action. If @ModifyProfile is present in the workflow and is applicable to the logged-in user, the user can modify his/her own profile.</p>
<p>The default user workflow checks the platform setting that governs whether users can modify their own profiles (Business Security settings; see <a href="site_admin_settings.htm#settings_config_security_business">How do I configure settings for business security?</a></p>
<p>The default workflow guides users through the login process, checking whether any or all of the following possible login conditions are currently required:</p>
<ol>
  <li>Must the password be changed? A user invited by a Site Admin logs in with a temporary password and must choose a new password as a first step.</li>
  <li>Is there a platform legal agreement in place that was not yet accepted by the user? If yes, the user must accept the legal agreement before proceeding with login.</li>
  <li>Must the user provide answers to security challenge questions? This could be the case on first login. There are also other circumstances that might trigger this; for example, the requirement to answer security challenge questions is added, or the number of answers each user must provide is increased.</li>
</ol>
<p>If one of these is required, the login process required that the user complete that one step. Login is then evaluated again. When all required conditions are met, the user is logged in. If it is the user's first login, the user is then marked as permanent in the database; this ensures that the user is not purged. Temporary user records, such as invitation codes that were issued and not responded to, are periodically purged from the database.</p>
<p>If you want to, you can create a custom workflow for users and set your custom workflow as the default. See <a href="#how_do_i_specify_a_custom_workflow_for_users">How do I specify a custom workflow for platform users?</a> above.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_workflow_for_user_2fa"></a><h3>How do I specify a workflow for two-factor authentication of users?</h3>
<p>The platform includes the capability to use two-factor authentication, requiring that users enter a special one-time-only verification code after logging in, as a second level of security and verification.</p>
<p>By default, the two-factor authentication feature is turned off. However, the platform out-of-the-box installation includes a user workflow that you can use to implement this functionality. The workflow name is: <strong>workflow:definition:user:v2</strong>.</p>
<p>This user workflow, <strong>default-user-workflow-v2.xml</strong>, guides the user to enter an authentication code after normal login is complete. The authentication code, passed to the user in an out-of-band process, completes the login process.</p>
<p>The workflow retrieves values set up for two-factor authentication in a platform Settings page controlled by the Site Admin.</p>
<h5>To specify the two-factor authentication workflow for users:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Settings</strong> &gt; <strong>Users</strong>.</li>
  <li>Under User Workflow Definition, click the drop-down list and choose <strong>workflow:definition:user:v2</strong>.</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_set_up_custom_workflow_to_implement_2fa_by_phone"></a><h3>How do I set up custom workflow to implement 2FA by phone?</h3>
<p>The platform supports two-factor authentication, with workflow functions, conditions, and variables and also platform settings that you can use to enable this functionality.</p>
<p>The out-of-the-box user workflow supports sending the 2FA verification code by email (see <a href="#how_do_i_set_up_custom_workflow_to_implement_2fa_by_phone">How do I specify a workflow for two-factor authentication of users?</a> above). However, with a little customization, you can also build a custom workflow that either:</p>
<ul>
  <li>Sends the code via a different delivery mechanism instead of email, such as voice or text</li>
  <li>Offers multiple options that the user can choose from</li>
</ul>
<p>In the out-of-the-box platform workflow, <strong>workflow:definition:user:v2</strong>, you'll see the section that defines the options offered to users. It looks something like the below:</p>
<pre>&lt;function type="setTwofaDeliveryOptions"&gt;
  &lt;arg name="VoiceSupported"&gt;false&lt;/arg&gt;
  &lt;arg name="TextSupported"&gt;false&lt;/arg&gt;
  &lt;arg name="EmailSupported"&gt;true&lt;/arg&gt;
&lt;/function&gt;
</pre>
<p>By default, it is set to support email only. If you want to support voice, text, or both, set those arguments to true. However, you'll also need to write your own custom code to manage the process of sending the code to the customer by phone (voice or text). </p>
<p>The out-of-the-box workflow manages generating the code and sending it to the user by email with the function below:</p>
<pre>&lt;function type="send2FACodeToEmail"&gt;
  &lt;arg name="DeliveryTargetAddress"&gt;${arg.twofa.delivery.target.address}&lt;/arg&gt;
  &lt;arg name="DeliveryMechanism"&gt;${arg.DeliveryMechanism}&lt;/arg&gt;
  &lt;arg name="2FAData"&gt;${arg.2fa.task.data}&lt;/arg&gt;
  &lt;arg name="2FAVerificationCode"&gt;${arg.verificationCode}&lt;/arg&gt;
  &lt;arg name="2FAVerificationCodeValidMinutes"&gt;${arg.2fa.verification.code.valid.minutes}&lt;/arg&gt;
&lt;/function&gt;
</pre>
<p>You'll need to have something along those lines to send the code by phone (voice or text).</p>
<p>For example, the section of the out-of-the-box workflow below has a suggested template commented out for implementation of a custom function. As it stands, the workflow step generates the code but does not send it.</p>
<pre>        &lt;result old-status="${workflow.step.name}" status="${workflow.step.name}" step="-1"&gt;
  &lt;conditions type="AND"&gt;
    &lt;condition type="argumentValueEquals"&gt;
      &lt;arg name="ArgName"&gt;Action&lt;/arg&gt;
      &lt;arg name="Value"&gt;generate&lt;/arg&gt;
    &lt;/condition&gt;
    &lt;condition type="is2FACodeGenerated"/&gt;
    &lt;condition type="isDeliveryTypeVoice"/&gt;
  &lt;/conditions&gt;
  &lt;pre-functions&gt;
    &lt;!-- &lt;function type="send2FACodeToPhone"&gt; custom workflow function
      &lt;arg name="DeliveryTargetAddress"&gt;${arg.twofa.delivery.target.address}&lt;/arg&gt;
      &lt;arg name="DeliveryMechanism"&gt;${arg.DeliveryMechanism}&lt;/arg&gt;
      &lt;arg name="userPhoneNumber"&gt;${sessionuser.phone.number}&lt;/arg&gt;
      &lt;arg name="2FAData"&gt;${arg.2fa.task.data}&lt;/arg&gt;
      &lt;arg name="2FAVerificationCode"&gt;${arg.verificationCode}&lt;/arg&gt;
      &lt;arg name="2FAVerificationCodeValidMinutes"&gt;${arg.2fa.verification.code.valid.minutes}&lt;/arg&gt;
    &lt;/function&gt; --&gt;
    &lt;function type="setAuthTokenProperty"&gt;
      &lt;arg name="PropertyName"&gt;2FAData&lt;/arg&gt;
      &lt;arg name="PropertyValue"&gt;${arg.2fa.authtoken.property}&lt;/arg&gt;
    &lt;/function&gt;
    &lt;function type="setPendingTask"&gt;
      &lt;arg name="PendingTask"&gt;2fa.required&lt;/arg&gt;
      &lt;arg name="TaskData"&gt;${arg.2fa.task.data}&lt;/arg&gt;
    &lt;/function&gt;
  &lt;/pre-functions&gt;
</pre>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_custom_workflow_for_reviews"></a><h3>How do I specify a custom workflow for reviews?</h3>
<p>The Site Admin can specify a custom workflow and set that as the default workflow for all future <a href="basics_glossary.htm#gl_review">reviews</a> on the platform. When the default workflow is changed, the new workflow applies to all new reviews, but existing reviews are not affected.</p>
<p>There is an out-of-the-box custom workflow for reviews. Any other custom workflow must first be created externally and uploaded. For instructions, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</p>
<h5>To specify a custom workflow for reviews:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Settings</strong> &gt; <strong>Reviews</strong>.</li>
  <li>Under Review Workflow Definition, click the drop-down list to choose the custom workflow. 
  <span class="apidoc_note"><strong>Note</strong>: If the workflow isn't available for selection, it hasn't yet been uploaded. For more information, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</span>
</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_custom_workflow_for_discussions"></a><h3>How do I specify a custom workflow for discussions?</h3>
<p>The Site Admin can specify a custom workflow and set that as the default workflow for all future discussions on the platform. When the default workflow is changed, the new workflow applies to all new discussions, but existing discussions are not affected.</p>
<p>Before the Site Admin can specify the custom workflow as the platform default, the Site Admin must first create the custom workflow externally and upload it. For instructions, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</p>
<h5>To specify a custom workflow for discussions:</h5>
<ol>
  <li>Log in as the Site Admin.</li>
  <li>Go to <strong>Administration</strong> &gt; <strong>Settings</strong> &gt; <strong>Discussions</strong>.</li>
  <li>Under Discussion Workflow Definition, click the drop-down list to choose the custom workflow. 
  <span class="apidoc_note"><strong>Note</strong>: If the workflow you want isn't available for selection, it hasn't yet been uploaded. For more information, see <a href="#to_upload_a_custom_workflow">To upload a custom workflow</a>.</span>
</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_specify_a_custom_workflow_for_oauth_grants"></a><h3>How do I specify a custom workflow for OAuth grants?</h3>
<p>If you have a custom workflow for OAuth grants, you'll need to specify the custom workflow as the Grant Workflow Definition in your OAuth Provider domain definition (Administration &gt; Domains &gt; Add Domain &gt; OAuth Provider) in the Branding tab (Tab #6).</p>
<p>The custom workflow applies for all APIs that use the OAuth Provider domain definition.</p>
<p>For instructions for setting up the OAuth Provider domain, including the custom workflow, see <a href="bus_admin_domains.htm#how_do_i_set_up_and_configure_an_oauth_provider_domain">How do I set up and configure an OAuth Provider domain?</a></p>
<p><a href="#top">Back to top</a></p>



<a name="workflow_not_available"></a>
<h3>I uploaded a custom workflow, but it isn't showing as available. What do I do?</h3>
<p>When you go into Administration / Config and choose a resource for which you can use a custom workflow, any custom workflows that have been uploaded to your platform for that resource type should be available on the drop-down list for selection.</p>
<p>If the expected custom workflow is not available for selection, first go to Administration / Config / Workflows and check that the workflow was uploaded.</p>
<p>If you see your workflow on the list, the most likely reason it's not available for selection is that an incorrect resource was specified when uploading the workflow. It's important to specify the correct resource, because only workflows designated for a specific resource&#8212;for example, tickets&#8212;are available on the Config page for that resource.</p>
<p>To check the resource type, find your workflow on the list and then click <strong>Edit</strong>. In the Edit Workflow page, change the Object Type specified for the workflow, if needed, and then click <strong>Save</strong>.</p>
<p><a href="#top">Back to <strong>top</strong></a></p>



<a name="how_do_i_set_up_an_app_deletion_approval_workflow"></a><h3>How do I set up an app deletion approval workflow?</h3>
<p>By default, apps do not follow a workflow. However, if needed, you can assign a custom workflow.</p>
<p>The platform includes a sample workflow definition that provides an example of how to specify app deletion approval. If this workflow is implemented, when an app team member deletes an app, the app is deactivated, and a deletion request is sent to the Business Admin for approval. No changes can be made to the app during this time. If the Business Admin approves the deletion request, the app is deleted; if the Business Admin denies the request, the app is restored to an active state.</p>
<p>You can use the sample as-is or use it as a resource for your own custom workflow.</p>
<p>Name for this sample app workflow: <strong>appversion-workflow-template1</strong>.</p>
<p><a href="#top">Back to top</a></p>



<div class = "divider1"></div>



<h3 id="related_topics">Related Topics</h3>
<table width="98%" border="0" cellspacing="0" cellpadding="2" class="doctable">
  <tr>
    <td width="33%"><ul>
      <li><a href="site_admin_.htm">Site Admin Summary Page</a></li>
      <li><a href="site_admin_overview.htm">Site Admin Responsibilities</a></li>
      <li><a href="site_admin_agreements.htm">Platform Legal Agreement</a></li>
      <li><a href="site_admin_config.htm">Configuration</a></li>
      <li><a href="site_admin_settings.htm">Settings</a></li>
    </ul>
    </td>
    <td width="33%"><ul>
      <li><a href="site_admin_site.htm">Site Settings</a></li>
      <li><a href="site_admin_site_admins.htm">Managing Site Admins</a></li>
      <li><a href="site_admin_users.htm">Managing User Accounts</a></li>
    </ul>
    </td>
    <td width="33%"><ul>

      <li><a href="site_admin_tc.htm">Test Client</a></li>
      <li><a href="site_admin_es.htm">Elasticsearch Configuration</a></li>
      <li><a href="site_admin_content_guidelines_sd.htm">Content Development Guidelines for Simple Dev Theme</a></li>
      <li><a href="basics_glossary.htm">Glossary of Terms</a></li>
    </ul>
    </td>
  </tr>
</table>


