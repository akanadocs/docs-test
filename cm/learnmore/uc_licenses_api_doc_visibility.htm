---
layout: page
title: Use Case - Controlling API Doc Visibility with Licenses | Akana API Platform Help
description: Step by step instructions, and illustrations, for setting up an API and using the Licenses feature to add privacy on certain operations so that different users have visibility of different operations, depending on the user's license.
product: cm
category: learn
sub-nav-class: API Doc Visibility
weight: 15
type: page
nav-title: Use Case - Controlling API Doc Visibility with Licenses
---
<h1 id="top">Use Case: Controlling API Documentation Visibility with Licenses</h1>
<p>This use case provides step by step instructions, and illustrations, for setting up an API and using the Licenses feature to add privacy on certain operations so that different users have visibility of different operations, depending on the user's license.</p>
<p>Except where noted, all setup steps can be completed by the API Admin.</p>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#uc_licenses_overview">Licenses use case: overview</a></li>
	<li><a href="#uc_licenses_eg_setup">Licenses use case: Setup steps</a>
		<ul>
			<li><a href="#uc_licenses_users_create">Create three users</a> (Site Admin task)</li>
			<li><a href="#uc_licenses_groups_create">Create two groups</a></li>
			<li><a href="#uc_licenses_invite_users_to_groups">Invite users to groups</a></li>
			<li><a href="#uc_licenses_scopes_create">Create three scopes</a> (Business Admin task)</li>
			<li><a href="#uc_licenses_licenses_create">Create two licenses</a> (Business Admin task)</li>
			<li><a href="#uc_licenses_api_create">Create API</a></li>
			<li><a href="#uc_licenses_api_scopes_assign">API: assign scopes to operations</a></li>
			<li><a href="#uc_licenses_api_invite_groups">API: invite groups</a></li>
			<li><a href="#uc_licenses_api_assign_licenses_to_groups">API: assign licenses to groups</a></li>
		</ul>
	</li>
	<li><a href="#uc_licenses_eg_results">Licenses use case: Results</a>
		<ul>
			<li><a href="#licenses_use_case_eg_results_apiadmin">API Admin</a></li>
			<li><a href="#licenses_use_case_eg_results_user1">User1</a></li>
			<li><a href="#licenses_use_case_eg_results_user2">User2</a></li>
	<li><a href="#licenses_use_case_eg_results_user3">User3</a></li>
		</ul>
	</li>
	<li><a href="#uc_licenses_videos">Licenses use case: Training video</a>	</li>
	</ol>
<hr class="divide_hr" />



<h2 id="uc_licenses_overview">Licenses use case: overview</h2>
<p>This section outlines steps to set up an end to end use case for the Licenses feature.</p>
<p>In this example, we will create an API and use licenses and scopes to control which users have access to which operations.</p>
<p>Rather than providing detailed instructions for each steps, this section links to where the user documentation covers the exact procedure. It includes:</p>
<ul>
	<li><a href="#uc_licenses_eg_setup">End to end use case: Setup steps</a></li>
	<li><a href="#uc_licenses_eg_results">End to end use case: Results</a></li>
</ul>


<h2 id="uc_licenses_eg_setup">Licenses use case: Setup steps</h2>
<p>This use case takes you through a scenario of setting up an API and controlling the visibility of the API documentation by using the licenses feature, including going through all setup steps and demonstrating the results.</p>
<p>Some of the setup actions in this use case require the user to be a Site Admin or Business Admin. These are noted below. If you don't&#160;have these permissions, ask your Site Admin or Business Admin for help with these setup steps.</p>
<p>The API description document is included so that you can set this up and run it yourself.</p>
<p>To run this use case you will need:</p>
<ul>
	<li>Access to an instance of the API platform, with the ability to create an API.</li>
	<li>Three valid email addresses for the three users.</li>
</ul>
<p>In this example, the API has five operations:</p>
<ul>
	<li>One POST operation available only to Private Group 1</li>
	<li>One DELETE operation available only to Private Group 2</li>
	<li>Three GET operations available to all users (public, no group membership needed).</li>
</ul>


<p>After setup, the generated API Swagger documentation visibility should be as follows:</p>
<ul>
	<li>The API Admin of course sees all operations.</li>
	<li>Members of Private Group 1 see the POST operation and the three GET operations.</li>
	
	<li>Members of Private Group 2 see the DELETE operation and the three GET operations.</li>
	<li>All users see the three GET operations.</li>
</ul>
<p>To set up this scenario and see it work, follow these steps:</p>
<ul>
	<li><a href="#uc_licenses_users_create">Create three users</a> (Site Admin task)</li>
	<li><a href="#uc_licenses_groups_create">Create two groups</a></li>
	<li><a href="#uc_licenses_invite_users_to_groups">Invite users to groups</a></li>
	<li><a href="#uc_licenses_scopes_create">Create three scopes</a> (Business Admin task)</li>
	<li><a href="#uc_licenses_licenses_create">Create two licenses</a> (Business Admin task)</li>
	<li><a href="#uc_licenses_api_create">Create API</a></li>
	<li><a href="#uc_licenses_api_scopes_assign">API: assign scopes to operations</a></li>
	<li><a href="#uc_licenses_api_invite_groups">API: invite groups</a></li>
	<li><a href="#uc_licenses_api_assign_licenses_to_groups">API: assign licenses to groups</a></li>
</ul>


<h3 id="uc_licenses_users_create">Create three users:</h3>
<p><strong>Notes</strong>:</p>
<ul>
	<li>If you don't already have a user that can create an API, create this user also.</li>
	<li>You must be a Site Admin to add users in the developer portal. If you're not a Site Admin you&#160;would have to create three separate accounts, making sure you use valid credentials and have access to the account.</li>
</ul>
<p>To create users as the Site Admin: <strong>More</strong> &gt; <strong>Admin</strong> &gt; <strong>Users</strong> &gt; <strong>Add User</strong>.</p>
<p>Create these users:</p>
<ul>
	<li>user1:
		<ul>
			<li>In this example: user1@rcoaless.com</li>
			<li>Use a password you will remember</li>
			</ul>
	</li>
	<li>user2:
		<ul>
			
			<li>In this example: user2@rcoaless.com</li>
			<li>Use a password you will remember</li>
			</ul>
	</li>
	<li>user3:
		<ul>
			
			<li>In this example: user3@rcoaless.com</li>
			<li>Use a password you will remember</li>
			</ul>
	</li>
</ul>


<h3 id="uc_licenses_groups_create">Create two groups:</h3>
<ul>
	<li>Private Group 1:
		<ul>
			<li>Set visibility to Private</li>
		</ul>
	</li>
	
	<li>Private Group 2:
		<ul>
			<li>Set visibility to Private</li>
		</ul>
	</li>
</ul>


<h3 id="uc_licenses_invite_users_to_groups">Invite users to groups</h3>
<ul>
	<li>Invite user1 to Group1</li>
	
	<li>Invite user2 to Group2</li>
</ul>


<h3 id="uc_licenses_scopes_create">Create three scopes:</h3>
<ul>
	<li>Scope 1: 
		<ul>
			<li>Set visibility to Private</li>
			<li>Clear the OAuth values of <strong>Default Scope</strong> and <strong>User Authorization Required</strong></li>
		</ul>
	</li>
	<li>Scope 2: 
		<ul>
			<li>Same settings as Scope 1</li>
		</ul>
	</li>
	<li>Free: 
		<ul>
			<li>Public scope (default)</li>
			<li>Clear the OAuth values of <strong>Default Scope</strong> and <strong>User Authorization Required</strong></li>
		</ul>
	</li>
	</ul>


<h3 id="uc_licenses_licenses_create">Create two licenses:</h3>
<ul>
	<li>License 1:
		<ul>
			<li>Set visibility to Private</li>
			<li>Add <strong>Scope 1</strong></li>
		</ul>
	</li>
	<li>License 2:
		<ul>
			<li>Set visibility to Private</li>
			<li>Add <strong>Scope 2</strong></li>
		</ul>
	</li>
	</ul>
<p><strong>Note</strong>: This example does not include QoS policies in the licenses.</p>


<h3 id="uc_licenses_api_create">Create API:</h3>
<p>Create an API by uploading <a href="assets/swagger_petstore_5_operations.json">the Swagger file</a>.</p>
<p>Navigation: <strong>APIs</strong> &gt; <strong>Add API</strong>. For detailed instructions, see <a href="apiadmin_api_add.htm#add_api">How do I add an API</a>?</p>
<p><strong>Note</strong>: The Swagger file provided for this use case is based on the Swagger Petstore API (Swagger 2.0), with some operations removed so that there are only five operations in the file.</p>


<h3 id="uc_licenses_api_scopes_assign">API: assign scopes to operations:</h3>
<p>Assign scopes to operations as shown below.</p>
<p>Navigation: API &gt; <strong>Details</strong> &gt; <strong>Manage Licensing</strong>:</p>
<ol>
	<li>Choose <strong>Enable Licensing for API</strong>.</li>
	<li> Choose <strong>Operation-Specific Mapping</strong> and assign scopes&#160;to the operations as shown below.</li>
</ol>
<table class="doctable">
	<thead>
		<tr>
			<th>To this operation...</th>
			<th>Assign this scope...</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>addPet</td>
			<td>Private Scope 1</td>
		</tr>
		<tr>
			<td>findPetsByStatus</td>
			<td>Free</td>
		</tr>
		<tr>
			<td>findPetsByTags</td>
			<td>Free</td>
		</tr>
		<tr>
			<td>getPetById</td>
			<td>Free</td>
		</tr>
		<tr>
			<td>deletePet</td>
			<td>Private Scope 2</td>
		</tr>
	</tbody>
</table>


<h3 id="uc_licenses_api_invite_groups">API: invite groups:</h3>
<p>Invite both groups to have visibility of the API.</p>
<p>Navigation: API &gt; <strong>Visibility</strong> &gt; <strong>Groups</strong>.</p>


<h3 id="uc_licenses_api_assign_licenses_to_groups">API: assign licenses to groups:</h3>
<p>Assign the correct license to each group, as shown below.</p>
<p>Navigation: API &gt; <strong>Visibility</strong> &gt; <strong>Groups</strong> &gt; select group &gt; <strong>Add License</strong>.</p>
<ul>
	<li>To <strong>Private Group 1</strong>, assign <strong>License 1</strong>.</li>
	
	<li>To <strong>Private Group 2</strong>, assign <strong>License 2</strong>.</li>
</ul>


<h2 id="uc_licenses_eg_results">Licenses use case: Results</h2>
<p>The examples below show the API operations visible to the following users:</p>
<ul>
	<li><a href="#licenses_use_case_eg_results_apiadmin">API Admin</a></li>
	<li><a href="#licenses_use_case_eg_results_user1">User1</a></li>
	<li><a href="#licenses_use_case_eg_results_user2">User2</a></li>
	<li><a href="#licenses_use_case_eg_results_user3">User3</a></li>
</ul>


<h3 id="licenses_use_case_eg_results_apiadmin">API Admin</h3>
<p>API Admin sees all operations in the API.</p>
<p><img src="assets/licenses_uc_visibility_apiadmin.png" alt="Using licenses/scopes to restrict API documentation visibility: API Admin sees all" /></p>


<h3 id="licenses_use_case_eg_results_user1">User1</h3>
<p>User1 sees the POST operation that's linked to License 1 via Scope 1. This is because User1 is a member of Private Group 1, which has License 1 assigned to it.</p>
<p>This user also sees the three GET operations which are public.</p>
<p><img src="assets/licenses_uc_visibility_user1.png" alt="Using licenses/scopes to restrict API documentation visibility: user1 view" /></p>


<h3 id="licenses_use_case_eg_results_user2">User2</h3>
<p>User2 sees the DELETE operation that's linked to License 2 via Scope 2. This is because User2 is a member of Private Group 2, which has License 2 assigned to it.</p>
<p>This user also sees the three GET operations which are public.</p>
<p><img src="assets/licenses_uc_visibility_user2.png" alt="Using licenses/scopes to restrict API documentation visibility: user2 view" /></p>


<h3 id="licenses_use_case_eg_results_user3">User3</h3>
<p>User3 does not need to be a member of a group associated with the API, since this user sees only operations not limited to private scopes.</p>
<p>This user only sees the three GET operations which are public.</p>
<p><img src="assets/licenses_uc_visibility_user3.png" alt="Using licenses/scopes to restrict API documentation visibility: user3 view" /></p>
<p><a href="#top">Back to top</a></p>



<h2 id="uc_licenses_videos">Licenses use case: Training video</h2>
<p>The training video below, in two parts, walks you through all steps in this use case, using the Swagger file referenced here:</p>
<ul>
	<li><a href="assets/vid_uc_licenses_visibility_01.mp4" target="_blank">Part 1: set up users, groups, scopes, and licenses</a></li>
	<li><a href="assets/vid_uc_licenses_visibility_02.mp4" target="_blank">Part 2: set up API, assign scopes to operations, invite groups, demonstrate results</a></li>
</ul>
<p><a href="#top">Back to top</a></p>