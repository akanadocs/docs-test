---
layout: page
title: GraphQL Support | API Admin | Akana API Platform Help
description: Information about working with GraphQL APIs in the Community Manager developer portal.
product: cm
category: learn
sub-nav-class: API Admin
weight: 9999
type: page
nav-title: GraphQL Support
---
<h1 id="top">GraphQL Support</h1>
<p>Information about working with GraphQL APIs in the Community Manager developer portal.</p>
<p>For information about installing and configuring so that GraphQL support is enabled, see <a href="../../sp/graphql/graphql.htm">Installing and Configuring GraphQL for the Akana API Platform</a>.</p>
<h4 class="stamp">Valid in Version: 2021.1.0 and later</h4>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>
<ul class="table_of_contents">
	<li><a href="#overview">Overview</a></li>
	<li><a href="#add_api_graphql">Adding a GraphQL API</a></li>
	<li><a href="#graphql_api_doc">GraphQL API documentation</a></li>
	<li><a href="#tc_graphql_config_buttons">Configuring a GraphQL API for testing in Test Client: configuration buttons</a></li>
	<li><a href="#tc_graphql">Testing a GraphQL API in Test Client</a></li>
	<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
<hr class="divide_hr" />



<h2 id="overview">Overview</h2>
<p>The Akana API Platform supports GraphQL from version 2021.1.0 onwards. The API must proxy an existing GraphQL service.</p>
<p>The platform supports GraphQL queries and mutations.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="add_api_graphql">Adding a GraphQL API</h2>
<p>To add a GraphQL API you will need:</p>
<ul>
	<li>The API description document for the API.</li>
	<li>The URL (endpoint). If needed, you can create the API without it, and add it later.</li>
</ul>
<p>Follow the steps below.</p>
<h4>To add a GraphQL API</h4>
<ol>
	<li>Log in to the Akana API Platform.</li>
	<li>Go to <strong>APIs</strong> &gt; <strong>Add API</strong>. The <strong>Add API</strong> page opens.</li>
	<li>Choose <strong>Add a new API</strong>, and then click the <strong>I have an OAS3/Swagger/RAML/WSDL/WADL/GraphQL document</strong> button.
		<p><img src="assets/api_add_graphql.png" alt="Add API -- GraphQL API" /></p></li>
	<li>Add the following:
		<ul>
			<li><strong>GraphQL API Name</strong>: The name to use for the API in the developer portal.</li>
			<li><strong>Endpoint (if known)</strong>: The physical endpoint for the GraphQL API. Needed for the API to work, but you can provide it later. </li></ul></li>
	<li>Click <strong>Save</strong>. The API is created, and the API's <strong>Details</strong> page is displayed.</li>
</ol>
<p class="Note"><strong>Note</strong>: you can see that it's an API of type GraphQL by viewing the binding type value in the implementation information: <strong>Implementations</strong> &gt; choose implementation &gt; <strong>Modify Target Endpoints</strong>. On the <strong>Endpoints</strong> page the binding type is displayed in the <strong>Type</strong> column.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="graphql_api_doc">GraphQL API documentation</h2>
<p>With a GraphQL API, the <strong>Documentation</strong> page looks a little different from a Rest API:</p>
<ul>
	<li> On the right is the Documentation Explorer, where you can click through to explore the documentation.</li>
	<li>At the top left are the buttons, where you can configure settings such as headers, implementation, and policies. See <a href="#tc_graphql_config_buttons">Configuring a GraphQL API for testing in Test Client: configuration buttons</a> below.</li>
	<li>At the lower left is the inline Test Client, where you can type or paste your query. If you're typing the query, coding suggestions and completions are offered, as shown below.</li>
</ul>
<p><img src="assets/api_graphql_api_documentation_01.png" alt="GraphQL -- working with integrated Test Client in API documentation" /></p>
<p>Refer to the API documentation in the right pane as needed, as shown in the example above, and then start writing your GraphQL query. Coding suggestions and completion guides you to the correct choices. You can also paste the query. Click the green arrow to run the query. The query results show in the center pane, as shown below.</p>
<p><img src="assets/api_graphql_api_documentation_02.png" alt="GraphQL -- working with integrated Test Client in API documentation" /></p>
<p>The headers and other information about the API call are displayed in the bottom pane. In this example:</p>
<p><img src="assets/api_graphql_api_documentation_03.png" alt="GraphQL -- integrated Test Client in API documentation -- successful results" /></p>
<p><a href="#top">Back to top</a></p>



<h2 id="tc_graphql_config_buttons">Configuring a GraphQL API for testing in Test Client: configuration buttons</h2>
<p>The configuration buttons in Test Client work the same for a GraphQL API as they do for REST APIs. This is true for Test Client itself, and also for using inline Test Client in the context of the GraphQL API documentation. For instructions, review the following links:</p>
<ul>
	<li><strong>Headers</strong> button for setting up the headers for the API call: This is the same as providing the values in the Headers fields for a REST API. In Test Client the Headers fields are part of the user interface, but in the API documentation they are available via this button. See <a href="app_testing_tc.htm#tc_options">What are the options in Test Client?</a></li>
	<li><strong>Setup</strong> button for identifying the client calling the API: <a href="api_admin_testing_tc.htm#how_do_i_test_my_api_with_different_apps">How do I test my API with different apps in Test Client?</a></li>
	<li><strong>Security</strong> button for providing security-related information, if required to use the API: <a href="app_testing_tc.htm#tc_configsettings">Test Client: Security Settings</a>.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h2 id="tc_graphql">Testing a GraphQL API in Test Client</h2>
<p>Testing a GraphQL API in Test Client is very similar to testing a REST API in Test Client, but with some differences.</p>
<p>For information on using Test Client for a REST API, see <a href="api_admin_testing_tc.htm">API Testing with Test Client</a>.</p>
<p>Differences with a GraphQL API:</p>
<ul>
	<li>There is no operations list for selection.</li>
	<li>No path is displayed.</li>
</ul>
<p>Choose the implementation and endpoint, specify the headers, and specify the GraphQL query content. Click the <strong>Setup</strong> and <strong>Security</strong> buttons if needed to specify those values, and then click <strong>Invoke</strong>.</p>
<p>For more information about using the <strong>Setup</strong> and <strong>Security</strong> buttons, see <a href="#tc_graphql_config_buttons">Configuring a GraphQL API for testing in Test Client: configuration buttons</a>.</p>
<p><img src="assets/api_graphql_testclient.png" alt="Testing a GraphQL API in Test Client" /></p>
<p>In the Content field, paste the query content, escaped {<span class="apidoc_red">AB query</span>}. For example, in the API documentation, you can use this query:</p>
<pre>query{
  continent(code: "AS"){
    name
  }
}</pre>
<p>In Test Client the same query would be formatted as follows:</p>
<pre>{&quot;query&quot;:&quot;query{\n  continent(code: \&quot;AS\&quot;){\n    name\n  }\n}&quot;,&quot;variables&quot;:null}</pre>
<p><a href="#top">Back to top</a></p>



<h2 id="troubleshooting">Troubleshooting</h2>
<p>In this section:</p>
<ul>
	<li><a href="#ts_overview">Troubleshooting overview</a></li>
	<li><a href="#ts_error_service_parser_not_found">Message: The API definition could not be read</a></li>
	<li><a href="#ts_error_unexpected_error">Message: Unexpected error while processing GraphQL request</a></li>
	<li><a href="#ts_error_recipient_not_found">Message: Recipient not found</a></li>
</ul>
<h3 id="ts_overview">Troubleshooting overview</h3>
<p>If you are not getting the expected results, here are a few things to check:</p>
<ul>
	<li>Make sure the correct certificates for the service have been uploaded to the underlying infrastructure, so that the service is trusted. If needed, ask an Administrator for assistance.</li>
	<li>Make sure the GraphQL feature has been installed.</li>
	<li>Make sure that your query is formatted correctly.</li>
</ul>


<h3 id="ts_error_service_parser_not_found">Message: The API definition could not be read</h3>
<pre>The API definition could not be read: [Service Definition parser not found.]</pre>
<p>In the Community Manager developer portal, in the <strong>Add API</strong> page, if you are uploading a GraphQL API description document, you will get this error if the required features have not been installed.</p>
<p>If this happens, contact your Administrator, who will need to install features in the Akana Administration Console. For more information, see <a href="../../sp/graphql/graphql.htm#graphql_install">Installing GraphQL</a>.</p>


<h3 id="ts_error_unexpected_error">Message: Unexpected error while processing GraphQL request</h3>
<pre>{"faultcode":"Server", "faultstring":["98000""Unexpected error while processing GraphQL request."]}</pre>
<p>One reason for this error is that the request query content you are using in Test Client is not escaped. For the query to be successful in Test Client, it must be escaped correctly. See <a href="#tc_graphql">Testing a GraphQL API in Test Client</a> above.</p>


<h3 id="ts_error_recipient_not_found">Message: Recipient not found</h3>
<pre>{"faultcode":"Server", "faultstring":["Error encountered executing {country-continent.graphql}svc_4accd18a-0140-4660-9479-4a0c8d164d60.acmepaymentscorp.live.target.Query. Cause: Recipient not found [{country-continent.graphql}svc_4accd18a-0140-4660-9479-4a0c8d164d60.acmepaymentscorp.live.target]"]}</pre>
<p>One reason for this error is that the trusted certificate was not uploaded for the service. See <a href="../../ag/security_config/certificates_overview.htm#certificates_trusted">Trusted CA Certificates: the Policy Manager Trust Store</a> (Policy Manager documentation).</p>
<!--<p>{Test note GW 10/14/21: : I verified by deleting the certs and, after logging out and in, got this message. As soon as I added the certs, the API call worked. Zero delay.}</p>-->



<p><a href="#top">Back to top</a></p>



<hr class="divide_hr" />



<h2 id="related_topics">Related Topics</h2>
<div class="relatedlinks" id="api_admin">
<ul>
	<li><a href="apiadmin_getting_started.htm">Getting Started for API Developers</a></li>
	<li><a href="apiadmin_overview.htm">API Administration: Overview</a></li>
	<li><a href="api_admin_tutorial.htm">Tutorial (API Provider)</a></li>
	<li><a href="api_admin_management.htm">API Admin Management</a></li>
	<li><a href="bus_api_admin_forum.htm">Forum Moderation</a></li>
	<li><a href="apiadmin_promotion.htm">Promoting an API</a></li>
	<li><a href="apiadmin_api_add.htm">Adding an API</a></li>
	<li><a href="apiadmin_api_design.htm">Add or Modify an API Using API Designer</a></li>
</ul>
<ul>
	<li><a href="apiadmin_a_d_d_support.htm">API Description Language Support</a></li>
	<li><a href="apiadmin_graphql_support.htm">GraphQL Support</a></li>
	<li><a href="apiadmin_implementations.htm">Manage API Implementations</a></li>
	<li><a href="api_admin_testing_tc.htm">API Testing with Test Client</a></li>
	<li><a href="uc_tc_okta.htm">Use Case: API testing in Test Client with Okta</a></li>
	<li><a href="api_admin_managing_contracts.htm">Managing Contracts for your API</a></li>
	<li><a href="apiadmin_monitoring.htm">Monitoring API Analytics</a></li>
	<li><a href="apiadmin_mydashboard.htm">Monitoring APIs with the My Dashboard Feature</a></li>
</ul>
<ul>
	<li><a href="api_admin_api_publishing.htm">API Settings and Visibility</a></li>
	<li><a href="apiadmin_manage_licensing.htm">API Licenses and Scopes</a></li>
	<li><a href="apiadmin_api_phys_svc.htm">Working with Physical Services</a></li>
	<li><a href="api_admin_oauth_support.htm">OAuth Support</a></li>
	<li><a href="api_admin_content_guidelines.htm">Content Development Guidelines for API Admins</a></li>
	<li><a href="api_admin_documentation_maintenance.htm">API Documentation Maintenance</a></li>
	<li><a href="api_admin_documentation_tagging.htm">API Documentation Visibility Tagging</a></li>
	<li><a href="api_admin_legal_agreement_maintenance.htm">Legal Agreement Maintenance</a></li>
	<li><a href="basics_glossary.htm">Glossary of Terms</a></li>
</ul></div>