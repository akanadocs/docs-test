---
layout: page
title: Managing API Implementations | API Admin | Akana API Platform Help
description: Add or modify one or more implementations for your API. Manage deployment zones, policies, and security for each implementation.
product: cm
category: learn
sub-nav-class: API Admin
weight: 2616
type: page
nav-title: Managing API Implementations
---
<h2 id="top">Managing API Implementations</h2>
<p>Add or modify one or more <a href="basics_glossary.htm#gl_implementation">implementations</a> for your API. Manage deployment zones, policies, and security for each implementation.</p>
<h5 class="stamp">API Platform Version: 8.1 and later</h5>

<div class = "divider1"></div>

<h3 style="color: gray;">Table of Contents</h3>



<h5 style="color: gray;"><a href="#h_implementations">Implementations:</a></h5>


<ol class="table_of_contents">
	<li><a href="#api_impl_what_is">What is an API implementation?</a></li>
	<li><a href="#api_impl_how_add">How do I add an API implementation?</a></li>
	<li><a href="#api_impl_how_add_sbox">How do I add a Sandbox implementation?</a></li>
	<li><a href="#api_impl_pattern">What is an implementation pattern and which one should I choose?</a></li>
	<li><a href="#api_impl_how_many">How many API implementations can I have?</a></li>
	<li><a href="#api_impl_how_edit">How do I edit an API implementation?</a></li>
	<li><a href="#api_impl_how_delete">How do I delete an API implementation?</a></li>
	<li><a href="#api_impl_add_modify_target_endpoint">How do I add or modify a target endpoint for an implementation?</a></li>
	<li><a href="#api_impl_delete_target_endpoint">How do I delete a target endpoint for an implementation?</a></li>
	<li><a href="#api_impl_process_editor">How do I manage orchestration for my implementation?</a></li>
	<li><a href="#api_impl_process_editor_use">How do I use the Process Editor?</a></li>
	<li><a href="#api_impl_debug_mode">What is debug mode?</a></li>
	<li><a href="#debug_mode_enable">How do I turn on debug mode for my implementation?</a></li>
	<li><a href="#api_impl_specify_listener">How do I specify a listener when adding/editing an implementation endpoint?</a></li>
	<li><a href="#api_impl_dependencies">How can I see implementation dependencies?</a></li>
	<li><a href="#api_impl_dependencies_tool_using">How do I use the implementation dependencies tool?</a></li>
</ol>


<h5 style="color: gray;"><a href="#h_deployment_zones">Managing Deployment Zones for an API Implementation:</a></h5>


<ol class="table_of_contents">
	<li><a href="#api_dz_what_is">What is a deployment zone?</a></li>
	<li><a href="#api_dz_how_see">How do I see which deployment zones my API is deployed to?</a></li>
	<li><a href="#api_dz_colors">What does the color coding on deployment zones mean?</a></li>
	<li><a href="#api_dz_how_add">How do I add an API deployment zone?</a></li>
	<li><a href="#api_dz_how_many">How many API deployment zones can I have?</a></li>
	<li><a href="#api_dz_how_edit">How do I edit an API deployment zone?</a></li>
	<li><a href="#context_path_define">What is the context path and how do I make sure I have the right context path for my API implementation?</a></li>
	<li><a href="#api_dz_context_path_validation_rules">What are the validation rules for the context path?</a></li>
	<li><a href="#api_dz_how_add_new_protocol">How do I add a new protocol for an API deployment zone?</a></li>
	<li><a href="#api_dz_how_delete">How do I delete an API deployment zone?</a></li>
</ol>


<h5 style="color: gray;"><a href="#h_policies">Managing Policies for an API Implementation:</a></h5>


<ol class="table_of_contents">
	<li><a href="#api_impl_policies_available">What types of policies are available for my API?</a></li>
	<li><a href="#what_security_and_monitoring_policies_are_supported">What security and monitoring policies are available for my API?</a></li>
	<li><a href="#api_impl_policies_choose">Which policies should I choose?</a></li>
	<li><a href="#api_impl_policies_view_details">How can I see details about a policy?</a></li>
	<li><a href="#what_is_the_minimum_policy_requirement_for_my_api">What is the minimum policy requirement for my API?</a></li>
	<li><a href="#api_impl_policies_how_assign">How do I assign policies to my API implementation?</a></li>
	<li><a href="#api_impl_policies_how_view">How do I see which policies are assigned to my API implementation?</a></li>
	<li><a href="#how_do_i_set_up_my_api_to_support_cors">How do I set up my API to support CORS?</a></li>
</ol>


<h5 style="color: gray;"><a href="#h_identities">Managing Identities for an API Implementation:</a></h5>


<ol class="table_of_contents">
	<li><a href="#api_impl_identities_overview">What is an implementation identity?</a></li>
	<li><a href="#api_impl_identities_settings">How do I manage my implementation identity settings?</a></li>
</ol>


<h5 style="color: gray;"><a href="#h_keys_certificates">Managing Keys and Certificates for an API Implementation:</a></h5>

<ol class="table_of_contents">
	<li><a href="#api_impl_keys_certs">How do I manage keys and certificates for my API?</a></li>
	<li><a href="#platform_sni">How does the platform support SNI?</a></li>
	<li><a href="#api_impl_sni">How do I set up my API to support SNI?</a></li>
</ol>





<div class = "divider1"></div>
<h3 id="h_implementations">Implementations:</h3>




<h3 id="api_impl_what_is">What is an API implementation?</h3>
<p>Different implementations of an API represent the different endpoints of the API in the same <a href="basics_glossary.htm#gl_lifecyclestage">lifecycle stage</a>. For example, it is common for an API to have <strong>Sandbox</strong> and <strong><!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --></strong> implementations.</p>
<p>When you create your initial API definition, the API platform creates the <strong><!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --></strong> implementation automatically. You can create a second implementation for Sandbox, if needed.</p>
<p>If an existing implementation is deleted, you can create another; however, you cannot have more than two implementations of an API at the same lifecycle stage.</p>
<h5>Implementation Summary</h5>
<p>The Implementations page for your API (API Details &gt; Implementations) will look something like the below:</p>
<p><img src="assets/api_implementations_summary.jpg" alt="API Implementations page" /></p>
<p>In this example, there are three <a href="basics_glossary.htm#gl_deploymentzone">deployment zones</a> available and active for each implementation; therefore, each implementation has three endpoints, one for each deployment zone. You can modify as needed. For more information, see <a href="#h_deployment_zones">Managing Deployment Zones for an API</a>.</p>
<h5>Implementation Details</h5>
<p>When you click through on a specific implementation, you'll see the implementation details, something like the below</p>
<p><strong>Top part of the page (Default Theme):</strong></p>
<p><img src="assets/api_implementations_details_01.jpg" alt="API Implementations page, top part" /></p>
<p><strong>Bottom part of the page (Hermosa Theme):</strong></p>
<p><img src="assets/api_implementations_details_02.jpg" alt="API Implementations page, top part" /></p>
<p>On this page, you can manage all aspects of the implementation:</p>
<ul>
	<li><strong>Top section</strong>: modify metadata about the implementation such as description and proxy URL.</li>
	<li><strong>Deployments section</strong>: modify the technical details about the implementation such as deployment zones and vanity hostname.</li>
	<li><strong>Policies section</strong>: specify policies to be applied to API traffic for this implementation.</li>
	<li><strong>Identities</strong> section: manage identity settings for the implementation, and add, modify, or delete identities.</li>
	<li><strong>Certificates section</strong>: manage certificates for the implementation. See <a href="#api_impl_keys_certs">How do I manage keys and certificates for my API?</a></li>
	<li><strong>Resources section</strong>: view a list of resources for the implementation, and manage processes for individual resources.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_how_add">How do I add an API implementation?</h3>
<p>If you create your API by importing an API description document, the platform creates the <!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --> implementation as part of creating the API. In this scenario, it's best to review the API implementation definition, and modify if needed. See <a href="#api_impl_how_edit">How do I edit an API Implementation?</a> below.</p>
<p>If you created your API from scratch, or you want a second implementation for an existing API, you'll need to add a new implementation. Follow the steps below.</p>
<h5 id="proc_impl_add">To add an API implementation</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click <strong>Add</strong>.</li>
	<li><strong>At the Add Implementation</strong> page, provide the following:
<ul>
      <li><strong>Implementation Name</strong>: choose from the drop-down list available. You can have one implementation for each option available on the list.</li>
      <li><strong>Description</strong>: a short description of the implementation. This field supports <a href="basics_glossary.htm#gl_markdown">Markdown</a>, so you can add formatting. Click the <strong>?</strong> sign for help with Markdown, if needed.</li>
      <li><strong>Pattern</strong>: Choose <strong>Proxy</strong> for a simple scenario where the API implementation has a 1:1 relationship with a back-end physical service/API; then provide the API endpoint that you want to set up a proxy for. Choose <strong>Orchestration</strong> for a more complex API implementation that might include one or more services, processes, or additional steps.</li>
      </ul>
    </li>
<!--  <li>Choose a pattern. This determines how you want to create the new implementation. Choices: Proxy, Clone, Existing Service, Mock Service, or Orchestration. For more information, see <a href="#api_impl_pattern">What is an implementation pattern and which one should I choose?</a> below.</li>-->
	<li>Click <strong>Save</strong>.</li>
	<li>At the Implementations page, click the link for the new implementation to add additional values. See <a href="#proc_impl_edit">To edit an API implementation</a> below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_how_add_sbox">How do I add a Sandbox implementation?</h3>
<p>If you're designing your API from scratch, there are no implementations until you create them. In this scenario, to add a Sandbox implementation, follow the instructions in <a href="#proc_impl_add">To add a new API implementation</a> above.</p>
<p>If you create the API from an API description document, the first implementation is automatically created as a <!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --> implementation.</p>
<p>If you want to add an additional implementation for Sandbox, follow the instructions in <a href="#proc_impl_add">To add a new API implementation</a> above.</p>
<p>If you want <strong>only</strong> a Sandbox implementation, first add the new Sandbox implementation, and then delete the <!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --> implementation following the instructions in <a href="#api_impl_how_delete">How do I delete an API implementation?</a> below.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_pattern">What is an implementation pattern and which one should I choose?</h3>
<p>When you're setting up an implementation, you'll need to specify the <a href="basics_glossary.htm#gl_implementationpattern">implementation pattern</a> and then provide additional details.</p>
<p>The implementation pattern determines how you want to go about creating the implementation and/or what existing service you want to use or to base the new service on.</p>
<p>Generally, <strong>Proxy</strong> is the default. It is appropriate for a simple scenario where the API implementation has a 1:1 relationship with a back-end physical service/API.</p>
<p>For a more complex API implementation, that might include one or more services, processes, or additional steps, choose <strong>Orchestration</strong>. Later, you can use the built-in <a href="#api_impl_process_editor_use">Process Editor</a> to fine-tune the process.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_how_many">How many API implementations can I have?</h3>
<p>You can have two API implementations for each <a href="basics_glossary.htm#gl_lifecyclestage">lifecycle stage</a>. Each implementation represents a different endpoint; generally, <strong><!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --></strong> and <strong>Sandbox</strong>.</p>
<p>When you create your initial API definition, by default the <strong><!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --></strong> implementation is created. You can create a second implementation for Sandbox, if needed.</p>
<p>If an existing implementation is deleted, you can create another; however, you cannot have more than two implementations of an API at the same lifecycle stage.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_how_edit">How do I edit an API implementation?</h3>
<h5 id="proc_impl_edit">To edit an API implementation</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation you want to edit. The summary page for the implementation is displayed. There are several sections to the page:
    <ul>
      <li>General information about the implementation</li>
      <li>Deployment zone data</li>
      <li>Policies</li>
      <li>Certificate</li>
      <li>Resources</li>
    </ul>
  </li>
	<li>Optional: edit implementation summary values:
    <ul>
      <li> In the top section, click <strong>Edit</strong>.</li>
      <li>Add or modify the description. You can use Markdown if needed.</li>
      <li>Check or clear the <strong>Allow Anonymous Access</strong> check box.</li>
      <li>Check or clear the <strong>Approval Required</strong> check box (applicable only if anonymous access is not allowed).</li>
      <li>In the <strong>Pattern</strong> field, change the <a href="basics_glossary.htm#gl_implementationpattern">implementation pattern</a> if needed. Choose <strong>Proxy</strong> for a simple scenario where the API implementation has a 1:1 relationship with a back-end physical service/API. Choose <strong>Orchestration</strong> for a more complex API implementation that might include one or more services, processes, or additional steps.</li>
      <li>When done, click <strong>Save</strong>.</li>
    </ul>
    </li>
	<li>Optional: edit deployment zone details:
    <ul>
    <li>In the middle section, click <strong>Edit</strong>.</li>
    <li><strong>Zone</strong>: choose a different deployment zone out of the valid values available.</li>
    <li><strong>Enable Zone</strong>: To add or remove deployment zones for the implementation, click the zone on the left and then check or clear the <strong>Enable Zone</strong> box on the right.</li>
    <li>Add protocol: click the <strong>+</strong> tab. At the <strong>Add Endpoints</strong> overlay, choose the protocol and click <strong>Add</strong>.
    <p><strong>Note</strong>: If you want to use SNI to serve up the implementation's key/certificate, in the HTTPS tab, check the <strong>Use Implementation's Key/Certificate for SSL</strong> box (requires that API Clients are SNI-compliant).</p></li>
    <li><a href="basics_glossary.htm#gl_contextpath">Context Path</a>: defaults to a single forward slash (<strong>/</strong>) but you can change it.</li>
  </ul>
  </li>
	<li>Optional: edit policies:
    <ul>
      <li>In the <strong>Policies</strong> section, click <strong>Edit</strong>.</li>
      <li>Choose to attach or remove policies, and then click <strong>Save</strong>. For more information, see <a href="#h_policies">Managing Policies for an API Implementation</a>.</li>
    </ul>
  </li>
	<li>Optional: edit identities:
    <ul>
      <li>In the <strong>Identities</strong> section, click <strong>Edit</strong>.</li>
      <li>Modify the identity settings as needed, and then click <strong>Save</strong>. For more information, see <a href="#api_impl_identities_settings">How do I manage my implementation identity settings?</a></li>
    </ul>
  </li>
	<li>Optional: edit certificate information for the implementation:
    <ul>
      <li>In the <strong>Certificate</strong> section, click <strong>Edit</strong>.</li>
      <li>On the Keys and Certificates page, manage keys and certificates. You can upload, download, or delete. When you're done, click <strong>Save</strong>. For more information, see <a href="#api_impl_keys_certs">How do I manage keys and certificates for my API?</a></li>
    </ul>
  </li>
	<li>Optional: edit resources:
    <ul>
      <li>Choose the resource you want to edit. In the Actions column, click the arrow. The Process Editor opens.</li>
      <li>Edit the process for the resource, and then click <strong>Save</strong>. For more information, see <a href="#api_impl_process_editor_use">How do I use the Process Editor?</a> below.</li>
    </ul>
  </li>
</ol>
<p>The changes are effective immediately.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_how_delete">How do I delete an API implementation?</h3>
<p>You can delete one or more implementations for an API.</p>
<p><strong>Note</strong>: When you delete an implementation, all apps are disconnected from the implementation, and all process configuration, policies, and endpoints are deleted. This action is not reversible. To set up the implementation again you'd need to recreate from scratch, including policies, process configuration, and endpoints, and apps would need to connect to the new implementation.</p>
<h5>To delete an API implementation:</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation you want to delete. The summary page for the implementation is displayed.</li>
	<li>At the top right, click <strong>Delete</strong>.</li>
	<li>At the confirmation prompt, click <strong>OK</strong>. The implementation is deleted.</li>
</ol>
<p>The changes are effective immediately.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_add_modify_target_endpoint">How do I add or modify a target endpoint for an implementation?</h3>
<p>After your API is set up, you might need to change the target endpoint for a specific implementation, or add a new target endpoint. You can add or change a target endpoint at any time.</p>
<h5>To add or modify a target endpoint for an API implementation:</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation you want to modify. The summary page for the implementation is displayed.</li>
	<li>In the top section, under <strong>Pattern</strong>, click the <strong>Modify target endpoints</strong> link.</li>
	<li>On the Endpoints page, you have two options:
    <ul>
      <li>Edit an existing endpoint: click the Expand icon (...) to expand, and then click the Edit icon (pencil).</li>
      <li>Add an endpoint: click <strong>Add</strong>.</li>
    </ul>
    </li>
	<li>Set values for the following fields:
    <ul>
      <li><strong>Location</strong>: enter the full URL for the target endpoint (the actual endpoint for your API; the proxy endpoint relays traffic to the target endpoint).</li>
      <li><strong>Protocol version</strong>: Leave as <strong>Unspecified</strong>, the default, or specify <strong>HTTP 1.0</strong> or <strong>HTTP 1.1</strong>.
        <br />
  <p><strong>Note</strong>: When <strong>Unspecified</strong> is selected, the API Gateway takes the HTTP version in the request message and uses it in the downstream request message to the target endpoint. If another version is specified, the API Gateway always uses the specified version for downstream requests.</p></li>
    <li><strong>Require Content-Length Header</strong>: Check this box if the proxy endpoint should send a Content-Length header to the target endpoint, to indicate the message length.
        <br />
  <p><strong>Note</strong>: If the protocol version is HTTP 1.0, the Requires Content-Length Header field is checked by default and cannot be changed; it is required.</p></li>
</ul></li>
	<li>Click <strong>Finish</strong> to save the endpoint.</li>
	<li>Click <strong>Finish</strong> to exit from the Endpoints page.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_delete_target_endpoint">How do I delete a target endpoint for an implementation?</h3>
<p>You can delete a target endpoint. In case the endpoint is in use, make sure users are notified before deleting the endpoint.</p>
<h5>To delete a target endpoint for an API implementation:</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation you want to delete. The summary page for the implementation is displayed.</li>
	<li>In the top section, under <strong>Pattern</strong>, click the <strong>Modify target endpoints</strong> link.</li>
	<li>On the Endpoints page, find the endpoint you want to delete. Click the Expand icon (...) to expand, and then click the Delete icon (X).</li>
	<li>At the confirmation message, click <strong>OK</strong>.</li>
	<li>On the Endpoints page, click <strong>Finish</strong> (if you don't confirm on this page, the endpoint is not deleted).</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_process_editor">How do I manage orchestration for my implementation?</h3>
<p>If your API implementation is more complex, and might include one or more services, processes, or additional steps, choose an <a href="basics_glossary.htm#gl_implementationpattern">implementation pattern</a> of Orchestration. Then, you'll be able to use all the features of the built-in Process Editor to fine-tune the orchestration of your API.</p>
<p>To access and use the Process Editor, follow the procedure below. If you need more details about the specific activities available and how you can configure them, refer to the full standalone Process Editor documentation (links below).</p>
<p>For a tutorial video showing an example of using the Process Editor, see <a href="https://www.youtube.com/watch?v=VdiYPH4YP0A" target="_blank">Add an API using orchestration</a> (external link).</p>
<h5>To access the Process Editor to manage orchestration for your implementation</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation you want to edit. The summary page for the implementation is displayed. There are several sections to the page:
    <ul>
      <li>General information about the implementation</li>
      <li>Deployment zone data</li>
      <li>Policies</li>
      <li>Certificate</li>
      <li>Resources</li>
    </ul>
    </li>
  
	<li>In the bottom section, find the resource that you want to manage the process for.</li>
	<li>In the right column, Actions, click and choose Edit Process. The Process Editor opens.</li>
	<li>Edit the process for the resource, and then click <strong>Save</strong>. For more information, see <a href="#api_impl_process_editor_use">How do I use the Process Editor?</a> below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_process_editor_use">How do I use the Process Editor?</h3>
<p>You can access the Process Editor, used to manage orchestration at the implementation level or for a specific resource (operation), in the developer portal. Depending on your role, you can:</p>
<ul>
	<li>Manage processes for the organization (Business Admin): see <a href="bus_admin_org_processes.htm">Organization Processes</a>.</li>
	<li>Manage the process for a specific resource (API Admin): <a href="#api_impl_process_editor">How do I manage orchestration for my implementation?</a> above. The API must have the Orchestration setting enabled; see <a href="#api_impl_pattern">What is an implementation pattern and which one should I choose?</a></li>
</ul>
<p>For information about how to use the Process Editor once you're there, use the summary and links below.</p>

<h5>Process Editor: summary</h5>
<ul>
	<li>The Activity Palette on the left includes a selection of tools that you can use to manage orchestration.</li>
	<li>Drag and drop activities onto the grid as needed.</li>
	<li>Double-click any activity to open up the Activity Edit page, which offers additional settings and values to customize the behavior of the activity.</li>
	<li>Be sure to save any work you do in the Process Editor by clicking the disk icon on the left. Before exiting the Process Editor, save changes and make sure you see the confirmation message.</li>
	<li>To close the Process Editor and return to the Implementation page, click <strong>Finish</strong>.</li>
  </ul>
<h5>Process Editor: additional resources</h5>
<p>Use the resources below to become more familiar with the features of the Process Editor:</p>
<ul>
	<li>Standalone Process Editor help: <a href="http://docs.akana.com/ag/processes/process_reference_pm8x.htm">http://docs.akana.com/ag/processes/process_reference_pm8x.htm</a>.</li>
	<li>Adding a Script activity to an operation: <a href="http://docs.akana.com/ag/processes/getting_started_with_processes_pm8x.htm#process_editor_example" target="_blank">Getting Started Example: Adding a Script Activity</a>.</li>
	<li>Tutorial video showing an example of using the Process Editor: <a href="https://www.youtube.com/watch?v=VdiYPH4YP0A" target="_blank">Add an API using orchestration</a> (external link).</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_debug_mode">What is debug mode?</h3>
<h5 class="stamp">API Platform Version: 8.4 and later</h5>
<p>Debug mode is a setting that controls the level of logging of API traffic. Debug mode, the second-highest level of logging, records additional information to the API's logs, above and beyond the normal settings.</p>
<p>You can turn on debug mode if there's an issue with the API, in a specific implementation, and you need more information to determine what the problem is. Debug mode requires that there is at least one auditing policy, of any type, attached to the API.</p>
<p>As long as there's an auditing policy attached to the API, when debug mode is turned on the platform adds log entries for each of the steps performed by the underlying infrastructure, for every transaction. The steps recorded in debug mode are:</p>
<ul>
	<li>Policy enforcement/implementation</li>
	<li>Orchestration activity execution</li>
</ul>
<p>If you turn on debug mode, remember to turn it off when your debug activities are complete. Because it records additional information, which is then also stored, there is a small performance impact as well as a storage impact.</p>
<p>For information about turning on debug mode, see <a href="#debug_mode_enable">How do I turn on debug mode for my implementation?</a> below.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="debug_mode_enable">How do I turn on debug mode for my implementation?</h3>
<h5 class="stamp">API Platform Version: 8.4 and later</h5>
<p>You can turn on debug mode in two places:</p>
<ul>
	<li>In the <strong>Implementation Details</strong> page</li>
	<li>In the <strong>Logs</strong> page for the API</li>
</ul>

<h5>To turn on debug mode in the Implementation Details page</h5>
<p>First, make sure there is at least one auditing policy attached to the API; either Basic Auditing or Detailed Auditing. If there is no auditing policy, transactions are not logged at all.</p>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation. The summary page for the implementation is displayed.</li>
	<li>In the top section, click the <strong>Debug Mode</strong> swipe button, as shown below. Debug mode is turned on immediately.
    <p><img src="assets/api_impl_debugmode.jpg" alt="Turning on debug mode" /></p></li>
	<li>If needed, use the <strong>Go to Transaction Logs</strong> link. This is a shortcut to the <strong>API</strong> &gt; <strong>Analytics</strong> &gt; <strong>Logs</strong> page. For more information on the transaction logs, see <a href="api_admin_monitoring.htm#how_do_i_monitor_api_usage_logs">How do I monitor API usage logs?</a></li>
</ol>
<p>Remember to turn off debug mode when you're done.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_specify_listener">How do I specify a listener when adding/editing an implementation endpoint?</h3>
<h5 class="stamp">API Platform Version: 8.4 and later</h5>
<p>When adding or editing an endpoint for an implementation in the developer portal, the API Admin can specify the listener, choosing from a list of valid listeners available, on the <strong>Protocol</strong> tabs for the implementation.</p>
<p>The first listener is generated automatically as part of the API creation process. You can specify a listener as part of adding a subsequent implementation, or as part of editing any implementation. </p>
<p>If only one listener for a specific protocol is available for the deployment zone, the listener pull-down does not appear.</p>
<h5>To specify a listener</h5>
<ol>
	<li>Log in to the Akana API Platform.</li>
	<li>Choose the API.</li>
	<li>On the left menu, click <strong>Implementations</strong> to access the <strong>Details</strong> page for the implementation.</li>
	<li>In the <strong>Deployments</strong> section, click <strong>Edit</strong>.
  <p><strong>Note</strong>: If there are no deployment zones listed in the <strong>Zone</strong> drop-down list, the Business Admin hasn't added any. The Business Admin sets up deployment zones as part of business organization configuration. See <a href="bus_admin_dzs.htm#dz_add">How do I add a deployment zone?</a> (Business Admin help).</p></li>
	<li>If it's not yet checked, check the <strong>Enable Zone</strong> box. Additional fields are displayed so you can choose from available protocols and settings.</li>
	<li><strong>Optional</strong>: to delete one or more existing listeners, click the <strong>X</strong> next to it, as shown below. At the confirmation prompt, click <strong>OK</strong> to delete the listener.
  <p><img src="assets/api_impl_listener_delete.jpg" alt="Deleting an existing listener" /></p>
  </li>
	<li>To add a listener, click the <strong>+</strong> icon, and then choose one or more available listeners, as shown below.
<p><img src="assets/api_impl_listener_add.jpg" alt="Adding a listener to an implementation" /></p>
<p><strong>Note</strong>: this overlay shows all available listeners, even if they are already selected. When you're modifying listeners, it's a good idea to delete existing listeners first, as explained in Step 6 above.</p>
  </li>
	<li>Click <strong>Add</strong>.</li>
	<li>Click <strong>Save</strong> to save changes and return to the <strong>Details</strong> page for the implementation.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_dependencies">How can I see implementation dependencies?</h3>
<h5 class="stamp">API Platform Version: 8.4 and later</h5>
<p>The developer portal includes a dependencies tool&#8212;a graphical interface that you can use to more clearly understand the hierarchy of elements in the implementation. These elements can include the actual web service application (physical service) and one or more virtual services.</p>
<p>By viewing and manipulating the elements in the visual representation, you can get a high-level, or very detailed, view of the upstream and downstream dependencies of the implementation.</p>
<p>This is particularly useful in an orchestration scenario where there might be more complex factors at play, not just a one-to-one virtual service to physical service scenario.</p>

<h5>To view the dependencies for an implementation</h5>
<ol>
	<li>Log in to the Akana API Platform.</li>
	<li>Choose the API.</li>
	<li>On the left menu bar, click <strong>Implementations</strong>.</li>
	<li>Click the implementation you want to work with.</li>
	<li>In the left menu bar, click <strong>Dependencies</strong>. The dependency map is displayed. An example is shown below.
    <p><img src="assets/api_impl_dependencies.jpg" alt="Implementation dependencies" /></p></li>
</ol>
<p><a href="#top">Back to top</a></p>




<h3 id="api_impl_dependencies_tool_using">How do I use the implementation dependencies tool?</h3>
<p>You can manipulate the elements in the implementation dependencies tool to get a better understanding of your API implementation.</p>
<p>This is particularly useful if your API includes orchestration; the visual representation can help you to understand the dependencies in an aggregate sense, rather than having to open up each operation and view the orchestration process that has been implemented for each.</p>
<p>In the implementation dependencies tool, you can:</p>
<ul>
	<li>Drag nodes to change the visual display.</li>
	<li>Zoom in and out using the mouse scroll bar.</li>
	<li>Hover over a node to view details about the resource, as shown below (Name, Description).
    <p><img src="assets/api_impl_depend_hover_resource.jpg" alt="Implementation dependencies, hover help for resource" /></p></li>
	<li>Hover over the connection between nodes to view details about the relationship between resources, as shown below.
    <p><img src="assets/api_impl_depend_hover_relationship.jpg" alt="Implementation dependencies, hover help for relationship" /></p></li>
</ul>
<p><a href="#top">Back to top</a></p>



<div class = "divider1"></div>
<h3 id="h_deployment_zones">Managing Deployment Zones for an API Implementation:</h3>




<h3 id="api_dz_what_is">What is a deployment zone?</h3>
<p>A deployment zone is a physical location, such as a geographical area or a specific data center, that the API endpoint uses to proxy the API, if the API is hosted on the platform and is using the proxy capability.</p>
<p>One or more deployment zones are configured as part of the platform setup. When the API Admin creates the API, either from scratch or by uploading an API description document, the platform matches the API against the deployment zones that are defined. The API is deployed to all matching deployment zones.</p>
<p>For example, a deployment zone might be defined as being for live implementations only. An API sandbox implementation would not be deployed to this deployment zone.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_dz_how_see">How do I see which deployment zones my API is deployed to?</h3>
<p>Once you've added your API, it is automatically deployed to any of the API Platform deployment zones with criteria that match your API definition.</p>
<p>The deployment zones for your API are displayed in a map-like chart, as shown below:</p>
<p><img src="assets/api_dz.jpg" alt="Deployment zones" /></p>
<p>Deployment zones are assigned to each API implementation when the implementation is created. You can then fine-tune as needed.</p>
<p><strong>Note</strong>: If a physical location hasn't been specified for the deployment zone, it shows on the map as <strong>Unknown</strong>, and the dot appears on the top left of the map.</p>
<h5 id="proc_dz_view">To view the deployment zones for a specific implementation</h5>
<ol>
	<li>Log in to the Akana API Platform.</li>
	<li>Choose the API.</li>
	<li>On the left menu, click <strong>Implementations</strong>.</li>
	<li>Click the link for the implementation you want to view.</li>
</ol>
<p><strong>Note</strong>: If your API implementation meets the criteria for multiple deployment zones, it has a unique endpoint for each deployment zone.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_dz_colors">What does the color coding on deployment zones mean?</h3>
<p>When you view the deployment zone map for an API implementation, you might see one or more deployment zones.</p>
<p>The platform uses color coding to convey information about deployment zones, as follows:</p>
<ul>
	<li><strong>Pale blue</strong>&#8212;Disabled and not selected</li>
	<li><strong>Pale green</strong>&#8212;Enabled and not selected</li>
	<li><strong>Dark blue</strong>&#8212;Disabled and selected</li>
	<li><strong>Dark green</strong>&#8212;Enabled and selected</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h3 id="api_dz_how_add">How do I add an API deployment zone?</h3>
<p>You cannot specifically add a deployment zone to an API. Deployment zones are set up by the Administrator; when you add an implementation, deployment zones are assigned automatically based on the criteria for the API and the deployment zones.</p>
<p>However, there are a couple of scenarios that allow you to make an additional deployment zone available to your API:</p>
<ul>
	<li>if you disable a deployment zone from your API implementation, you can re-enable it.</li>
	<li>If a new deployment zone becomes available on the platform, and it matches the criteria for your API, you can then add it to your API.</li>
</ul>
<p>When you create your API from an API description document, the platform automatically matches up your API definition against the existing deployment zones, and deploys the API to all deployment zones for which it matches the criteria.</p>
<p>Note that <strong><!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --></strong> and <strong>Sandbox</strong> implementations are likely to be deployed to different deployment zones.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_dz_how_many">How many API deployment zones can I have?</h3>
<p>An API can have many deployment zones.</p>
<p>The number of deployment zones for an API is determined by these factors:</p>
<ul>
	<li>The number of deployment zones defined on the platform.</li>
	<li>The eligibility requirements for each deployment zone; for example, a specific deployment zone might be limited to <!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --> implementations, so an API's Sandbox implementation would not have access to it.</li>
	<li>The API definition.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h3 id="api_dz_how_edit">How do I edit an API deployment zone?</h3>
<p>When you're adding a new implementation, or editing an implementation that was manually added or automatically generated for your API, you can fine-tune the deployment zone assignments by modifying the settings. You can:</p>
<ul>
	<li>Disable/enable one or more deployment zones from the API's implementation.</li>
	<li>Add a protocol for an existing deployment zone, if additional protocols are available for the specific deployment zone.</li>
	<li>Add a vanity hostname.</li>
	<li>Add a <a href="basics_glossary.htm#gl_contextpath">context path</a>.</li>
	<li>Set up a new protocol for the deployment zone, or modify an existing one (from available protocols)</li>
	<li>Specify whether the deployment zone is included in automatically-generated API documentation.</li>
</ul>
<p><strong>Note</strong>: By default, when the implementation is added for a specific deployment zone, a unique hostname is created; for example, <strong>api11192live.developer.acmepaymentscorp.com</strong>. Each API has a unique hostname for each valid zone it's deployed in. Your API users can use either the unique hostname generated by the platform or the vanity hostname you provide yourself.</p>
<p><img src="assets/api_designer_dzs.jpg" alt="Editing deployment zones for an API" /></p>
<h5 id="proc_impl_dz_edit">To edit an API's deployment zone assignment for a specific implementation</h5>
<ol>
	<li>Follow the steps in <a href="#proc_dz_view">To view the deployment zones for a specific implementation</a> to get to the Deployment Zones page.</li>
	<li>In the <strong>Deployments</strong> section (second section of the page), on the right, click <strong>Edit</strong>.</li>
	<li>Choose the deployment zone to edit by clicking in the map view or choosing from the drop-down list.</li>
	<li>Choose the protocol to edit by clicking the applicable tab on the right. To add an available protocol, click <strong>+</strong> and then, in the <strong>Add Endpoint</strong> dialog, choose the protocol. Available protocols are determined by how the deployment zone is defined; if you don't have the protocol you need, ask a Site Admin or Business Admin.
    <p><strong>Note</strong>: If you want your API to support <a href="basics_glossary.htm#gl_sni">SNI</a>, choose HTTPS and click the <strong>Use Implementation's Key/Certificate for SSL</strong> check box, as shown below. (For more information on implementing SNI, see <a href="#api_impl_sni">How do I set up my API to support SNI?</a>)</p>
  <p><img src="assets/api_impl_dz_https.jpg" alt="Using HTTPS" /></p>
  </li>
	<li>Change values as needed. For help with the field definitions, see <a href="#fieldvalues_parameter_add_edit">Add Deployment Zone / Edit Deployment Zone Dialog: Field Values</a> below.</li>
	<li>Click <strong>Save</strong>.<br />
  </li>
</ol>
<p><strong>Note</strong>: If you're not using a vanity hostname, you don't need to provide a <a href="basics_glossary.htm#gl_contextpath">context path</a>; the path is already unique to the API implementation.</p>


<h5 id="fieldvalues_parameter_add_edit">Add Deployment Zone / Edit Deployment Zone Dialog: Field Values</h5>
<p>The Add Deployment Zone / Edit Deployment Zone dialog provides the following:</p>
<dl class="apidoc_dl">
  <dt>Map view</dt>
  <dd>To view information about a deployment zone, click the zone on the map.</dd>
  <dt>Zone</dt>
  <dd>Choose from the drop-down list. The list shows all deployment zones that are valid for the specific API implementation.</dd>
  <dt>Enable Zone</dt>
  <dd>Check or clear the box to enable or disable the deployment zone.</dd>
  <dt>Protocol tabs</dt>
  <dd>To add a protocol, click the <strong>+</strong> sign and choose from additional protocols available (if any; determined by the deployment zone definition as set up by the Site Admin or Business Admin).</dd>
  <dt>Hostname</dt>
  <dd>The generated, unique hostname for the API implementation is displayed.</dd>
  <dt>Use Implementation's Key/Certificate for SSL (HTTPS only)</dt>
  <dd>Check the box if you want to use SNI to serve up the implementation's key/certificate. Requires that API Clients are SNI-compliant.</dd>
  <dd>To support SNI, you must also upload a certificate for the implementation (see <a href="#api_impl_keys_certs">How do I manage keys and certificates for my API?</a>).</dd>
  <dt>Provide Vanity Hostname</dt>
  <dd>When an API implementation is automatically created with one or more valid deployment zones, a random prefix is added to the hostname. Check the box if you want to give the implementation a vanity hostname that's easy to remember and in a different domain (for example, <strong>api.acmepaymentscorp.com</strong>) rather than the unique hostname assigned by the platform.</dd>
  <dd><strong>Note</strong>: Whether you use the assigned hostname with the random prefix or a vanity hostname, make sure your hostname is configured in the DNS server as a CNAME to the unique hostname assigned by the platform.</dd>
  <dt>Vanity Hostname (CNAME)</dt>
  <dd>Provide the vanity hostname; for example, <strong>acmepaymentscorp.com</strong>. Make sure it is mapped to a valid CNAME in the DNS server of the domain for the vanity host.</dd>
  <dt>Context Path</dt>
  <dd>To make the URL unique, use the <a href="basics_glossary.htm#gl_contextpath">context path</a> if necessary. The generated hostname is unique to each API implementation, so if you're using the unique hostname you don't need a context path. If you're using a vanity hostname, use the path to make the URL for each API unique. For validation rules, see <a href="#api_dz_context_path_validation_rules">What are the validation rules for the context path?</a> below.</dd>
  <dt>Calculated Endpoint</dt>
  <dd>The full endpoint for the API implementation is generated based on the settings provided, and is displayed. It is a composite of values: protocol, generated URL or vanity URL, and context path. If the implementation doesn't use a vanity hostname, the calculated endpoint is composed of protocol, assigned URL, and context path if specified.</dd>
  <dt>Publish in API Documentation</dt>
  <dd>You might want to restrict use of a specific endpoint with a generated hostname, for private or internal use. To do this, clear the check box. Only URLs that have this box checked (the default) are included in the API documentation and displayed to users who are not API Admins.</dd>
</dl>
<p><a href="#top">Back to top</a></p>



<h3 id="context_path_define">What is the context path and how do I make sure I have the right context path for my API implementation?</h3>
<p>The endpoint for an API must be a fully unique address to the resource that the API is giving access to.</p>
<p>The endpoint is comprised of the HTTP verb and the full URL, including protocol, hostname, optional port, context path, and object path.</p>
<ul>
  <li><strong>HTTP verb</strong>: most commonly GET, POST, PUT, or DELETE.</li>
  <li><strong>Protocol</strong>: generally HTTP or HTTPS.</li>
  <li><strong>Target hostname</strong>: the part after the protocol and before the context path (see below). Example:  http://www.<strong>acmepaymentscorp.com</strong>.</li>
  <li><strong>Port</strong>: four-character port, sometimes part of the URL. Example: http://example.com:<strong>7900</strong>/atmosphere/#/home/landing.</li>
  <li><strong>Context path</strong>: The context path is the next part of the API endpoint, after the hostname (and optional port). It provides the context for the specific API; this is the part of the URL that's consistent for each operation within the API. Occasionally, there might be nothing specified in the context path, in which case it's just a forward slash (/) and is called <strong>root</strong>. Example of a context path: <strong>/api/payments</strong>.</li>
  <li><strong>Resource path</strong>: the part after the context path, that might&nbsp;be different for different operations within an API. Examples: POST http://www.acmepaymentscorp.com/api/payments<strong>/payment</strong> adds a payment, GET http://www.acmepaymentscorp.com/api/payments<strong>/payment/{PaymentID}</strong> returns details about a specific payment.</li>
</ul>
<p>The API endpoint is a concatenation of the above elements, as shown below:</p>
<pre>{HTTP_VERB} {protocol}://{hostname}{sometimes,port}{context path beginning with slash}/resource path</pre>
<p>For example:</p>
<pre>GET http://www.acmepaymentscorp.com/api/payments/payment/pmtid9346582364</pre>
<p>In the above example:</p>
<ul>
  <li><strong>HTTP verb</strong>: GET</li>
  <li><strong>Protocol</strong>: HTTP</li>
  <li><strong>Port</strong>: none</li>
  <li><strong>Target hostname</strong>:&nbsp; www.acmepaymentscorp.com</li>
  <li><strong>Context path</strong>: /api/payments</li>
  <li><strong>Resource path</strong>: /pmtid9346582364</li>
</ul>

<h5>Developer portal behavior with regard to uniqueness of API endpoint</h5>
<p>By default, when you define an API in the developer portal, the platform performs a validation check for unique combination of virtual host and context path, to make sure that the API endpoint, up to the context path, is unique. If the combination of virtual host and context path is not unique, the platform automatically modifies the API endpoint to make sure it's unique.</p>
<p><strong>Note</strong>: The platform includes a&nbsp;configuration setting that the Site Admin can use to turn off this validation check. If this validation check is disabled, you must make sure that the API path (protocol, hostname, optional port, and context path) will be unique. For information about this setting, see <a href="site_admin_settings.htm#settings_api_general">General API Settings</a> (Site Admin help).</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_dz_context_path_validation_rules">What are the validation rules for the context path?</h3>
<p>The rules applied to the context path are:</p>
<ul>
	<li>It cannot have spaces.</li>
	<li>Question mark (?) is not allowed.</li>
	<li>The following special characters are allowed: forward slash (/), comma (,), dash (-).</li>
	<li>No other special characters are allowed.
  </li>
</ul>
<p><a href="#top">Back to top</a></p>



<h3 id="api_dz_how_add_new_protocol">How do I add a new protocol for an API deployment zone?</h3>
<p>You can add an additional protocol supported by the deployment zone your API implementation is using.</p>
<h5>To add a new protocol to an existing deployment zone</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation you want to edit. </li>
	<li>In the middle section, click <strong>Edit</strong> to edit the deployment zone details.</li>
	<li>In the protocol section on the right, click the <strong>+</strong> tab.</li>
	<li>At the <strong>Add Endpoints</strong> overlay, choose the protocol and click <strong>Add</strong>.
  <p><strong>Note</strong>: the list of protocols available is determined by the properties of the deployment zone that the implementation is using. Deployment zones are defined by the Site Admin or Business Admin.</p></li>
	<li>Click <strong>Save</strong>.</li>
</ol>

<p><a href="#top">Back to top</a></p>



<h3 id="api_dz_how_delete">How do I delete an API deployment zone?</h3>
<p>Deployment zones are set up by the Site Admin and are assigned to your API automatically based on the deployment zone criteria and the API definition. You cannot delete a deployment zone; however, you can disable a specific deployment zone for your API, which achieves the same result.</p>
<p>Any customization of settings is lost when you disable a deployment zone.</p>
<h5>To disable a deployment zone for an API</h5>
<ol>
	<li>Follow the steps in <a href="#proc_dz_view">To view the deployment zones for a specific implementation</a> to get to the Deployment Zones page.</li>
	<li>In the Deployments section, on the right, click <strong>Edit</strong>.</li>
	<li>Choose the deployment zone you want to disable, either by clicking in the map view or choosing from the drop-down list.</li>
	<li>Clear the <strong>Enable Zone</strong> check box.</li>
	<li>Click <strong>Save</strong>.</li>
</ol>
<p><strong>Note</strong>: If you previously disabled a deployment zone, you can re-enable it by going back in and checking the box, then editing the settings as needed.</p>
<p><a href="#top">Back to top</a></p>




<div class = "divider1"></div>
<h3 id="h_policies">Managing Policies for an API Implementation:</h3>




<h3 id="api_impl_policies_available">What types of policies are available for my API?</h3>
<p>The platform allows you to secure and monitor your APIs with policies. A selection of policies is available to apply different rules to your API.</p>
<p>There are three main policy categories:</p>
<ul>
	<li><strong>Simple Header Security</strong>&#8212;Used to identify (authenticate) the application that is attempting to consume an API to determine if it is authorized or not. This policy type supports multiple mechanisms for the app to present its identity, including plain text App Id, signed header with X.509 or a shared secret, or OAuth (1.0a or 2.0).</li>
	<li><strong>Analytics</strong>&#8212;Collects transaction details including recorded messages for every transaction.</li>
	<li><strong>OAuth</strong>&#8212;Provides support for applications performing authentication and authorization using OAuth.</li>
</ul>
<p>For details, see below.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="what_security_and_monitoring_policies_are_supported">What security and monitoring policies are supported?</h3>
<p>The platform offers the preconfigured policies listed below.</p>

<dl class="apidoc_dl">
  <dt>AtmosphereApplicationSecurityPolicy</dt>
  <dd>This is a default security policy for Enterprise API Platform applications. It provides support for SHA1 (Shared Secret), allowing the API to authenticate the app.</dd>
  <dd>For full documentation about this type of policy, refer to: <a href="http://docs.akana.com/ag/cm_policies/using_api_consumer_app_sec_policy.htm" target="_blank">Using the API Consumer Application Security Policy</a> (Akana docs site).</dd>
  <dd><strong>Policy Category</strong>: Simple Header Security</dd>

  <dt>BasicAuditing</dt>
  <dd>Provides basic auditing of messages. Message metrics are recorded in the Usage Logs Analytics tab. The messages themselves are not audited. For message auditing, use the DetailedAuditing policy.</dd>
  <dd>For full documentation about this type of policy, refer to: <a href="http://docs.akana.com/ag/policies/policy_op_basic_auditing.htm" title="" target="_blank">Using the Basic Auditing Policy</a> (Akana docs site).</dd>
  <dd><strong>Policy Category</strong>: Monitoring</dd>

  <dt>CORSAllowAll</dt>
  <dd><a href="basics_glossary.htm#gl_cors">CORS</a> (cross-origin resource sharing) enables users to access resources from within the browser serving a web page, and defines a way in which the browser and the server can interact to determine whether or not to allow the cross-origin request.</dd>
  <dd>The CORSAllowAll policy allows all cross-origin requests.</dd>
  <dd>If you're using the platform as a proxy, you can add the CORSAllowAll policy to allow cross-origin requests to the proxy service.</dd>
  <dd>For full documentation about this type of policy, refer to: <a href="http://docs.akana.com/ag/policies/policy_op_cors.htm" target="_blank">Using the CORS policy</a> (Akana docs site).</dd>

  <dt>DetailedAuditing</dt>
  <dd>Provides detailed auditing of messages. Message metrics are recorded in the Usage Logs Analytics tab as well as the entire message for each exchange.</dd>
  <dd>For full documentation about this type of policy, refer to: <a href="http://docs.akana.com/ag/policies/policy_op_detailed_auditing.htm" target="new">Using the Detailed Auditing Policy</a> (Akana docs site).</dd>
  <dd><strong>Policy Category</strong>: Monitoring</dd>

  <dt>OAuthSecurity</dt>
  <dd>The OAuthSecurity Policy uses the OAuth configuration assigned to an API when enforcing OAuth tokens in the received request. </dd>
  <dd><strong>Note</strong>: If you're applying this policy, remember to also specify OAuth details for the API. On the API <strong>Details</strong> page, from the drop-down on the right, click <strong>OAuth Details</strong>.</dd>
  <dd>For full documentation about this type of policy, refer to: <a href="http://docs.akana.com/ag/cm_policies/using_oauth_security_policy.htm" target="_blank">Using the OAuth Security Policy</a> (Akana docs site).</dd>
  <dd><strong>Policy Category</strong>: OAuth</dd>
</dl>

<p>For more information about policies, see <a href="api_admin_policy_list.htm">Policy List</a>.</p>
<p><strong>Note</strong>: In some cases, such as an on-premise installation, the Site Admin has the ability to create and manage additional policies. In this scenario:</p>
<ul>
	<li>If you require a policy that isn't on the default list, ask the Site Admin.</li>
	<li>If you see policies on the list that are not explained above, ask the Site Admin for information.</li>
</ul>
<p><a href="#top">Back to top</a></p>


<h3 id="api_impl_policies_choose">Which policies should I choose?</h3>
<p>Your selection of one or more policies for a specific API will be determined by the level of security required, whether monitoring is required, whether the API supports OAuth, and other factors.</p>
<p>If the API doesn't allow anonymous requests, you'll need to have the <strong>AtmosphereApplicationSecurityPolicy</strong> in place so that the API can authenticate app requests.</p>
<p>If the API allows anonymous requests, do not specify any policies.</p>
<p><strong>Note</strong>: We don't recommend accepting anonymous requests. At minimum, particularly for a <!-- #BeginLibraryItem "/Library/environ_live.lbi" -->Live<!-- #EndLibraryItem --> implementation, it's best to include at least the <strong>AtmosphereApplicationSecurityPolicy</strong>.</p>
<p>If you want to have monitoring for your API, choose one of the monitoring policies also.</p>
<p>If you want your API to support OAuth, enable the OAuthSecurity policy.</p>
<p>For more information about policies, see <a href="api_admin_policy_list.htm">Policy List</a>.</p>
<p><a href="#top">Back to top</a></p>




<h3 id="api_impl_policies_view_details">How can I see details about a policy?</h3>
<p>When you're adding policies to your implementation, you just see the policy title, not the details about how the policy is configured.</p>
<p>If you want to know more, you can click the title of the policy. Policy details are displayed in a pop-up window. This information is view-only; if you want any changes to the available policies, check with the Business Admin.</p>
<p>You can also review a brief description of the policy and click through for more details about each type of policy (see <a href="#what_security_and_monitoring_policies_are_supported">What security and monitoring policies are supported?</a> above).</p>
<h5>To view details for a policy</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the link for the implementation. The summary page for the implementation is displayed.  </li>
	<li>In the Policies section, click <strong>Edit</strong>.</li>
	<li>Find the policy and click the policy icon. Policy details are displayed in a pop-up window.</li>
	<li>Change the policy assignments, if desired, or cancel out of the window.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h3 id="what_is_the_minimum_policy_requirement_for_my_api">What is the minimum policy requirement for my API?</h3>
<p>There is no minimum policy requirement for an API. However, it's best to at minimum select the <strong>AtmosphereApplicationSecurityPolicy</strong>, which gives you basic security.</p>
<p>If you want to see charts and logs, you must also select a monitoring policy.</p>
<p><a href="#top">Back to top</a></p>




<h3 id="api_impl_policies_how_assign">How do I assign policies to my API implementation?</h3>
<p>Policy assignments are specific to an API version implementation. Follow the steps below.</p>

<h5 id="proc_impl_policy_add">To assign a policy to an API implementation</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation you want to edit. The summary page for the implementation is displayed. There are several sections to the page:
    <ul>
      <li>General information about the implementation</li>
      <li>Deployment zone data</li>
      <li>Policies</li>
      <li>Certificate</li>
      <li>Resources</li>
    </ul>
  </li>
	<li>In the Policies section, click <strong>Edit</strong>.</li>
	<li>In the Available Policies section, choose the policy you want to add and click <strong>Attach</strong>.</li>
	<li>Click <strong>Save</strong>.</li>
</ol>

<h5 id="proc_impl_policy_remove">To remove a policy from an API implementation</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation you want to edit. The summary page for the implementation is displayed. There are several sections to the page:
    <ul>
      <li>General information about the implementation</li>
      <li>Deployment zone data</li>
      <li>Policies</li>
      <li>Certificate</li>
      <li>Resources</li>
    </ul>
  </li>
	<li>In the Policies section, click <strong>Edit</strong>.</li>
	<li>In the <strong>Attached Policies</strong> section, choose the policy and click <strong>Remove</strong>.</li>
	<li>Click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_policies_how_view">How do I see which policies are assigned to my API implementation?</h3>
<p>When you assign policies to an API implementation, they're displayed in the summary view for the implementation, in the bottom section.</p>
<h5 id="proc_impl_policies_assigned">To see which policies are assigned to an API implementation</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation.</li>
	<li>In the Policies section of the page, review which policies are assigned. If needed, click <strong>Edit</strong> to change the policy assignments.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h3 id="how_do_i_set_up_my_api_to_support_cors">How do I set up my API to support CORS?</h3>
<p>If you want your API to support cross-origin resource sharing (<a href="basics_glossary.htm#gl_cors">CORS</a>), you can do that in your API implementation in the platform.</p>
<p>In your API setup, choose the implementation and then add the <strong>CorsAllowAll</strong> policy. </p>
<p>When the API definition includes this policy, the proxy endpoint will accept request messages that come from a different domain, in the context of a browser.</p>
<p><a href="#top">Back to top</a></p>




<div class = "divider1"></div>
<h3 id="h_identities">Managing Identities for an API Implementation:</h3>




<h3 id="api_impl_identities_overview">What is an implementation identity?</h3>
<!--<p>{{<span class="apidoc_red">needs editing/clarification on the below</span>}}</p>-->
<p>When securing outbound calls from the API Platform to an API proxied on the platform, an Identity is typically required in the outbound request message to the downstream API service.</p>
<p>The API Platform allows you to configure the <a href="basics_glossary.htm#gl_identity">identity</a> to be used for outbound calls to the downstream API service, in the <strong>Manage Outbound Identities</strong> page for the implementation.</p>
<p>There are two options for managing outbound identities:</p>
<ul>
	<li>Use incoming identities as outbound identities (the default).</li>
	<li>Specify outbound identities.</li>
</ul>

<p>You can specify these two identities:</p>
<ul>
	<li><strong>Source identity</strong>&#8212;You can define which identity received in the inbound message should be used in the outbound message: Consumer, End-User, Service, or another category which you can define yourself.</li>
	<li><strong>Outbound identity</strong>&#8212;You can specify the subject category of the inbound identity that will be used for the outbound identity: Consumer, End-User, or another category which you can define yourself.</li>
</ul>

<h4>Background</h4>
<p>When the API Gateway receives an incoming request, it created an exchange that governs everything that happens with the request while the Gateway is processing it. Authentication policies put an Identity <a href="basics_glossary.htm#gl_principal">Principal</a> in the exchange. Typically, in a standard configuration, there can be 0, 1, or 2 Identity Principals in the exchange.</p>
<p>The incoming message includes the Identity Principal object, which includes authentication and authorization information. The two most common Identity Principal objects are:</p>
<ul>
	<li><strong>Consumer</strong>:  Represents the consuming application.</li>
	<li><strong>End User</strong>: Represents the user of the consuming application.</li>
</ul>
<p>Those two things are represented in the Subject of the Identity Principal object.</p>
<p>By default, the Identity Principals are mapped one to one. However, in some cases, it might be a little more complex. For example, let's say the outbound request has a custom subject of <strong>AcmeID</strong>. In this case, you might need to set up the <strong>Manage Outbound Identities</strong> configuration to use the <strong>Consumer</strong> identity to populate the <strong>AcmeID</strong>.</p>

<h4>Use Cases</h4>
<p>Some implementation scenarios:</p>
<ul>
	<li>Perhaps the inbound Identity is really a service identity, but you're using HTTP Basic Auth for authentication. The default HTTP Basic Auth policy identifies an end user, so you might decide that you want to take the end-user credentials from the Consumer subject and use those for the End User object.</li>
	<li>Perhaps inbound requests to the service are not going to have any security policies, and there will be no credentials. In this case, you'll need to make sure that whenever you invoke a downstream service, you have an identity you can use. You might configure your service to use a specific consumer identity in the local domain store. In this case, the identity is static, and you specify the username and password in the implementation setup.</li>
	<li>If the API uses orchestration, you might want to do different things with Identities for different outbound invokes. You might specify default identity mapping at the implementation level, but you can also override it in the orchestration, at the point at which you invoke a physical service. Each Invoke operation offers the same UI so that you can manage the implementation identity settings and can map app identities differently for each invoke.</li>
</ul>
<p>If you need to manipulate the subjects and the principals that are present in the exchange, you can do that through scripting. For example, you can have a script in the process that adds your own static security principals to the request; or you could switch the subject of the consumer principal to be end user.</p>
<p>The most common use case is invoking a downstream service that requires an AppID specified as an HTTP Basic Auth token. In this scenario, you can add the username and password as an identity to the local domain, and then you can reference that identity as the Consumer subject, as a static identity in the outbound configuration.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_identities_settings">How do I manage my implementation identity settings?</h3>
<p>On the <strong>Manage Outbound Identities</strong> page, you can manage <a href="basics_glossary.htm#gl_identity">identity</a> settings for your implementation. You can:</p>
<ul>
	<li>Choose to use incoming identities as outbound identities (the default) or map outbound identities.</li>
	<li>Add one or more outbound identities.</li>
	<li>Choose to use the service identity for outbound HTTPS. This option configures the identity to be used when communicating over the next hop.<!-- {{<span class="apidoc_red">Clarify what this is and how it works. Noting 6/14/17 in working on ATMO-20521. Message to Barbara/Aren.</span>}}--></li>
</ul>

<h5 id="proc_impl_identity_settings_manage">To manage implementation identity settings</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation.</li>
	<li>In the <strong>Identities</strong> section of the page, click <strong>Edit</strong>.</li>
	<li>On the <strong>Manage Outbound Identities</strong> page, choose one of these options:
<ul>
      <li><strong>Use Incoming Identities as Outbound Identities</strong>: the default. You can change this setting by choosing <strong>Specify Outbound Identities</strong>.</li>
      <li><strong>Specify Outbound Identities</strong>: when you click this button, additional fields become available. Any existing identities are displayed, and you can also add a new one. See <a href="#proc_impl_identity_add">To add a new identity for an implementation</a> below.</li>
      <li><strong>Use Service Identity for Outbound HTTPS</strong>: Check the box if you want to use the service identity for outbound secure messages to the API.</li>
    </ul>
  </li>
	<li>When done, click <strong>Save</strong>.</li>
</ol>

<h5 id="proc_impl_identity_add">To add a new identity for an implementation</h5>
<ol>
	<li>Go to the <strong>Manage Outbound Identities</strong> page for your implementation (see <a href="#proc_impl_identity_settings_manage">To manage implementation identity settings</a> above).</li>
	<li>Click <strong>Specify Outbound Identities</strong>.</li>
	<li>Click <strong>Add</strong>. The <strong>Edit Outbound Identity</strong> page appears, as shown below.
  <p><img src="assets/api_impl_identities_add.jpg" alt="API Implementation identity, adding" /></p></li>
	<li>Specify options for the source identity, as needed:
    <ul>
      <li>If you choose <strong>User-Defined Category</strong>, you'll need to specify the category. Type it exactly, including capitalization.</li>
      <li>If you choose <strong>Static User</strong>, you'll need to specify the domain and the credentials (username/password).</li>
    </ul>
    </li>
  
	<li>Specify options for the outbound identity, as needed:
    <ul>
      <li>If you choose <strong>User-Defined Category</strong>, you'll need to specify the category. Type it exactly, including capitalization.</li>
    </ul>
  </li>
	<li>Click <strong>Finish</strong>. The new identity is displayed in the <strong>Manage Outbound Identities</strong> page.</li>
	<li>Click <strong>Save</strong>. The changes are saved, and the Identities summary on the <strong>Implementation Details</strong> page is updated based on your changes.</li>
</ol>
<p><a href="#top">Back to top</a></p>




<div class = "divider1"></div>
<h3 id="h_keys_certificates">Managing Keys and Certificates for an API Implementation:</h3>




<h3 id="api_impl_keys_certs">How do I manage keys and certificates for my API?</h3>
<h5 class="stamp">API Platform Version: 8.2 and later</h5>
<p>When you upload a private key and certificate for an API implementation, the key and certificate pair can be used for encrypting content for the API implementation through mechanisms such as:</p>
<ul>
	<li> WS-Security encryption (see the specification at: <a href="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/ws-securitypolicy-1.2-spec-os.html" target="_blank">http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/ws-securitypolicy-1.2-spec-os.html</a>)</li>
	<li>JSON Web Encryption (see <a href="http://docs.akana.com/ag/policies/policy_op_jose_security.htm" target="_blank">Using the JOSE Security Policy</a>)</li>
	<li>HTTPS (see <a href="#api_impl_sni">How do I set up my API to support SNI?</a>)</li>
</ul>
<p>You can manage trusted keys and certificates separately for each implementation, including uploading new certificates, uploading trusted certificates, downloading existing certificates, and assigning aliases.</p>
<p>The key is unique for each service identity (implementation).</p>
<p>The key/certificate must already be trusted. If it isn't yet trusted, ask the Policy Manager Admin to add it to the Trust Store. See <a href="../../ag/security_config/certificate_authority.html#proc_import_cert_key">Import X.509 CA Certificate and Private Key</a> (Policy Manager help).</p>

<h5 id="proc_impl_manage_keys_certs">To manage keys and certificates for an API implementation</h5>
<ol>
	<li>Log in to the Akana API Platform and go to the overview page for your API.</li>
	<li>From the left menu bar, choose <strong>Implementations</strong>.</li>
	<li>Click the implementation.</li>
	<li>In the <strong>Certificate</strong> section of the page, click <strong>Edit</strong>.</li>
	<li>On the <strong>Keys and Certificates</strong> page, choose one of these options:
<ul>
      <li><strong>Download</strong>: see <a href="#proc_impl_manage_keys_certs_download">To download a certificate for an implementation</a> below.</li>
      <li><strong>Upload New</strong>: see <a href="#proc_impl_manage_keys_certs_upload">To upload a new private key and certificate for an implementation</a> below.</li>
      <li><strong>Delete</strong>: to delete a certificate that's been uploaded. See <a href="#proc_impl_manage_keys_certs_delete">To delete a trusted certificate for an implementation</a> below. </li>
    </ul>
    </li>
	<li>When done, click <strong>Save</strong>.</li>
</ol>
<p><strong>Note</strong>: If you see a <strong>Certificate not trusted</strong> error message, the certificate has not yet been added to the Policy Manager Trust Store. See <a href="../../ag/security_config/certificate_authority.html#proc_import_cert_key">Import X.509 CA Certificate and Private Key</a> (Policy Manager help).</p>

<h5 id="proc_impl_manage_keys_certs_upload">To upload a new private key and certificate for an implementation</h5>
<p>Go to the <strong>Keys and Certificates</strong> section for your implementation (see <a href="#proc_impl_manage_keys_certs">To manage keys and certificates for an API implementation</a> above).</p>
<ol>
	<li>Click <strong>Upload New</strong>.</li>
	<li>In the <strong>Import Private Key + X.509 Certificate from Keystore</strong> overlay, enter the values for the new key/certificate:
    <ol>
      <li>Browse to the location of the keystore file, such as a JKS file, and upload it.</li>
      <li>In the <strong>Keystore Password</strong> field, enter the secure password for the keystore file so that the platform can read the file.</li>
      <li>Click the <strong>Load Aliases</strong> button. The platform reads the file and displays a list of one or more key aliases for you to choose from.</li>
      <li>In the <strong>Key Alias</strong> field, choose the alias you want to use.</li>
      <li>In the <strong>Key Password</strong> field, enter the secure password for the specific key.  </li>
    </ol>
  </li>
	<li>Click <strong>Finish</strong>. The certificate details are displayed on the Implementation page, in the <strong>Certificate</strong> section. An example is shown below.
<p><img src="assets/api_impl_cert.jpg" alt="Certificate details for an implementation" /></p>
  </li>
</ol>

<h5 id="proc_impl_manage_keys_certs_download">To download a certificate for an implementation</h5>
<ol>
	<li>Go to the Keys and Certificates for your implementation (see <a href="#proc_impl_manage_keys_certs">To manage keys and certificates for an API implementation</a> above). The existing certificate is displayed. An example is shown below.
  <p><img src="assets/api_impl_keys_certs.jpg" alt="Keys and Certificates page" /></p>
  </li>
	<li>Click <strong>Download</strong>.</li>
	<li>Choose to open or save the certificate file.</li>
</ol>

<h5 id="proc_impl_manage_keys_certs_delete">To delete a trusted certificate for an implementation</h5>
<ol>
	<li>Go to the Keys and Certificates for your implementation (see <a href="#proc_impl_manage_keys_certs">To manage keys and certificates for an API implementation</a> above).</li>
	<li>Click <strong>Delete</strong>.</li>
	<li>At the prompt, click <strong>OK</strong> to confirm the deletion.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h3 id="platform_sni">How does the platform support SNI?</h3>
<h5 class="stamp">API Platform Version: 8.2 and later</h5>
<p>When API transactions are sent to the Network Director using HTTPS, typically the Network Director uses the key and presents the certificate uploaded as part of the HTTPS <a href="basics_glossary.htm#gl_listener">listener</a> configuration. In order to support different certificates based on the virtual host of an API, Server Name Indication (<a href="basics_glossary.htm#gl_sni">SNI</a>) can be used. In this scenario, the key and certificate uploaded for an API can be used to negotiate with clients by specifying the virtual host of the API instead of the listener's key and certificate as part of the SNI extension.</p>
<p>If you want to use an API-specific security key/certificate, you'll need to:</p>
<ol>
	<li>Create the key and certificate, which must meet certain conditions (see below).</li>
	<li>Upload the key and certificate to the platform.</li>
	<li>In the implementation, designate that you want to use the API-specific key and certificate.</li>
</ol>
<p>For details, see <a href="#api_impl_sni">How do I set up my API to support SNI?</a> below.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="api_impl_sni">How do I set up my API to support SNI?</h3>
<h5 class="stamp">API Platform Version: 8.2 and later</h5>
<p>The API platform's support of <a href="basics_glossary.htm#gl_sni">SNI</a> means that multiple keys/certificates can be used for one HTTPS endpoint. You can have individual identity keys/certificates per API implementation. Each implementation can use its own key/certificate for its own clients.</p>
<p>To use SNI, the deployment zone must support HTTPS, and you must complete these steps:</p>
<ol>
	<li>When you create your key/certificate externally, make sure the subject common name (CN) field in the certificate matches the virtual host.
    <p><strong>Note</strong>: the platform also supports the use of subject alternate names in the certificate. If you're using a subject alternate name, the same constraint applies; the CN field must match the virtual host name.</p></li>
	<li>Upload the certificate to the API implementation. This is set up on the implementation page, in the Certificates section. See <a href="#proc_impl_manage_keys_certs_upload">To upload a new private key and certificate for an implementation</a>.</li>
	<li>In the implementation page, in the HTTPS tab for the deployment, check the <strong>Use Implementation's Key/Certificate for SSL</strong> option. See <a href="#proc_impl_dz_edit">To edit an API's deployment zone assignment for a specific implementation</a>.</li>
</ol>
<p>Once these settings are in place, the platform uses the appropriate certificate based on the requested hostname.</p>
<p><a href="#top">Back to top</a></p>



<div class = "divider1"></div>



<h3 id="related_topics">Related Topics</h3>
<table width="98%" border="0" cellspacing="0" cellpadding="2" class="doctable">
  <tr>
    <td width="33%"><ul>
  <li><a href="apiadmin_getting_started.htm">Getting Started for API Developers</a></li>
  <li><a href="apiadmin_overview.htm">API Administration: Overview</a></li>
  <li><a href="api_admin_tutorial.htm">Tutorial (API Provider)</a></li>
  <li><a href="api_admin_management.htm">API Admin Management</a></li>
  <li><a href="bus_api_admin_forum.htm">Forum Moderation</a></li>
  <li><a href="apiadmin_promotion.htm">Promoting an API</a></li>
    </ul>
</td>
    <td width="33%"><ul>
  <li><a href="apiadmin_api_add.htm">Adding an API</a></li>
  <li><a href="apiadmin_api_design.htm">Add or Modify an API Using API Designer</a></li>
  <li><a href="api_admin_testing_tc.htm">API Testing with Test Client</a></li>
  <li><a href="api_admin_managing_contracts.htm">Managing Contracts for your API</a></li>
  <li><a href="api_admin_monitoring.htm">Monitoring API Analytics</a></li>
    </ul></td>
    <td width="33%"><ul>
  <li><a href="api_admin_api_publishing.htm">API Visibility, Licenses, and Settings</a></li>
  <li><a href="api_admin_oauth_support.htm">OAuth Support</a></li>
  <li><a href="api_admin_content_guidelines.htm">Content Development Guidelines</a></li>
  <li><a href="api_admin_documentation_maintenance.htm">API Documentation Maintenance</a></li>
  <li><a href="api_admin_documentation_tagging.htm">API Documentation Tagging</a></li>
  <li><a href="api_admin_legal_agreement_maintenance.htm">Legal Agreement Maintenance</a></li>
  <li><a href="basics_glossary.htm">Glossary of Terms</a></li>
    </ul>
</td>
  </tr>
</table>


