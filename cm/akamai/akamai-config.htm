---
layout: page
title: Configuring Akamai with Akana's API Platform
description: detailed steps on how to configure an Akamai property
product: cm
category: ref	
sub-nav-class: Configuring Akamai
weight: 4
type: page
nav-title: Akamai
---
<h1 id="top">Configuring Akamai with Akana's API Platform</h1>
<p>This document will walk you through setting up all the rules, and the fields within each rule for configuring Akamai with Akana's Enterprise API Platform. Fields that deviate from the default input are in <strong>Bold type.</strong></p>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#prerequisite">Prerequisite</a></li>
	<li><a href="#property_create_new">Creating new Properties</a></li>
	<li><a href="#property_create_new_portal">Creating a new Property for the Portal</a></li>
	<li><a href="#property_create_new_api">Creating a new Property for the API</a></li>
	<li><a href="#add_rule">Add rule for Advanced Metadata</a></li>
</ol>
<hr class="divide_hr" />



<h2 id="prerequisite">Prerequisite</h2>
<p>This document assumes that you have an Akamai account and know how to use their system. </p>



<h2 id="property_create_new">Creating new Properties</h2>
<p>You need to create two properties:</p>
<ul>
	<li>One for the portal - (typically with an origin in the *.eap.soa.com or *.apiportal.akana.com domains). See <a href="#property_create_new_portal">Creating a new Property for the Portal</a> below.</li>
	<li>One for the APIs - (typically with an origin in the *.broker.soa.com or *.gateway.akana.com domains). See <a href="#property_create_new_api">Creating a new Property for the API</a> below.</li>
</ul>
<p class="Note"><strong>Note</strong>: Do not use the Luna Property Manager Assistant.</p>



<h2 id="property_create_new_portal">Creating a new Property for the Portal</h2>


<h3>Default Rule Settings</h3>
<p>In the <strong>Property Version Information</strong> section, check the Security Options: <strong>Secure (Customer Certificate)</strong>.</p>
<table class="doctable">
	<thead>
	<tr>
		<th>Origin Server</th>
		<th>Input</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Origin Type</td>
		<td>Your Origin</td>
	</tr>
	<tr>
		<td>Origin Server Hostname</td>
		<td>[Your issued domain here]</td>
	</tr>
	<tr>
		<td>Forward Host Header</td>
		<td>Incoming Host Header
Cache Key</td>
	</tr>
	<tr>
		<td>Hostname</td>
		<td>Incoming Host Header</td>
	</tr>
	<tr>
		<td>Supports Gzip Compression</td>
		<td>Yes</td>
	</tr>
	<tr>
		<td>Send True Client IP Header</td>
		<td>Yes</td>
	</tr>
	<tr>
		<td>True Client IP Header Name</td>
		<td>True-Client-IP</td>
	</tr>
	<tr>
		<td>Allow clients To Set True Client IP Header</td>
		<td>Yes</td>
	</tr>
</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Origin SSL Certificate Verification</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Verification Settings</td>
			<td><strong>Choose Your Own (Recommended)</strong></td>
		</tr>
		<tr>
			<td>Match CN/SAN To</td>
			<td><pre>{Forward Host Header}; <strong>*.eap.soa.com;</strong> {Origin Hostname}</pre></td>
		</tr>
		<tr>
			<td>Trust</td>
			<td>Akamai-managed Certificate Authorities Sets</td>
		</tr>
		<tr>
			<td>Akamai-managed Certificate Authority Sets</td>
			<td>Akamai Certificate Store</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Ports</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>HTTP Port</td>
			<td>80</td>
		</tr>
		<tr>
			<td>HTTPS Port</td>
			<td>443</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Caching</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Caching option</td>
			<td>No Store</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>SureRoute</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Enable</td>
			<td>On</td>
		</tr>
		<tr>
			<td>Optimization Type</td>
			<td>Performance</td>
		</tr>
		<tr>
			<td>SureRoute Test Object</td>
			<td><strong>sureroute/sureroute-test-object.html</strong></td>
		</tr>
		<tr>
			<td>Forward HOST Header</td>
			<td>Same as incoming Host header</td>
		</tr>
		<tr>
			<td>Cache Life for Race Results</td>
			<td>30 minutes</td>
		</tr>
		<tr>
			<td>Force SSL Protocol for Races</td>
			<td>Off</td>
		</tr>
		<tr>
			<td>Race Result Key</td>
			<td>Race Destination (default)</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Tiered Distribution</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Enable</td>
			<td>On</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Prefetch Objects</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Enable</td>
			<td>On</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Allow POST</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Behavior</td>
			<td>Allow</td>
		</tr>
		<tr>
			<td>Allow without Content-Length</td>
			<td><strong>Allow</strong></td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Allow DELETE</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td> </td>
			<td>Allow</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Allow PUT</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td> </td>
			<td>Allow</td>
		</tr>
	</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<h3>Content Compression Settings</h3>
<p>On the left side click on <strong>Content Compression</strong> and input the following:</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Content Compression</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Criteria</td>
			<td>Match All</td>
		</tr>
		<tr>
			<td>IF</td>
			<td>Content Type</td>
		</tr>
		<tr>
			<td>is one of</td>
			<td>text/html*; text/css*; application/x-javascript*; application/json; text/javascript</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Behaviors</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Last Mile Acceleration (GZIP Compression)</td>
			<td> </td>
		</tr>
		<tr>
			<td>Compress Response</td>
			<td>Always</td>
		</tr>
	</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<h3>Static Content Settings</h3>
<p>On the side, click <strong>Static Content</strong> and enter the following: </p>
<table class="doctable">
	<thead>
		<tr>
			<th>Static Content</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Criteria</td>
			<td>Match Any</td>
		</tr>
		<tr>
			<td>IF</td>
			<td>File Extension</td>
		</tr>
		<tr>
			<td>Is one of</td>
			<td>aif; aiff; au; avi; bin; bmp; cab; carb; cct; cdf;  class; css; doc; dcr; dtd; exe; flv; gcf; gff; gif; grv; hdml; hqx; ico; ini; jpeg; jpg; js; mov; mp3; nc; pct; pdf; png; ppc; pws; swa; swf; txt; vbs; w32; wav; wbmp; wml; wmlc; wmls; wmlsc; xsd; zip; properties; html; htm; json</td>
		</tr>
	</tbody>
</table>
<p>OR </p>
<table class="doctable">
	<tbody>
		<tr>
			<td>Path matches one of</td>
			<td>&#160;</td>
		</tr>
	</tbody>
</table>


<h3>Behaviors</h3>
<table class="doctable">
	<thead>
		<tr>
			<th>Caching</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Caching Option</td>
			<td><strong>Honor Origin Cache Control and Expires</strong></td>
		</tr>
		<tr>
			<td>Force Revalidation of Stale Objects</td>
			<td>Serve stale if unable to validate</td>
		</tr>
		<tr>
			<td>Default Max-age</td>
			<td>7 Days</td>
		</tr>
		<tr>
			<td>Prefetch Objects Enable</td>
			<td>Off</td>
		</tr>
	</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<h3>Dynamic Content settings</h3>
<table class="doctable">
	<thead>
		<tr>
			<th>Dynamic Content</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Criteria</td>
			<td>Match All
				IF</td>
		</tr>
		<tr>
			<td>&quot;Response cacheability&quot; &quot;is not&quot; &quot;cacheable&quot;</td>
			<td>&#160;</td>
		</tr>
	</tbody>
</table>
<h3>Behaviors</h3>
<table class="doctable">
	<thead>
		<tr>
			<th>Downstream Cacheability</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Caching option</td>
			<td>Pass cacheability headers from origin</td>
		</tr>
	</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<h3>Add rule to Redirect to HTTPS</h3>
<p>Click the <strong>Add Rule</strong> button and choose <strong>Redirect to HTTPS</strong> to enter the parameters for this rule.</p>
<p>Redirect to the same URL on HTTPS protocol, issuing a 301 response code (Moved Permanently). You may change the response code to 302 if needed. </p>
<table class="doctable">
	<thead>
		<tr>
			<th>Redirect to HTTPS</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Criteria</td>
			<td>Match All</td>
		</tr>
		<tr>
			<td>IF</td>
			<td>Request Protocol - HTTP</td>
		</tr>
	</tbody>
</table>


<h3>Behaviors</h3>
<table class="doctable">
	<thead>
		<tr>
			<th>Redirect</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Redirect Type</td>
			<td>Default
Destination Protocol</td>
		</tr>
		<tr>
			<td>HTTPS
Destination Hostname</td>
			<td>Same as request
Destination Path</td>
		</tr>
		<tr>
			<td>Same as request
Include Query String </td>
			<td>Yes</td>
		</tr>
		<tr>
			<td>Redirect Status Code</td>
			<td>301 Moved Permanently</td>
		</tr>
	</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<h3>Add rule for Advanced Metadata</h3>
<table class="doctable">
	<thead>
		<tr>
			<th>Advanced Metadata</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Criteria</td>
			<td>Match All</td>
		</tr>
	</tbody>
</table>


<h3>Behaviors</h3>
<table class="doctable">
	<thead>
		<tr>
			<th>Advanced</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Advanced XML</td>
			<td>&lt;edgeservices:enable-chunked-post&gt; on &lt;/edgeservices:enable-chunked-post&gt;</td>
		</tr>
	</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<h2 id="property_create_new_api">Creating a new Property for API</h2>


<h3>Default Rule Settings</h3>
<table class="doctable">
	<thead>
		<tr>
			<th>Origin Server</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Origin Type</td>
			<td>Your Origin</td>
		</tr>
		<tr>
			<td>Origin Server Hostname</td>
			<td>[Your issued domain here]</td>
		</tr>
		<tr>
			<td>Forward Host Header</td>
			<td>Incoming Host Header</td>
		</tr>
		<tr>
			<td>Cache Key Hostname</td>
			<td><strong>Incoming Host Header</strong></td>
		</tr>
		<tr>
			<td>Supports Gzip Compression</td>
			<td>Yes</td>
		</tr>
		<tr>
			<td>Send True Client IP Header</td>
			<td><strong>Yes</strong></td>
		</tr>
		<tr>
			<td>True Client IP Header Name</td>
			<td>True-Client-IP</td>
		</tr>
		<tr>
			<td>Allow clients To Set True Client IP Header</td>
			<td>Yes</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Origin SSL Certificate Verification</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Verification Settings</td>
			<td><strong>Choose Your Own (Recommended)</strong></td>
		</tr>
		<tr>
			<td>Match CN/SAN To</td>
			<td><pre>{Forward Host Header}; <strong>*.broker.soa.com;</strong> {Origin Hostname}</pre></td>
		</tr>
		<tr>
			<td>Trust</td>
			<td>Specific Certificates (pinning)</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Specific Certificates (pinning)</th>
			<th>Input</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Common Name</td>
			<td>Exp. Date</td>
			<td>SHA-1 Fingerprint</td>
		</tr>
		<tr>
			<td>*.broker.soa.com</td>
			<td>August 1 2016</td>
			<td>dba2e24c8a3742ecdeccb3dfae65667db8ae5b4c</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Ports</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>HTTP Port</td>
			<td>80</td>
		</tr>
		<tr>
			<td>HTTPS Port</td>
			<td>443</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Caching</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Caching option</td>
			<td>Bypass Cache</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>SureRoute</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Enable</td>
			<td>On</td>
		</tr>
		<tr>
			<td>Optimization Type</td>
			<td>Performance</td>
		</tr>
		<tr>
			<td>SureRoute Test Object</td>
			<td><strong>sureroute/sureroute-test-object.html</strong></td>
		</tr>
		<tr>
			<td>Forward HOST Header</td>
			<td>Same as incoming Host header</td>
		</tr>
		<tr>
			<td>Cache Life for Race Results</td>
			<td>30 minutes</td>
		</tr>
		<tr>
			<td>Force SSL Protocol for Races</td>
			<td>Off</td>
		</tr>
		<tr>
			<td>Race Result Key</td>
			<td>Race Destination (default)</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Allow POST</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Behavior</td>
			<td>Allow</td>
		</tr>
		<tr>
			<td>Allow without Content-Length</td>
			<td><strong>Allow</strong></td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Allow DELETE</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td> </td>
			<td>Allow</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Allow PUT</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td> </td>
			<td>Allow</td>
		</tr>
	</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<h3>Content Compression Settings</h3>
<table class="doctable">
	<thead>
		<tr>
			<th>Content Compression</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Criteria</td>
			<td>Match All</td>
		</tr>
		<tr>
			<td>IF</td>
			<td>Content Type</td>
		</tr>
		<tr>
			<td>is one of</td>
			<td>text/html; text/css; application/x-javascript;</td>
		</tr>
	</tbody>
</table>
<p>&#160;</p>
<table class="doctable">
	<thead>
		<tr>
			<th>Behaviors</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Last Mile Acceleration (GZIP Compression)</td>
			<td> </td>
		</tr>
		<tr>
			<td>Compress Response</td>
			<td>Always</td>
		</tr>
	</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<h2 id="add_rule">Add rule for Advanced Metadata</h2>
<table class="doctable">
	<thead>
		<tr>
			<th>Advanced Metadata</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Criteria</td>
			<td>Match All</td>
		</tr>
	</tbody>
</table>


<h3>Behaviors</h3>
<table class="doctable">
	<thead>
		<tr>
			<th>Advanced</th>
			<th>Input</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Description</td>
			<td>To enable chunked POST
Advanced XML</td>
		</tr>
		<tr>
			<td>&#160;</td>
			<td>&lt;edgeservices:enable-chunked-post&gt; on &lt;/edgeservices:enable-chunked-post&gt;</td>
		</tr>
	</tbody>
</table>