---
layout: page
title: Performing Policy Manager / Envision Integration Installation
description: Learn how to perform the Policy Manager / Envision integration installation. 
product: ev
category: gs
weight: 03
sub-nav-class: Installation
type: page
nav-title: Policy Manager / Envision Integration Installation
---
<h1 id="top">Policy Manager / Envision Integrated Installation</h1>
<p>Learn how to install Envision with Policy Manager and Network Director.</p>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>


<h4 style="color: gray;"><a href="#h_install_procedure_new">Installation Procedure: New installation</a></h4>
<ul class="table_of_contents">
	<li><a href="#introduction">Introduction</a></li>
	<li><a href="#reference_documentation">Reference Documentation</a></li>
	<li><a href="#h_setup_mongodb">Set up MongoDB</a>
		<ul>
	<li><a href="#s01_download_and_install_mongodb">Step 1: Download and Install MongoDB</a></li>
	<li><a href="#s02_create_mongodb_data_folder">Step 2: Create MongoDB Data Folder</a></li>
	<li><a href="#s03_start_mongodb">Step 3: Start MongoDB</a></li>
	<li><a href="#s04_database_and_container_shutdown_procedure">Step 4: Database and Container Shutdown Procedure</a></li>
</ul>
</li>
	<li><a href="#h_install_akana_platform">Install Akana Platform</a>
<ul>
	<li><a href="#s01_install_akana_platform">Step 1: Install Akana Platform</a></li>
</ul>
</li>
	<li><a href="#h_configure_ev">Install and Configure Envision</a>
<ul>
	<li><a href="#s01_download_ev_zip_file">Step 1: Download Envision ZIP File</a></li>
	<li><a href="#s02_install_ev_zip_file">Step 2: Install Envision ZIP File</a></li>
	<li><a href="#s03_configure_ev_container">Step 3: Configure Envision Container</a></li>
	<li><a href="#s04_install_and_configure_ev_feature">Step 4: Install and Configure Envision Feature</a></li>
	<li><a href="#s05_install_and_configure_sample_data_sets">Step 5: Install and Configure Sample Datasets</a></li>
</ul>
</li>
	<li><a href="#h_configure_aap">Install and Configure Akana API Platform (for Policy Manager)</a>
<ul>
	<li><a href="#s01_download_aap_zip_file">Step 1: Download Akana API Platform ZIP File</a></li>
	<li><a href="#s02_install_aap_zip_file">Step 2: Install Akana API Platform ZIP File</a></li>
	<li><a href="#s03_configure_pm_container">Step 3: Configure Policy Manager Container</a></li>
	<li><a href="#s04_install_and_configure_pm_services_and_console_features">Step 4: Install and Configure Policy Manager Services and Console Features</a></li>
	<li><a href="#s05_install_ev_console_extensions_plug_in">Step 5: Install Envision Console Extensions Plug-in</a></li>
</ul>
</li>
	<li><a href="#h_configure_nd">Configure Network Director</a>
<ul>
	<li><a href="#s01_create_nd_container">Step 1: Create Network Director Container</a></li>
	<li><a href="#s02_install_nd_feature">Step 2: Install the Network Director Feature</a></li>
	<li><a href="#s03_configure_nd">Step 3: Configure Network Director</a></li>
	<li><a href="#s04_install_ev_metrics_collector_plug_in">Step 4: Install the Envision Metrics Collector Plug-in</a></li>
	<li><a href="#s05_modify_usage_writer_properties">Step 5: Modify Usage Writer Properties</a></li>
	<li><a href="#s06_register_nd_container">Step 6: Register Network Director Container</a></li>
	<li><a href="#s07_host_virtual_services_in_nd_container">Step 7: Host Virtual Services in Network Director Container</a></li>
</ul>
</li>
	<li><a href="#h_launch_ev_console">Launch Envision Console</a>
<ul>
	<li><a href="#s01_launch_ev_console">Step 1: Launch Envision Console</a></li>
	<li><a href="#s02_review_ev_reference_guide">Step 2: Review Envision Reference Guide</a></li>
</ul>
</li>
</ul>
<hr class="divide_hr" />



<h4 style="color: gray;"><a href="#h_install_procedure_existing">Installation Procedure: Adding Envision to an existing installation</a></h4>



<ul class="table_of_contents">
	<li><a href="#existing_prerequisites">Prerequisites</a></li>
	<li><a href="#existing_steps">Existing Policy Manager installation: Steps for installing Envision</a></li>
</ul>



<h4 style="color: gray;"><a href="#h_install_tasks_reference">Installation Tasks/Reference:</a></h4>



<ul class="table_of_contents">
	<li><a href="#database_and_container_shutdown">Database and Container Shutdown Procedure</a></li>
	<li><a href="#ca_configure_ev_timezone">Configuration Action: Configure Envision Time Zone</a></li>
</ul>




<hr class="divide_hr" />
<h2 id="h_install_procedure_new">Installation Procedure: Completely new installation</h2>




<h2 id="introduction">Introduction</h2>
<p>Integrating Policy Manager with the Envision 1.2 analytics and monitoring solution allows you to take advantage of the Policy Manager policies related to business metrics. These policies are plug-in extensions to the Policy Manager Management Console, and provide support for capturing business metrics data (that is, usage data and logs for a selected dataset). This data is then fed into the Envision product and can be used to generate statistical reports about API/service usage. </p>
<p>The integration requires:</p>
<ol>
	<li>Installation and setup of a MongoDB database.</li>
	<li>Installation of the Akana Platform.</li>
	<li>Installation of the corresponding version (same release number) of the PM Analytics Plugin.</li>
	<li>Installation Akana API Platform and configuration of Policy Manager and Network Director.</li>
	<li>Installation and configuration of the Envision feature using the <strong>Akana Administration Console</strong>.</li>
</ol>
<p>In this installation scenario, you'll configure three container instances:</p>
<ul>
	<li>Envision</li>
	<li>Policy Manager</li>
	<li>Network Director</li>
</ul>
<p>Each container instance must have a unique port number.</p>
<p>You have the option to use a different container configuration scenario based on your requirements. </p>
<p><a href="#top">Back to top</a></p>



<h2 id="reference_documentation">Reference Documentation</h2>
<p>For detailed  instructions of common tasks, refer to the reference topics below.</p>

<h4>Containers:</h4>
<ul>
	<li><a href="../../sp/container_management/configure_standalone_container.htm">Configure Standalone Container</a></li>
	<li><a href="../../sp/container_management/container_management.htm#deployment">Container Deployment Options</a></li>
	<li><a href="../../sp/container_management/start_stop_container_instance.htm">Starting and Stopping a Container Instance</a> </li>
</ul>

<h4 id="ref_doc_pm">Policy Manager:</h4>
<ul>
	<li><a href="../../sp/admin_console/using_pmservices_feature.htm">Policy Manager Services Feature</a></li>
	<li><a href="../../sp/admin_console/using_pmconsole_feature.htm">Policy Manager Console Feature</a></li>
</ul>

<h4 id="ref_doc_nd">Network Director:</h4>
<ul>
	<li><a href="../../sp/admin_console/using_network_director_feature.htm">Using the Network Director Feature</a></li>
</ul>
<p><a href="#top">Back to top</a></p>




<hr class="divide_hr" />



<h2 id="h_setup_mongodb">Set up MongoDB</h2>




<h2 id="s01_download_and_install_mongodb">Step 1: Download and Install MongoDB</h2>
<ol>
	<li>Go to http://www.mongodb.org/downloads and download the MongoDB file for your platform. Windows 64-bit (MSI), Linux 64-bit (TGZ), and Solaris 64-bit (TGZ) are supported. If you are on a Mac, you can install Mongo with homebrew using <strong>brew install mongo</strong>.</li>
	<li>Install MongoDB on your platform.</li>
</ol>
<p class="Note"><strong>Note</strong>: these instructions provide a basic MongoDB installation approach. For information on installation instructions and shutdown procedures for your specific deployment, refer to the MongoDB documentation, available at <a href="https://docs.mongodb.com/" title="Link to MongoDB website" target="_blank">https://docs.mongodb.com</a>.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="s02_create_mongodb_data_folder">Step 2: Create MongoDB Data Folder</h2>
<ol>
	<li>Create a MongoDB data folder. The default is <strong>/data/db</strong>. If you prefer to use a different location, use <strong>--dbpath</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s03_start_mongodb">Step 3: Start MongoDB</h2>
<ol>
	<li>Navigate to the MongoDB installation directory: for example, <strong>/MongoDB/3.6/bin</strong>.</li>
	<li>Enter <strong>mongod</strong>.</li>
	<li>If MongoDB successfully starts, your command window displays <strong>waiting for connections</strong> followed by the port number.</li>
</ol>
<p><strong>Note (Linux only)</strong>: Once you've started MongoDB, you might need to run the <strong>fork</strong> command to keep it running in the background while you complete the other installation steps. <strong>logpath</strong> sets the path for the log. For example: <strong>mongod -fork -logpath /opt/mongodb/mongod.log</strong>.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="s04_database_and_container_shutdown_procedure">Step 4: Database and Container Shutdown Procedure</h2>
<p>When shutting down your Envision system, it's important to shut down the Envision container and the MongoDB database in the following sequence to avoid data loss and/or the requirement of performing data repair.</p>
<ol>
	<li>First, shut down the container. Refer to <a href="../../sp/container_management/start_stop_container_instance.htm">Starting and Stopping a Container Instance</a> for shutdown options.</li>
	<li>Then, shut down the MongoDB container. For information on installation instructions and shutdown procedures for your specific deployment, refer to the MongoDB documentation, available at <a href="https://docs.mongodb.com/" title="Link to MongoDB website" target="_blank">https://docs.mongodb.com/</a>.</li>
</ol>
<p><a href="#top">Back to top</a></p>




<hr class="divide_hr" />
<h2 id="h_install_akana_platform">Install Akana Platform</h2>




<h2 id="s01_install_akana_platform">Step 1: Install Akana Platform</h2>
<p>Envision and Policy Manager must both be installed to the Akana Platform.</p>
<p>For detailed instructions, refer to the installation instructions corresponding to your Akana Platform version. Go to <a href="../../sp/platform_install/installing_akana_api_platform_all.htm">Installing the Akana API Platform (all versions)</a> and choose the applicable version.</p>
<p>If the Akana Platform is already installed, skip to the next step.</p>
<p><a href="#top">Back to top</a></p>




<hr class="divide_hr" />
<h2 id="h_configure_ev">Install and Configure Envision</h2>




<h2 id="s01_download_ev_zip_file">Step 1: Download Envision ZIP File</h2>
<p>The Envision ZIP file must be installed to the Akana Platform. Download the Envision self-extracting ZIP file from the Rogue Wave Support Center. </p>
<p>For instructions, see <a href="installing_envision.htm#ev_install_files">Installation files</a> (Envision installation doc).</p>
<p><a href="#top">Back to top</a></p>



<h2 id="s02_install_ev_zip_file">Step 2: Install Envision ZIP File</h2>
<ol>
	<li>Extract the Envision ZIP file to a subfolder within the Akana platform folder: for example, <strong>aap84/envision</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s03_configure_ev_container">Step 3: Configure Envision Container</h2>
<p>The Envision feature is typically installed into a Standalone container.</p>
<ol>
	<li>Launch the <strong>Configure Container Instance Wizard</strong>. Navigate to the Platform release directory (\<strong>{release_directory}\bin</strong>) and start the container, using one of the following:
		<ul>
			<li>Windows: <strong>startup.bat configurator</strong></li>
			<li>UNIX: <strong>startup.sh configurator</strong></li>
		</ul>
	</li>
	<li>Select the <strong>Standalone Deployment</strong> option and complete the configuration.</li>
</ol>
<p>For detailed instructions, see <a href="../../sp/container_management/configure_standalone_container.htm">Configure Standalone Container</a>. For a complete list of options, see <a href="../../sp/container_management/container_management.htm#deployment">Container Deployment Options</a>.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="s04_install_and_configure_ev_feature">Step 4: Install and Configure Envision Feature</h2>
<ol>
	<li>Launch the <strong>Akana Administration Console</strong> (http://{hostname}:{port}/admin/).</li>
	<li>Select the <strong>Repository</strong> tab and click <strong>Refresh</strong>. The Akana Envision Repository is displayed.</li>
	<li>On the <strong>Available Features</strong> screen, from the <strong>Filter</strong> menu at the top left, select <strong>Feature</strong>.</li>
	<li>Select the <strong>Akana Envision</strong> feature and then click <strong>Install Feature</strong>.</li>
	<li>After the installation is complete, click <strong>Configure</strong> and continue.</li>
	<li>On the <strong>Configure MongoDB Database</strong> screen, in the <strong>MongoClientURI</strong> field, specify the host name and port where the MongoDB database is installed. The default MongoDB port is <strong>27017</strong>.</li>
	<li>Click <strong>Finish</strong>. The URI is assigned, and the system automatically configures seed data and adds schemas. </li>
	<li>Click <strong>Cancel</strong> on the container restart message, then click <strong>Close</strong> on the summary screen and continue to the next step.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s05_install_and_configure_sample_data_sets">Step 5: Install and Configure Sample Datasets</h2>
<p>Install the <strong>Akana Sample Datasets for Demo Charts</strong> plug-in. For instructions, see <a href="installing_envision.htm#in_ev_install_configure_sample_data_sets">Step 5: Install and Configure Sample Datasets</a> in the Envision installation documentation.</p>
<ol>
	<li>On the <strong>Available Features</strong> screen, from the <strong>Filter</strong> menu at the top left, select <strong>Plug-ins</strong>.</li>
	<li>Select the <strong>Akana Sample Datasets for Demo Charts</strong> plug-in, and click <strong>Install Feature</strong>.</li>
	<li>After installation is complete, click <strong>Configure</strong> and continue.</li>
	<li>On the <strong>Configure Sample Datasets</strong> screen, select the checkbox for each dataset you want to install.</li>
	<li>Click <strong>Finish</strong>, and then click <strong>OK</strong> to restart the container.</li>
	<li>When the restart is complete, click <strong>Close</strong>.</li>
</ol>
<p><strong>Note:</strong> After the installation is compete, you can manage (install / uninstall) datasets via the <strong>Configuration</strong> tab by selecting <strong>Configure Sample Datasets</strong>.</p>
<p>The next step is to install and configure Policy Manager.</p>
<p><a href="#top">Back to top</a></p>




<hr class="divide_hr" />
<h2 id="h_configure_aap">Install and Configure Akana API Platform (for Policy Manager)</h2>




<h2 id="s01_download_aap_zip_file">Step 1: Download Akana API Platform ZIP File</h2>
<p>The Akana API Platform ZIP file contains all necessary files for Akana API Platform installation, including Policy Manager and Community Manager installation.</p>
<ol>
	<li>Log in to the Rogue Wave Support Center (<a href="https://library.roguewave.com" target="_blank">https://library.roguewave.com</a>).</li>
	<li>In the <strong>My Resources section</strong>, click <strong>Product Downloads</strong>, and then click <strong>Akana - Product Downloads</strong>.</li>
	<li>Click the link for the version you're installing.</li>
	<li>Download the Akana API Platform GA ZIP file.</li>
</ol>



<h2 id="s02_install_aap_zip_file">Step 2: Install Akana API Platform ZIP File</h2>
<ol>
	<li>Extract the Akana API Platform ZIP file to the Akana platform folder. </li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s03_configure_pm_container">Step 3: Configure Policy Manager Container</h2>
<ol>
	<li>Launch the <strong>Configure Container Instance Wizard</strong>. Navigate to the Akana Platform release directory (\<strong>{release_directory}\bin</strong>) and start the container, using one of the following:
		<ul>
			<li>Windows: <strong>startup.bat configurator</strong></li>
			<li>UNIX: <strong>startup.sh configurator</strong></li>
		</ul>
	</li>
	<li>Select the <strong>Standalone Deployment</strong> option and complete the configuration.</li>
</ol>
<p>For detailed instructions, see <a href="../../sp/container_management/configure_standalone_container.htm">Configure Standalone Container</a>. For a complete list of options, see <a href="../../sp/container_management/container_management.htm#deployment">Container Deployment Options</a>.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="s04_install_and_configure_pm_services_and_console_features">Step 4: Install and Configure Policy Manager Services and Console Features</h2>
<ol>
	<li>On the <strong>Available Features</strong> page, select the following features:
		<ul>
			<li>Policy Manager Services</li>
			<li>Policy Manager Console</li>
		</ul>
		</li>
	<li>Click <strong>Install Features</strong>. </li>
	<li>Complete the installation and configuration. For detailed instructions on installing these features, refer to the <a href="#ref_doc_pm">Reference Documentation for Policy Manager</a>.</li>
	<li>On the container restart message, click <strong>Cancel</strong>, and then, on the summary screen, click <strong>Close</strong>.</li>
	<li>Continue to the next step.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s05_install_ev_console_extensions_plug_in">Step 5: Install Envision Console Extensions Plug-in</h2>
<ol>
	<li>On the <strong>Available Features</strong> screen, from the <strong>Filter</strong> menu at the top left, select <strong>Plug-ins</strong>.</li>
	<li>Select the <strong>Envision Console Extensions</strong> plug-in and click <strong>Install Feature</strong>. Note that this feature also installs the Envision Service Extensions Feature. </li>
	<li>After the installation is complete, click <strong>Configure</strong> and continue.</li>
	<li>On the <strong>Configure MongoDB Database</strong> screen, in the <strong>MongoClientURI</strong> field, specify the host name and port where the MongoDB database is installed. The default MongoDB port is 27017.</li>
	<li>Click <strong>Finish</strong>. The URI is assigned, and the system automatically configures seed data and adds schemas. </li>
	<li>After the installation is complete, Click <strong>Finish</strong>, and then click <strong>OK</strong> to restart the container. </li>
	<li>When the restart is complete, click <strong>Close</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="h_configure_nd">Configure Network Director</h2>
<p>For detailed instructions on installing and configuring Network Director, refer to the <a href="#ref_doc_nd">Reference Documentation for Network Director</a>.</p>
<p>Because this is a custom configuration, note that you must add <a href="#s04_install_ev_metrics_collector_plug_in">Step 4: Install the Envision Metrics Collector Plug-in</a> and <a href="#s05_modify_usage_writer_properties">Step 5: Modify Usage Writer Properties</a> to your configuration sequence. </p>
<p><a href="#top">Back to top</a></p>



<h2 id="s01_create_nd_container">Step 1: Create Network Director Container</h2>
<ol>
	<li>Launch the <strong>Configure Container Instance Wizard</strong>. Navigate to the Platform release directory (\<strong>{release_directory}\bin</strong>) and start the container, using one of the following:
		<ul>
			<li>Windows: <strong>startup.bat configurator</strong></li>
			<li>UNIX: <strong>startup.sh configurator</strong></li>
		</ul>
	</li>
	<li>Select the <strong>Standalone Deployment</strong> option and complete the configuration.</li>
</ol>
<p>For detailed instructions, see <a href="../../sp/container_management/configure_standalone_container.htm">Configure Standalone Container</a>. For a complete list of options, see <a href="../../sp/container_management/container_management.htm#deployment">Container Deployment Options</a>.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="s02_install_nd_feature">Step 2: Install the Network Director Feature</h2>
<ol>
	<li>Launch the <strong>Akana Administration Console</strong> (http://{hostname}:{port}/admin/).</li>
	<li>On the <strong>Installed Features</strong> screen, select the <strong>Network Director</strong> feature and click <strong>Install Feature</strong>.</li>
	<li>After the installation is complete, click <strong>Configure</strong> and continue to the next step. </li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s03_configure_nd">Step 3: Configure Network Director</h2>
<ol>
	<li>As part of the Network Director configuration, specify the WS-MetadataExchange URL and configure keys. The <strong>Generate PKI Keys &amp; X.509 Certificate</strong> option is the most commonly used default option.</li>
	<li>Click <strong>Finish</strong>.</li>
	<li>Click <strong>Cancel</strong> on the container restart message, then click <strong>Close</strong> on the summary screen and continue to the next step.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s04_install_ev_metrics_collector_plug_in">Step 4: Install the Envision Metrics Collector Plug-in</h2>
<p><strong>Note:</strong> If the <strong>Network Director</strong> feature is installed directly to the Policy Manager container, skip this step. The <strong>Envision Metrics Collector</strong> feature is installed as part of the <strong>Envision Policy Manager Console Extensions</strong> features that is installed as part of the Policy Manager container configuration. </p>
<ol>
	<li>On the <strong>Available Features</strong> screen, from the <strong>Filter</strong> menu at the top left, select <strong>Plug-ins</strong>.</li>
	<li>Select the <strong>Envision Metrics Collector Feature</strong> plug-in and click <strong>Install Feature</strong>.</li>
	<li>After the installation is complete, click <strong>Cancel</strong> on the container restart message, then click <strong>Close</strong> on the summary screen and continue to the next step.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s05_modify_usage_writer_properties">Step 5: Modify Usage Writer Properties</h2>
<ol>
	<li>Click the <strong>Configuration</strong> tab.</li>
	<li>In the <strong>Configuration Categories</strong> section, navigate to the <strong>com.soa.monitor.usage</strong> configuration category.</li>
	<li>Set the <strong>usage.local.writer.enabled</strong> property to <strong>false</strong>.</li>
	<li>Set the <strong>usage.remote.writer.enabled</strong> property to <strong>true</strong>.</li>
	<li>Click <strong>Apply Changes.</strong></li>
	<li>Restart the container.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s06_register_nd_container">Step 6: Register Network Director Container</h2>
<ol>
	<li>Log in to the <strong>Policy Manager Management Console</strong> (http://{hostname}:{port}/ms/index.do/), and navigate to <strong>Organization</strong> &gt; <strong>Containers</strong>. </li>
	<li>On the <strong>Containers Summary</strong> screen, click <strong>Add Container</strong>. </li>
	<li>Specify the container type, container metadata, add metadata certificate to trusted CA (if applicable), and container details.</li>
	<li>Complete your entries and click <strong>Finish</strong>.</li>
	<li>Click <strong>Close</strong>. The <strong>Container Details</strong> page for the Network Director is displayed.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="s07_host_virtual_services_in_nd_container">Step 7: Host Virtual Services in Network Director Container</h2>
<ol>
	<li>Navigate to <strong>Containers</strong> &gt; <strong>Hosted Services</strong> and then click <strong>Host Virtual Service</strong>. </li>
	<li>On the <strong>Select Virtual Service</strong> screen, select a virtual service from the Organization tree, and map one or more bindings from the selected virtual service to the access points of the current container. </li>
</ol>
<p><a href="#top">Back to top</a></p>




<hr class="divide_hr" />
<h2 id="h_launch_ev_console">Launch Envision Console</h2>




<h2 id="s01_launch_ev_console">Step 1: Launch Envision Console</h2>
<ol>
	<li>
Log in to the Envision Console using the username and password you defined for your Envision container: <strong>http://{hostname}:{port}/analytics/login</strong>.</li>
	<li>Click the <strong>Dashboards</strong> tab, and then select a dashboard from the drop-down menu. an example is shown below.
		<p><img src="images/sample_dataset_dashboard.jpg" alt="Envision" title="Envision Dashboard" /></p>
	</li>
	</ol>
<p class="Note"><strong>Note</strong>: If you do not see the datasets, and/or have problems logging in to the <strong>Envision Console</strong>, restart the Envision container and refer to <a href="#s03_start_mongodb">Step 3: Start MongoDB</a> for instructions on how to start MongoDB.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="s02_review_ev_reference_guide">Step 2: Review Envision Reference Guide</h2>
<p>To learn about Envision functionality and how to configure various monitoring scenarios, refer to <a href="../envision_reference/env_toc.htm">Envision Reference</a>. </p>
<p><a href="#top">Back to top</a></p>




<hr class="divide_hr" />
<h2 id="h_install_procedure_existing">Installation Procedure: Adding Envision to an existing installation</h2>




<h2 id="existing_prerequisites">Prerequisites</h2>
<p>You'll need the following:</p>
<p>Akana Policy Manager/Envision ZIP files. For example:</p>
<ul>
	<li>akana-pm-envision-8.0.219.zip</li>
	<li>akana-envision-1.2.2470.zip</li>
</ul>
<p>MongoDB (for example, MongoDB Community 3.6)</p>



<h2 id="existing_steps">Existing Policy Manager installation: Steps for installing Envision</h2>
<p>The steps below assume an existing installation with the <strong>Akana MongoDB Support</strong> plugin enabled for all Akana containers.</p>
<p>These steps are for manual installation of the Envision feature. If you want to use the automation script to enable this feature, please consult with your Akana Professional Services representative.</p>
<ol>
	<li>Unzip akana-pm-envision-8.0.219.zip and akana-envision-1.2.2470.zip to Akana installation folder for all Akana instances. For example: /opt/akana_sw/sm8.</li>
	<li>Choose one Policy Manager container for installation of Envision. It must be installed directly on one of the PM containers.</li>
	<li>Restart the designated Policy Manager container.</li>
	<li>After restart, you'll see the following Envision features in the Akana Administration Console for the container:
		<ul>
			<li>Akana Envision Metrics Collector</li>
			<li>Akana Envision</li>
			<li>Akana Envision Policy Manager Service Extensions</li>
			<li>Akana Envision Policy Manager Console Extensions</li>
			<li>Akana Policy Manager Analytics Security Provider</li>
			<li>Akana Sample Datasets for Demo Charts</li>
		</ul>
	</li>
	<li>Install all the features above and then restart the container.</li>
	<li>Repeat steps 3 through 5 above for the other Policy Manager containers. However, on these Policy Manager containers, after the first, you'll need to install only the following features:
		<ul>
			<li>Akana Envision Metrics Collector</li>
			<li>Akana Envision Policy Manager Service Extensions</li>
			<li>Akana Envision Policy Manager Console Extensions</li>
		</ul>
	</li>
	<li>Repeat steps 3 through 5 above for all other containers, such as Community Manager or Network Director containers. For non-PM containers, install <strong>only</strong> the following feature:
		<ul>
			<li>Akana Envision Metrics Collector</li>
		</ul>
	</li>
	<li>Log in to the Envision portal running on http://{PM/Envision URL}/analytics.</li>
</ol>
<p>Data aggregation for Envision requires PM rollup time zone to match Envision time zone setting. See below screenshot for reference.</p>




<hr class="divide_hr" />
<h2 id="h_install_tasks_reference">Installation Tasks/Reference:</h2>




<h2 id="database_and_container_shutdown">Database and Container Shutdown Procedure</h2>
<p>When shutting down your Envision system, it's important to shut down the Envision container, and MongoDB database in the following sequence to avoid data loss and/or the requirement of performing data repair.</p>
<ol>
	<li>First, shut down the container. Refer to <a href="../../sp/container_management/start_stop_container_instance.htm">Starting and Stopping a Container Instance</a> for shutdown options.</li>
	<li>Then, shut down the MongoDB container. For information on installation instructions and shutdown procedures for your specific deployment, refer to the MongoDB documentation, available at <a href="https://docs.mongodb.com/" title="Link to MongoDB website" target="_blank">https://docs.mongodb.com/</a>.</li>
</ol>
<p><a href="#top">Back to top</a></p>




<h2 id="ca_configure_ev_timezone">Configuration Action: Configure Envision Time Zone</h2>
<p>Data aggregation for Envision requires that you set up a Policy Manager rollup time zone to match the Envision time zone setting. When Envision retrieves data for a chart, it selects only records that match exactly the time zone set in this configuration action. If the Envision time zone isn't set, or is set incorrectly, charts might include data for an incorrect time period, or might not show any data at all, because of time zone differences.</p>
<p><img src="images/ca_configure_ev_timezone.jpg" alt="Configuring the global time zone for rollups" /></p>
<p>Set the <strong>Default Time Zone</strong>, <strong>Rollup Time Zone</strong>, and <strong>Time Zone Alias</strong>, as needed.</p>
<p><a href="#top">Back to top</a></p>