---
layout: page
title: Performing Policy Manager / Envision Integration Installation
description: Learn how to perform the Policy Manager / Envision integration installation. 
product: ev
category: gs
weight: 7
sub-nav-class: Installation
type: page
nav-title: Performing Policy Manager / Envision Integration Installation
---
<h2 id="top">Performing Policy Manager / Envision Integration Installation</h2>
<p>Learn how to perform the Policy Manager / Envision integration installation.</p>
<p><a href="../envision_install/installing_ev_features.html" class="button secondary">Installing Envision Features (Main Topic)</a> <a href="../envision_reference/env_toc.html" class="button secondary">Envision Reference</a></p>
<h5 class="stamp">Supported Platforms: 8.0, 8.1</h5> <h5 class="stamp">Supported Envision Versions: 1.1</h5>



<h3 style="color: gray;">Table of Contents</h3>



<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#reference_documentation">Reference Documentation</a></li>
  <li>
<a href="#h_setup_mongodb">Set up MongoDB</a>
<ul>
  <li><a href="#01_download_and_install_mongodb">Step 1: Download and Install MongoDB</a></li>
  <li><a href="#02_create_mongodb_data_folder">Step 2: Create MongoDB Data Folder</a></li>
  <li><a href="#03_start_mongodb">Step 3: Start MongoDB</a></li>
  <li><a href="#04_database_and_container_shutdown_procedure">Step 4: Database and Container Shutdown Procedure</a></li>
</ul>
</li>
  <li>
<a href="#h_install_akana_platform">Install Akana Platform</a>
<ul>
  <li><a href="#01_install_akana_platform">Step 1: Install Akana Platform</a></li>
</ul>
</li>
  <li>
<a href="#h_configure_ev">Configure Envision</a>
<ul>
  <li><a href="#01_download_ev_zip_file">Step 1: Download Envision ZIP File</a></li>
  <li><a href="#02_install_ev_zip_file">Step 2: Install Envision ZIP File</a></li>
  <li><a href="#03_configure_ev_container">Step 3: Configure Envision Container</a></li>
  <li><a href="#04_install_and_configure_ev_feature">Step 4: Install and Configure Envision Feature</a></li>
  <li><a href="#05_install_and_configure_sample_data_sets">Step 5: Install and Configure Sample Data Sets</a></li>
</ul>
</li>
  <li>
<a href="#h_configure_pm">Configure Policy Manager</a>
<ul>
  <li><a href="#01_download_pm_zip_file">Step 1: Download Policy Manager ZIP File</a></li>
  <li><a href="#02_install_pm_zip_file">Step 2: Install Policy Manager ZIP file</a></li>
  <li><a href="#03_configure_pm_container">Step 3: Configure Policy Manager Container</a></li>
  <li><a href="#04_install_and_configure_pm_services_and_console_features">Step 4: Install and Configure Policy Manager Services and Console Features</a></li>
  <li><a href="#05_install_ev_console_extensions_plug_in">Step 5: Install Envision Console Extensions Plug-in</a></li>
</ul>
</li>
  <li>
<a href="#h_configure_nd">Configure Network Director</a>
<ul>
  <li><a href="#01_create_nd_container">Step 1: Create Network Director Container</a></li>
  <li><a href="#02_install_nd_feature">Step 2: Install Network Director Feature</a></li>
  <li><a href="#03_configure_nd">Step 3: Configure Network Director</a></li>
  <li><a href="#04_install_ev_metrics_collector_plug_in">Step 4: Install Envision Metrics Collector Plug-in</a></li>
  <li><a href="#05_modify_usage_writer_properties">Step 5: Modify Usage Writer Properties</a></li>
  <li><a href="#06_register_nd_container">Step 6: Register Network Director Container</a></li>
  <li><a href="#07_host_virtual_services_in_nd_container">Step 7: Host Virtual Services in Network Director Container</a></li>

</ul>
</li>
  <li>
<a href="#h_launch_ev_console">Launch Envision Console</a>
<ul>
  <li><a href="#01_launch_ev_console">Step 1: Launch Envision Console</a></li>
  <li><a href="#02_review_ev_reference_guide">Step 2: Review Envision Reference Guide</a></li>
</ul>
</li>
</ul>
<div class = "divider1"></div>



<a name="introduction"></a><h3>Introduction</h3>
<p>Integrating Policy Manager with the Envision 1.1 analytics and monitoring solution allows you to take advantage of the Policy Manager business metrics related policies. These policies are plug-in extensions to the Policy Manager Management Console and provide support for capturing business metrics data (that is, usage data and logs for a selected data set). This data is then fed into the Envision product and can be used to generate statistical reports about API/service usage. </p>
<ul>
  <li>The integration requires the installation of MongoDB, the Akana Platform, and Policy Manager and Envision Products. </li>
  <li>The presented installation requires you to configure three container instances (Envision, Policy Manager, and Network Director). </li>
  <li>Each container instance requires a unique port number.</li>
  <li>You have the option to use a different container configuration scenario based on your requirements. </li>
</ul>
<p><a href="#top">back to top</a></p>



<a name="reference_documentation"></a><h3>Reference Documentation</h3>
<p>Detailed instructions of common tasks are available in expanded reference documentation as follows:</p>
<h5>Containers:</h5>
<ul>
  <li><a href="../../../sp/container_management/configure_standalone_container.htm">Configure Standalone Container</a></li>
  <li><a href="../../../sp/container_management/container_management.htm#deployment">Container Deployment Options</a></li>
  <li><a href="../../../sp/container_management/start_stop_container_instance.htm">Starting and Stopping a Container Instance</a> </li>
</ul>
<h5>Envision:</h5>
<ul>
  <li><a href="http://docs.akana.com/ev/envision_install/installing_ev_features.html">Installing Envision Features</a></li>
</ul>
<h5>Policy Manager:</h5>
<ul>
  <li><a href="http://docs.akana.com/sp/admin_console/using_pmservices_feature.htm">Policy Manager Services Feature</a></li>
  <li><a href="http://docs.akana.com/sp/admin_console/using_pmconsole_feature.htm">Policy Manager Console Feature</a></li>
</ul>
<h5>Network Director:</h5>
<ul>
  <li><a href="http://docs.akana.com/sp/admin_console/using_nd_feature.htm">Using Network Director Feature</a></li>
</ul>
<p><a href="#top">back to top</a></p>




<div class = "divider1"></div>
<a name="h_setup_mongodb"></a><h3>Set up MongoDB</h3>




<a name="01_download_and_install_mongodb"></a><h3>Step 1: Download and Install MongoDB</h3>
<ol>
  
  <li>Go to http://www.mongodb.org/downloads and download the MongoDB Version 3.2 file {<span class="apidoc_red">Tim/Dawn/Matthew: is there a more specific point version we say we support?</span>} for your platform. Windows 64-bit (MSI), Linux 64-bit (TGZ), and Solaris 64-bit (TGZ) are supported. If you are on a Mac, you can install Mongo with homebrew using <strong>brew install mongo</strong>.</li>
  <li>Install MongoDB on your platform.</li>
</ol>
<p><strong>Note</strong>: these instructions provide a basic MongoDB installation approach. For information on installation instructions and shutdown procedures for your specific deployment, refer to the MongoDB documentation at this URL: <a href="https://docs.mongodb.org/v3.2/tutorial/manage-mongodb-processes" title="Mongo DB documentation link" target="_blank">https://docs.mongodb.org/v3.2/tutorial/manage-mongodb-processes</a>.</p>



<a name="02_create_mongodb_data_folder"></a><h3>Step 2: Create MongoDB Data Folder</h3>
<ol>
  <li>Create a MongoDB data folder. The default is <strong>/data/db</strong>. If you prefer to use a different location, use <strong>--dbpath</strong>.</li>
</ol>



<a name="03_start_mongodb"></a><h3>Step 3: Start MongoDB</h3>
<ol>
  <li>Navigate to the MongoDB installation directory: for example, <strong>/MongoDB/3.2/bin</strong>.</li>
  <li>Enter <strong>mongod</strong>.</li>
  <li>If MongoDB successfully starts, your command window displays <strong>waiting for connections</strong> followed by the port number.</li>
</ol>
<p><strong>Note (Linux only)</strong>: Once you've started MongoDB, you might need to run the <strong>fork</strong> command to keep it running in the background while you complete the other installation steps. <strong>logpath</strong> sets the path for the log. For example: <strong>mongod -fork -logpath /opt/mongodb/mongod.log</strong>.</p>



<a name="04_database_and_container_shutdown_procedure"></a><h3>Step 4: Database and Container Shutdown Procedure</h3>
<p>When shutting down your Envision system, it's important to shut down the Envision container, and MongoDB database in the following sequence to avoid data loss and/or the requirement of performing data repair.</p>
<ol>
  <li>First, shut down the container. Refer to <a href="../../../sp/container_management/start_stop_container_instance.htm">Starting and Stopping a Container Instance</a> for shutdown options.</li>
  <li>Then, shut down the MongoDB container. For information on installation instructions and shutdown procedures for your specific deployment, refer to the MongoDB documentation at this URL: <a href="https://docs.mongodb.org/v3.2/tutorial/manage-mongodb-processes" title="Mongo DB documentation link" target="_blank">https://docs.mongodb.org/v3.2/tutorial/manage-mongodb-processes</a>.</li>
</ol>
<p><a href="#top">back to top</a></p>




<div class = "divider1"></div>
<h3><a name="h_install_akana_platform"></a>Install Akana Platform</h3>




<a name="01_install_akana_platform"></a><h3>Step 1: Install Akana Platform</h3>
<p>Envision and Policy Manager must both be installed to the Akana Platform.</p>
<p>See <a href="../../sp/platform_install/installing_akana_platform.htm">Installing the Akana Platform</a> for instructions.</p>
<p><strong>If you have previously installed the Akana Platform, skip to the next step.</strong></p>
<p><a href="#top">back to top</a></p>




<div class = "divider1"></div>
<a name="h_configure_ev"></a><h3>Configure Envision</h3>




<a name="01_download_ev_zip_file"></a><h3>Step 1: Download Envision ZIP File</h3>
<p>The Envision ZIP file must be installed to the Akana Platform. Download the Envision self-extracting ZIP file from the Akana Customer Support site. </p>
<ol>
  <li>Launch www.support.akana.com.</li>
  <li>Go to <strong>Downloads</strong> &gt; <strong>Envision</strong> &gt; <strong>1.1</strong>.</li>
  <li>Download the Envision ZIP file:
  akana-envision-1.1.xxxx.zip</li>
</ol>



<a name="02_install_ev_zip_file"></a><h3>Step 2: Install Envision ZIP File</h3>
<ol>
  <li>Extract the Envision ZIP file to the Akana platform folder. </li>
</ol>



<a name="03_configure_ev_container"></a><h3>Step 3: Configure Envision Container</h3>
<p>The Envision feature is typically installed into a Standalone container.</p>
<ol>
  
  <li>Launch the <strong>Configure Container Instance Wizard</strong>. Navigate to the Platform release directory (\<strong>{release_directory}\bin</strong>) and enter:
    <ul>
      <li>startup.bat configurator (Windows)</li>
      <li>startup.sh configurator (UNIX)</li>
    </ul>
  </li>
  <li>Select the <strong>Standalone Deployment</strong> option and complete the configuration.</li>
</ol>
<p>For detailed instructions, see <a href="../../../sp/container_management/configure_standalone_container.htm">Configure Standalone Container</a>. For a complete list of options, see <a href="../../../sp/container_management/container_management.htm#deployment">Container Deployment Options</a>.</p>



<a name="04_install_and_configure_ev_feature"></a><h3>Step 4: Install and Configure Envision Feature</h3>
<ol>
  <li>Launch the <strong>Administration Console</strong> (http://hostname:port/admin/).</li>
  <li>Select the <strong>Repository</strong> tab and click the <strong>Refresh</strong> icon. The <strong>Akana Envision Repository</strong> will display. </li>
  <li>On the <strong>Available Features</strong> screen, select <strong>Feature</strong> from the <strong>Filter</strong> menu. </li>
  <li>Select the <strong>Akana Envision</strong> feature and click <strong>Install Feature</strong>.</li>
  <li>After the installation is complete, click <strong>Configure</strong> and continue.</li>
  <li>On the <strong>Configure MongoDB Database</strong> screen, specify the host name and port where the MongoDB database is installed in the MongoClientURI field. The default MongoDB port is 27017. Click <strong>Finish</strong>. The URI is assigned and the system automatically configures seed data and adds schemas. </li>
  <li>Click <strong>Cancel</strong> on the container restart message, then <strong>Close</strong> on the summary screen and continue to the next step.</li>
</ol>



<a name="05_install_and_configure_sample_data_sets"></a><h3>Step 5: Install and Configure Sample Data Sets</h3>
<ol>
  <li>On the <strong>Available Features</strong> screen, from the <strong>Filter</strong> menu, select <strong>Plug-in</strong></li>
  <li>Select the <strong>Akana Sample Data Sets for Demo Charts</strong> plug-in and click <strong>Install Feature</strong>.</li>
  <li>After the installation is complete, click <strong>Configure</strong> and continue.</li>
  <li>On the <strong>Configure Sample Data Sets</strong> screen, select the checkbox for each data set you want to install. Click <strong>Finish</strong>, and then click <strong>OK</strong> to restart the container.</li>
  <li>When restart is complete, click <strong>Close</strong>.</li>
</ol>
<p><strong>Note:</strong> After the installation is complete, you can manage (install / uninstall) data sets at the <strong>Configuration</strong> tab by selecting <strong>Configure Sample Data Sets</strong>. </p>
<p><a href="#top">back to top</a></p>




<div class = "divider1"></div>
<a name="h_configure_pm"></a><h3>Configure Policy Manager</h3>




<a name="01_download_pm_zip_file"></a><h3>Step 1: Download Policy Manager ZIP File</h3>
<p>The Policy Manager ZIP file must be installed to the Akana Platform. Download the Policy Manager self-extracting ZIP file from the Akana Customer Support site. </p>
<ol>
  <li>Launch www.support.akana.com.</li>
  <li>Go to <strong>Downloads</strong> &gt; <strong>PolicyManager</strong> &gt; <strong>8.1</strong>.</li>
  <li>Download the Policy Manager ZIP file:
 akana-pm-8.1.xxxx.zip.</li>
</ol>



<a name="02_install_pm_zip_file"></a><h3>Step 2: Install Policy Manager ZIP File</h3>
<ol>
  <li>Extract the Policy Manager ZIP file to the Akana platform folder. </li>
</ol>



<a name="03_configure_pm_container"></a><h3>Step 3: Configure Policy Manager Container</h3>
<ol>
  
  <li>Launch the <strong>Configure Container Instance Wizard</strong>. Navigate to the Platform release directory (\<strong>{release_directory}\bin</strong>) and enter:
    <ul>
      <li>Windows: <strong>startup.bat configurator</strong></li>
      <li>UNIZ: <strong>startup.sh configurator</strong></li>
    </ul>
  </li>
  <li>Select the <strong>Standalone Deployment</strong> option and complete the configuration.</li>
</ol>
<p>For detailed instructions, see <a href="../../../sp/container_management/configure_standalone_container.htm">Configure Standalone Container</a>. For a complete list of options, see <a href="../../../sp/container_management/container_management.htm#deployment">Container Deployment Options</a>.</p>



<a name="04_install_and_configure_pm_services_and_console_features"></a><h3>Step 4: Install and Configure Policy Manager Services and Console Features</h3>
<ol>
  <li>On the <strong>Available Features</strong> screen, select the <strong>Policy Manager Services</strong> and <strong>Policy Manager Console</strong> features, and then click <strong>Install Features</strong>. </li>
  <li>Complete the installation and configuration. For detailed instructions on installing these features, refer to the <a href="#reference_documentation">Reference Documentation</a>.</li>
  <li>On the container restart message, click <strong>Cancel</strong>, and then, on the summary screen, click&nbsp; <strong>Close</strong>. Continue to the next step.</li>
</ol>



<a name="05_install_ev_console_extensions_plug_in"></a><h3>Step 5: Install Envision Console Extensions Plug-in</h3>
<ol>
  <li>On the <strong>Available Features</strong> screen, select <strong>Plug-ins</strong> from the <strong>Filter</strong> menu. </li>
  <li>Select the <strong>Envision Console Extensions</strong> plug-in and click <strong>Install Feature</strong>. Note that this feature also installs the Envision Service Extensions Feature. </li>
  <li>After the installation is complete, click <strong>Configure</strong> and continue.</li>
  <li>On the <strong>Configure MongoDB Database</strong> screen, specify the host name and port where the MongoDB database is installed in the MongoClientURI field. The default MongoDB port is 27017. Click <strong>Finish</strong>. The URI is assigned and the system automatically configures seed data and adds schemas. </li>
  <li>After the installation is complete, Click <strong>Finish</strong>, and then click <strong>OK</strong> to restart the container. Click <strong>Close</strong> on the summary screen after the container restart is completed. </li>
</ol>
<p><a href="#top">back to top</a></p>



<a name="h_configure_nd"></a><h3>Configure Network Director</h3>
<p>You have the option of using the Network Director detailed instructions to complete Network Director configuration see <a href="#reference_documentation">Reference Documentation</a>. </p>
<p>Because this is a custom configuration, note that you must add <a href="#04_install_ev_metrics_collector_plug_in">Step 4: Install Envision Metrics Collector Plug-in</a> and <a href="#05_modify_usage_writer_properties">Step 5: Modify Usage Writer Properties</a> to your configuration sequence. </p>



<a name="01_create_nd_container"></a><h3>Step 1: Create Network Director Container</h3>
<ol>
  <li>Launch the <strong>Configure Container Instance Wizard</strong>. Navigate to the Platform release directory (\<strong>{release_directory}\bin</strong>) and enter:
    <ul>
      <li>startup.bat configurator (Windows)</li>
      <li>startup.sh configurator (UNIX)</li>
    </ul>
  </li>
  <li>Select the <strong>Standalone Deployment</strong> option and complete the configuration.</li>
</ol>
<p>For detailed instructions, see <a href="../../../sp/container_management/configure_standalone_container.htm">Configure Standalone Container</a>. For a complete list of options, see <a href="../../../sp/container_management/container_management.htm#deployment">Container Deployment Options</a>.</p>



<a name="02_install_nd_feature"></a><h3>Step 2: Install Network Director Feature</h3>
<ol>
  <li>Launch the Administration Console (http://hostname:port/admin/).</li>
  <li>On the <strong>Installed Features</strong> screen, select the <strong>Network Director</strong> feature and click <strong>Install Feature</strong>.</li>
  <li>After the installation is complete, click <strong>Configure</strong> and continue to the next step. </li>
</ol>



<a name="03_configure_nd"></a><h3>Step 3: Configure Network Director</h3>
<ol>
  <li>Specify WS-MetadataExchange URL, configure keys. The Generate PKI Keys &amp; X.509 Certificate option is the most commonly used default option.</li>
  <li>Click <strong>Finish</strong>, then <strong>Cancel</strong> on the container restart message, then <strong>Close</strong> on the summary screen and continue to the next step.</li>
</ol>



<a name="04_install_ev_metrics_collector_plug_in"></a><h3>Step 4: Install Envision Metrics Collector Plug-in</h3>
<p><strong>Note:</strong> If the <strong>Network Director</strong> feature is installed directly to the Policy Manager container, skip this step. The <strong>Envision Metrics Collector</strong> feature is installed as part of the <strong>Envision Policy Manager Console Extensions</strong> features that is installed as part of the Policy Manager container configuration. </p>
<ol>
  <li>On the <strong>Available Features</strong> screen, select <strong>Plug-ins</strong> from the <strong>Filter</strong> menu. </li>
  <li>Select the <strong>Envision Metrics Collector Feature</strong> plug-in and click <strong>Install Feature</strong>.</li>
  <li>After the installation is complete, click <strong>Cancel</strong> on the container restart message, then <strong>Close</strong> on the summary screen and continue to the next step.</li>
</ol>



<a name="05_modify_usage_writer_properties"></a><h3>Step 5: Modify Usage Writer Properties</h3>
<ol>
  <li>Click the <strong>Configuration</strong> tab.</li>
  <li>In the <strong>Configuration Categories</strong> section, navigate to the <strong>com.soa.monitor.usage</strong> configuration category.</li>
  <li>Set <strong>usage.local.writer.enabled</strong> to <strong>false</strong>.</li>
  <li>Set <strong>usage.remote.writer.enabled</strong> to <strong>true</strong>.</li>
  <li>Click <strong>Apply Changes</strong>, then restart the container.</li>
</ol>



<a name="06_register_nd_container"></a><h3>Step 6: Register Network Director Container</h3>
<ol>
  <li>Log into the <strong>Policy Manager Management Console</strong> (http://hostname:port/ms/index.do/), and navigate to <strong>Organization &gt; Containers</strong>. </li>
  <li>On the <strong>Containers Summary</strong> screen click <strong>Add Container</strong>. </li>
  <li>Specify the container type, container metadata, add metadata certificate to trusted CA (if applicable), and container details.</li>
  <li>Complete your entries and click <strong>Finish</strong>, then <strong>Close</strong>. The <strong>Container Details</strong> page for the Network Director displays. </li>
</ol>



<a name="07_host_virtual_services_in_nd_container"></a><h3>Step 7: Host Virtual Services in Network Director Container</h3>
<ol>
  <li>Navigate to <strong>Containers &gt; Hosted Services</strong> and click <strong>Host Virtual Service</strong>. </li>
  <li>On the <strong>Select Virtual Service</strong> screen, select a virtual service from the Organization tree, and map one or more bindings from the selected virtual service to the access points of the current container. </li>
</ol>
<p><a href="#top">back to top</a></p>




<div class = "divider1"></div>
<a name="h_launch_ev_console"></a><h3>Launch Envision Console</h3>




<a name="01_launch_ev_console"></a><h3>Step 1: Launch Envision Console</h3>
<ol>
  <li>
Enter the following URL to launch the <strong>Envision Console</strong>.
http://hostname:port/analytics/login
</li>
  <li>Log into the <strong>Envision Console</strong> using the Username/Password you defined for your Envision container, then click the <strong>Dashboards</strong> tab, and select a dashboard from the drop-down menu., as shown below.
<p><img src="images/sample_dataset_dashboard.jpg" alt="Envision" title="Envision Dashboard" /></p></li>
  <li>If you do not see the data sets and/or have problems logging into the <strong>Envision Console</strong>, restart the Envision container and refer to <a href="#03_start_mongodb">Step 3: Start MongoDB</a> for instructions on how to start MongoDB.</li>
</ol>
<p><a href="#top">back to top</a></p>



<a name="02_review_ev_reference_guide"></a><h3>Step 2: Review Envision Reference Guide</h3>
<p>To learn about Envision functionality and how to configure various monitoring scenarios, refer to <a href="../envision_reference/env_toc.html">Envision Reference</a>. </p>
<p><a href="#top">back to top</a></p>