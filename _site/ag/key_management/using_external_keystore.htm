<!DOCTYPE html>
<html lang="en">
	<head>
		            <meta http-equiv="Content-type" content="text/html; charset=utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <title>Using the SOA Software External Keystore Feature</title>
            <link href="http://soa.com/css/bootstrap/bootstrap.min.css" rel="stylesheet" />
            <link rel="stylesheet" href="http://soa.com/css/compiled/bootstrap-overrides.css" type="text/css" />
            <link rel="stylesheet" type="text/css" href="http://soa.com/css/compiled/theme.css" />
            <link rel="stylesheet" href="/docs-test/style/reset.css" type="text/css">
            <link rel="stylesheet" href="/docs-test/style/base.css" type="text/css">
            <link rel="stylesheet" href="/docs-test/style/style.css" type="text/css">
            <link rel="stylesheet" href="/docs-test/style/document.css" type="text/css">
	          <link rel="stylesheet" href="/docs-test/style/pygments.css" type="text/css">

            <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700' rel='stylesheet' type='text/css'>
            <link rel="icon" type="image/png" href="http://soa.com/favicon.ico">


            <!-- <link rel="stylesheet" href="/docs-test/style/site.min.css" type="text/css" media="screen" /> -->
            <!--[if lt IE 10]><link rel="stylesheet" href="style/ie.css" type="text/css"><![endif]-->
            <!--[if lt IE 9]><link rel="stylesheet" href="style/ie8.css" type="text/css"><![endif]-->
          
            <script src="/docs-test/js/soadocs.min.js"></script>

            <script type="text/javascript">

              var _gaq = _gaq || [];
              _gaq.push(['_setAccount', 'UA-333097-1']);
              _gaq.push(['_trackPageview']);

              (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
              })();
            </script>
            <script type="text/javascript">
              adroll_adv_id = "DV6Z3DM2IVAT5P6URKK3RO";
              adroll_pix_id = "WORRISBFGNASNPUS72EOCQ";
              (function () {
              var oldonload = window.onload;
              window.onload = function(){
                 __adroll_loaded=true;
                 var scr = document.createElement("script");
                 var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
                 scr.setAttribute('async', 'true');
                 scr.type = "text/javascript";
                 scr.src = host + "/j/roundtrip.js";
                 ((document.getElementsByTagName('head') || [null])[0] ||
                  document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
                 if(oldonload){oldonload()}};
              }());
            </script>


		<!-- filtered pages for product and category list script -->
<script>
	
	var unsorted_pages_prod_cat = { p: 'ag', c: 'learn', pages: [ 
		{ t: 'Auditing Activity', nt: '', w: '9', ty: 'page', u: '/ag/dp_policies/auditing_activity.htm', d: 'Functional overview of the DataPower Orchestration Policy Auditing Activity.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Configuring CA SiteMinder Identity System in Policy Manager 7.x', nt: 'Configuring CA SiteMinder Identity System in Policy Manager 7.x', w: '6', ty: 'page', u: '/ag/ca_siteminder/ca_siteminder_configure_identity_system.htm', d: 'Learn how to configure a CA SiteMinder identity system in Policy Manager.', nn: '', nc: '', sn: '', sc: 'CA SiteMinder'} , { t: 'Implement CA SiteMinder Use Cases', nt: 'Implement CA SiteMinder Use Cases', w: '6', ty: 'page', u: '/ag/ca_siteminder/ca_siteminder_implement_use_cases.htm', d: 'Learn how to use CA-SiteMinder in a variety of different usage scenarios.', nn: '', nc: '', sn: '', sc: 'CA SiteMinder'} , { t: 'Installing CA SiteMinder Option Pack', nt: 'Installing CA SiteMinder Option Pack', w: '6', ty: 'page', u: '/ag/ca_siteminder/ca_siteminder_install_option_pack.htm', d: 'Learn how to download and install CA SiteMinder Option Pack.', nn: '', nc: '', sn: '', sc: 'CA SiteMinder'} , { t: 'Installing CA-SiteMinder Web Agent on Client Machines', nt: 'Installing CA-SiteMinder Web Agent on Client Machines', w: '6', ty: 'page', u: '/ag/ca_siteminder/ca_siteminder_install_webagent_client.htm', d: '', nn: '', nc: '', sn: '', sc: 'Security'} , { t: 'Integrating CA SiteMinder with Policy Manager 7.x', nt: 'Integrating CA-SiteMinder with Policy Manager 7.x', w: '6', ty: 'page', u: '/ag/ca_siteminder/ca_siteminder_integrate_with_pm.htm', d: 'Learn how to integrate CA SiteMinder with Policy Manager and implement a configuration use case.', nn: '', nc: '', sn: '', sc: 'CA SiteMinder'} , { t: 'Managing Containers with Policy Manager 7.x', nt: 'Managing Containers', w: '6', ty: 'page', u: '/ag/admin_console/container_management.htm', d: 'Description of policy editor functions and tools for managing policy definitions.', nn: '', nc: '', sn: '', sc: 'Administration'} , { t: 'CORS Policy Use Cases for Policy Manager 7.x', nt: 'CORS Policy Use Cases', w: '6', ty: 'pdf', u: '/ag/policies/cors_policy_use_cases.html', d: 'Usage Scenarios for the CORS Policy', nn: '', nc: '', sn: '', sc: 'Security'} , { t: 'Policy Manager for IBM WebSphere DataPower Policies', nt: 'Policy Manager for IBM WebSphere DataPower Policies', w: '7', ty: 'page', u: '/ag/dp_policies/datapower_policies.htm', d: 'Secure and monitor a service running on DataPower using DataPower policies.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Dynamic User-Defined DataPower Policy Activity', nt: 'Dynamic User-Defined DataPower Policy Activity', w: '9', ty: 'page', u: '/ag/dp_policies/dynamic_user_defined_dp_policy_activity.htm', d: 'Functional overview of the DataPower Orchestration Policy Dynamic User-Defined DataPower Activity.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'How to Generate CSV Responses', nt: 'Generate CSV Response', w: '4', ty: 'page', u: '/ag/howto_generate_csv.html', d: 'A how to guide for providing a specific CSV response for a message', nn: '', nc: '', sn: '', sc: 'Mediation'} , { t: 'How to Generate a JSONP Response', nt: 'Generate JSONP Response', w: '4', ty: 'page', u: '/ag/howto_generate_jsonp.html', d: 'A how to guide for mediating responses to JSONP', nn: '', nc: '', sn: '', sc: 'Mediation'} , { t: 'How to Replace Fault Messages', nt: 'Replace Fault Messages', w: '4', ty: 'page', u: '/ag/howto_replace_fault.html', d: 'A how to guide for providing custom fault content for any fault response', nn: '', nc: '', sn: '', sc: 'Mediation'} , { t: 'How to Rewrite HREFs in content', nt: 'Rewrite HREFs', w: '4', ty: 'page', u: '/ag/howto_rewrite_href.html', d: 'A tutorial on how to rewrite hrefs in response content with Javascript Policies', nn: '', nc: '', sn: '', sc: 'Mediation'} , { t: 'How to set downstream Query Params', nt: 'Add Query Params', w: '4', ty: 'page', u: '/ag/howto_set_query_params.html', d: 'A how to guide for hardcoding downstream query params for http services', nn: '', nc: '', sn: '', sc: 'Mediation'} , { t: 'Identity Categories in Policy Manager 7.x', nt: 'Identity Categories', w: '6', ty: 'page', u: '/ag/key_management/identity_categories.htm', d: 'Overview of Service, Organization, Container, and User identity categories and associated key management functions.', nn: '', nc: '', sn: '', sc: 'Security'} , { t: 'Insert XML Activity', nt: 'Insert XML Activity', w: '9', ty: 'page', u: '/ag/dp_policies/insert_xml_activity.htm', d: 'Functional overview of the DataPower Orchestration Policy Insert XML Activity.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Installing SOA Software Platform Features', nt: 'Installing SOA Software Platform Features', w: '6', ty: 'page', u: '/ag/admin_console/installing_features.htm', d: 'Learn how to install features that are part of the SOA Software Platform default installation.', nn: '', nc: '', sn: '', sc: 'Installation'} , { t: 'Installing SOA Software Platform Plug-ins', nt: 'Installing SOA Software Platform Plug-ins', w: '6', ty: 'page', u: '/ag/admin_console/installing_plugins.htm', d: 'Learn how to install plug-ins that are part of the SOA Software Platform default installation.', nn: '', nc: '', sn: '', sc: 'Installation'} , { t: 'Installing SOA Software Platform Tools', nt: 'Installing SOA Software Platform Tools', w: '6', ty: 'page', u: '/ag/admin_console/installing_tools.htm', d: 'Learn how to install tools that are part of the SOA Software Platform default installation.', nn: '', nc: '', sn: '', sc: 'Installation'} , { t: 'Invoke Service Activity', nt: 'Invoke Service Activity', w: '9', ty: 'page', u: '/ag/dp_policies/invoke_service_activity.htm', d: 'Functional overview of the DataPower Orchestration Policy Invoke Service Activity.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Enable HTTPS Access to the SOA Software Administration Console for Policy Manager 6.x/7.x', nt: 'Enable HTTPS Access to the SOA Software Administration Console', w: '6', ty: 'page', u: '/ag/technotes/kb_adminconsole_https.htm', d: 'Configure container system.properties to enable HTTPS access to the SOA Software Administration Console.', nn: '', nc: '', sn: '', sc: 'Operations'} , { t: 'Managing Keys with Policy Manager 7.x', nt: 'Managing Keys', w: '6', ty: 'page', u: '/ag/key_management/key_management.htm', d: 'Overview of key management options for service, organization, container, and user identity categories.', nn: '', nc: '', sn: '', sc: 'Security'} , { t: 'Learning about the API Gateway', nt: 'Learning', w: '5', ty: '', u: '/ag/learning.html', d: 'The API Gateway landing page', nn: 'true', nc: 'true', sn: '', sc: ''} , { t: 'Managing DataPower Orchestration Policy', nt: 'Managing DataPower Orchestration Policy', w: '8', ty: 'page', u: '/ag/dp_policies/managing_orch_policy.htm', d: 'Description of functions  and tools for managing a DataPower Orchestration Policy.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'DataPower Orchestration Policy Activities', nt: 'DataPower Orchestration Policy Activities', w: '8', ty: 'page', u: '/ag/dp_policies/orch_policy_activities.htm', d: 'Policy Activities used in a DataPower Orchestration Policy.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Deploying Policy Manager using Multiple Containers', nt: 'Deploying Policy Manager using Multiple Containers', w: '6', ty: 'page', u: '/ag/admin_console/pm_config_multi_containers.htm', d: 'Learn how to deploy Policy Manager using multiple containers for enhanced scalability.', nn: '', nc: '', sn: '', sc: 'Operations'} , { t: 'Managing Policies', nt: 'Managing Policies', w: '6', ty: 'page', u: '/ag/policies/policy_management.htm', d: 'Description of policy editor functions and tools for managing policy definitions.', nn: '', nc: '', sn: '', sc: 'Administration'} , { t: 'Managing Processes', nt: 'Managing Processes', w: '6', ty: 'page', u: '/ag/processes/process_management.htm', d: 'Description of  process editor functions and tools for managing process definitions.', nn: '', nc: '', sn: '', sc: 'Processes'} , { t: 'Schema Validation Policy Use Cases for Policy Manager 7.x', nt: 'Schema Validation Policy Use Cases', w: '6', ty: 'pdf', u: '/ag/schema_validation_use_cases.html', d: 'Usage Scenarios for the Schema Validation Policy', nn: '', nc: '', sn: '', sc: ''} , { t: 'Managing Scripts', nt: 'Managing Scripts', w: '6', ty: 'page', u: '/ag/scripts/script_management.htm', d: 'Tools for managing Script definitions', nn: '', nc: '', sn: '', sc: 'Processes'} , { t: 'Starting and Stopping an SOA Softwre Platform Container Instance', nt: 'Starting and Stopping an SOA Softwre Platform Container Instance', w: '6', ty: 'page', u: '/ag/admin_console/start_stop_container_instance.htm', d: 'Learn how to monitor the real-time state of a container.', nn: '', nc: '', sn: '', sc: 'Operations'} , { t: 'Transformation Activity', nt: 'Transformation Activity', w: '9', ty: 'page', u: '/ag/dp_policies/transformation_activity.htm', d: 'Functional overview of the DataPower Orchestration Policy Transformation Activity.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'User-Defined DataPower Policy Activity', nt: 'User-Defined DataPower Policy Activity', w: '9', ty: 'page', u: '/ag/dp_policies/user_defined_dp_policy_activity.htm', d: 'Functional overview of the User-Defined DataPower Policy Activity.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Using the SOA Software Administration Console', nt: 'Using the SOA Software Administration Console', w: '6', ty: 'page', u: '/ag/admin_console/using_admin_console.htm', d: 'Learn about administration tools used in the SOA Software Administration Console.', nn: '', nc: '', sn: '', sc: 'Administration'} , { t: 'Using the SOA Software Admin Monitoring Tool', nt: 'Using the SOA Software Admin Monitoring Tool', w: '6', ty: 'page', u: '/ag/admin_console/using_admin_monitoring_tool.htm', d: 'Learn how to monitor the real-time state of a container.', nn: '', nc: '', sn: '', sc: 'Operations'} , { t: 'Using the API Consumer Application Security Policy', nt: 'Using the API Consumer Application Security Policy', w: '11', ty: 'page', u: '/ag/cm_policies/using_api_consumer_app_sec_policy.htm', d: 'Learn how to configure authentication methods used to identify  an application that is attempting to consume an API.', nn: '', nc: '', sn: '', sc: 'Community Manager'} , { t: 'Using the API User Security Policy', nt: 'Using the API User Security Policy', w: '11', ty: 'page', u: '/ag/cm_policies/using_api_user_sec_policy.htm', d: 'Learn how the API User Security Policy is used to secure Community Manager administrator accounts.', nn: '', nc: '', sn: '', sc: 'Community Manager'} , { t: 'Using the SOA Software Cluster Support Plug-in', nt: 'Using the SOA Software Cluster Support Plug-in', w: '6', ty: 'page', u: '/ag/admin_console/using_cluster_support_plugin.htm', d: 'Learn how to manage a container as part of a cluster in Policy  Manager.', nn: '', nc: '', sn: '', sc: 'Operations'} , { t: 'Using the SOA Software Delegate Features', nt: 'Using the SOA Software Delegate Features', w: '6', ty: 'page', u: '/ag/admin_console/using_delegate_features.htm', d: 'Learn how to use an Apache Axis client solution to provide message formatting and transportation of a web service description stored in Policy Manager.', nn: '', nc: '', sn: '', sc: 'Agents'} , { t: 'Using the DataPower Contracts Policy', nt: 'Using the DataPower Contracts Policy', w: '9', ty: 'page', u: '/ag/dp_policies/using_dp_contracts_policy.htm', d: 'Learn how to use DataPower Contracts Policy to disable contracts for a given managed DataPower service in cases where contracts are not required.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Using the DataPower Custom Policy Framework', nt: 'Using the DataPower Custom Policy Framework', w: '9', ty: 'page', u: '/ag/dp_policies/using_dp_custom_policy_framework.htm', d: 'Learn how to add DataPower custom policies to change the behavior of a service at runtime.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Using the DataPower Mediation Policy', nt: 'Using the DataPower Mediation Policy', w: '9', ty: 'page', u: '/ag/dp_policies/using_dp_mediation_policy.htm', d: 'Learn how to use the DataPower Mediation Policy to specify the mediation mode used for a given managed DataPower service.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Using the DataPower Orchestration Policy', nt: 'Using the DataPower Orchestration Policy', w: '8', ty: 'page', u: '/ag/dp_policies/using_dp_orchestration_policy.htm', d: 'Learn how to sequence message flow through DataPower using the Orchestration Policy.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Using the Dynamic User-Defined DataPower Policy Component (Pipeline)', nt: 'Using the Dynamic User-Defined DataPower Policy Component (Pipeline)', w: '10', ty: 'page', u: '/ag/dp_policies/using_dynam_userdefined_dp_component_pipeline.htm', d: 'Learn how to reference  a &quot;User-Defined Category&quot; that is defined in a non-pipeline version of the Dynamic User-Defined DataPower Policy and configure policy attachments.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Using the Dynamic User-Defined DataPower Policy (Non-Pipeline)', nt: 'Using the Dynamic User-Defined DataPower Policy (Non-Pipeline)', w: '10', ty: 'page', u: '/ag/dp_policies/using_dynam_userdefined_dp_policy_nonpipeline.htm', d: 'Learn how to configure DataPower processing rules that can be referenced by the pipeline version of the Dynamic User-Defined DataPower Policy.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Using the SOA Software External Keystore Feature', nt: 'Using the SOA Software External Keystore Feature', w: '6', ty: 'page', u: '/ag/key_management/using_external_keystore.htm', d: 'Learn how to enable your own hardware security module (HSM)  as an external keystore for storing and managing Policy Manager PKI keys and certificates.', nn: '', nc: '', sn: '', sc: 'Security'} , { t: 'Using the HTTP Malicious Patterns Detection Policy in Policy Manager 7.x', nt: 'Using the HTTP Malicious Pattern Policy', w: '5', ty: 'page', u: '/ag/policies/using_http_malicious_pattern_detection_policy.htm', d: 'Learn how to use regular expressions or java markup tags in an HTTP Malicious Pattern Policy to inspect HTTP messages for malicious content.', nn: '', nc: '', sn: '', sc: 'Security'} , { t: 'Using the SOA Software Network Director Feature', nt: 'Using the SOA Software Network Director  Feature', w: '6', ty: 'page', u: '/ag/admin_console/using_network_director_feature.htm', d: 'Learn how to install and configure Network Director in Policy Manager 6.x and  7.x', nn: '', nc: '', sn: '', sc: 'Administration'} , { t: 'Using the OAuth 1.0a Trusted Token Policy', nt: 'Using the OAuth 1.0a Trusted Token Policy', w: '11', ty: 'page', u: '/ag/cm_policies/using_oauth1a_security_policy.htm', d: 'Learn how to configure the OAuth 1.0a Trusted Token Policy to enable API authorization using OAuth 1.0a.', nn: '', nc: '', sn: '', sc: 'Community Manager'} , { t: 'Using the OAuth Security Policy', nt: 'Using the OAuth Security Policy', w: '11', ty: 'page', u: '/ag/cm_policies/using_oauth_security_policy.htm', d: 'Learn how to configure the OAuth Security Policy to enable API authorization using OAuth 2.0.', nn: '', nc: '', sn: '', sc: 'Community Manager'} , { t: 'Using the Operational Script', nt: 'Using the Operational Script Policy', w: '5', ty: 'page', u: '/ag/policies/using_op_script_policy.htm', d: 'Learn how to create your own custom policy and associate it with different components of a service&#39;s definition (e.g., organizations, services, operations, bindings, and access points).', nn: '', nc: '', sn: '', sc: ''} , { t: 'Using the SOA Software Ping Support Feature', nt: 'Using the SOA Software Ping Support Feature', w: '6', ty: 'page', u: '/ag/admin_console/using_ping_support_feature.htm', d: 'Learn how to ping Network Director and Policy Manager instances to verify they are running.', nn: '', nc: '', sn: '', sc: 'Operations'} , { t: 'Using the SOA Software Policy Manager Console Feature', nt: 'Using the SOA Software Policy Manager Console Feature', w: '6', ty: 'page', u: '/ag/admin_console/using_pm_console_feature.htm', d: 'Learn how to install and configure Policy Manager Console for Policy Manager 6.x and  7.x.', nn: '', nc: '', sn: '', sc: 'Administration'} , { t: 'Using the SPNEGO Policy', nt: 'Using the SPNEGO Policy', w: '5', ty: 'page', u: '/ag/policies/using_spnego_policy.htm', d: 'Learn how to use the SPNEGO policy to authenticate a downstream service.', nn: '', nc: '', sn: '', sc: 'Security'} , { t: 'Using the CORS Policy', nt: 'Using the CORS Policy', w: '5', ty: 'page', u: '/ag/policies/using_the_cors_policy.htm', d: 'Learn how to manage cross-origin requests for REST APIs using the CORS (Cross Origin Resource Sharing) Policy.', nn: '', nc: '', sn: '', sc: 'Security'} , { t: 'Using the Cross Site Scripting Detection Policy in Policy Manager 7.x', nt: 'Using the Cross Site Scripting Policy', w: '5', ty: 'page', u: '/ag/policies/using_the_cross_site_scripting_policy.htm', d: 'Learn how configure a tag white list to protect your web service from being exploited by cross site scripting.', nn: '', nc: '', sn: '', sc: 'Security'} , { t: 'Using the HTTP Caching Policy in Policy Manager 7.x', nt: 'Using the HTTP Caching Policy', w: '5', ty: 'page', u: '/ag/policies/using_the_http_caching_policy.htm', d: 'Learn how to enhance performance of  message processing through  caching responses to previously made service requests using the HTTP Caching Policy.', nn: '', nc: '', sn: '', sc: ''} , { t: 'Using the Metrics Policy in Policy Manager 7.x', nt: 'Using the Metrics Policy', w: '5', ty: 'page', u: '/ag/policies/using_the_metrics_policy.htm', d: 'Learn how to collect rollup data on specific services/operations using a Metrics Policy.', nn: '', nc: '', sn: '', sc: 'Monitoring'} , { t: 'Using the Paging Policy', nt: 'Using the Paging Policy', w: '5', ty: 'page', u: '/ag/policies/using_the_paging_policy.htm', d: 'Learn how to configure XPath expressions in a Paging Policy to manage the paging of results in web service responses.', nn: '', nc: '', sn: '', sc: ''} , { t: 'Using the Schema Validation Policy', nt: 'Using the Schema Validation Policy', w: '5', ty: 'page', u: '/ag/policies/using_the_schema_validation_policy.htm', d: 'Learn about the Schema Validation Policy Assertion and policy configuration options.', nn: '', nc: '', sn: '', sc: ''} , { t: 'Using the WS-Schema Validation Policy', nt: 'Using the WS-Schema Validation Policy', w: '5', ty: 'page', u: '/ag/policies/using_the_ws_schema_validation_policy.htm', d: 'Learn about the WS-Schema Validation Policy Assertion and policy configuration options.', nn: '', nc: '', sn: '', sc: ''} , { t: 'Using the SOA Software Tomcat Agent Feature', nt: 'Using the SOA Software Tomcat Agent Feature', w: '6', ty: 'page', u: '/ag/admin_console/using_tomcat_agent_feature.htm', d: 'Learn how to install and configure a Tomcat Agent in Policy Manager 6.x and  7.x', nn: '', nc: '', sn: '', sc: 'Agents'} , { t: 'Using the User-Defined DataPower Component (Pipeline)', nt: 'Using the User-Defined DataPower Component (Pipeline)', w: '10', ty: 'page', u: '/ag/dp_policies/using_userdefined_dp_policy_component_pipeline.htm', d: 'Learn how to add a processing rule defined in the WebSphere DataPower Appliance to the User-Defined DataPower Component.', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Using the DataPower WTX Transformation Component (Pipeline)', nt: 'Using the DataPower WTX Transformation Component (Pipeline)', w: '10', ty: 'page', u: '/ag/dp_policies/using_wtx_transformation_component_pipeline.htm', d: 'Learn how to modify a web service message using a WTX (WebSphere Transformation Extender).', nn: '', nc: '', sn: '', sc: 'DataPower'} , { t: 'Workflow Conditions', nt: 'Workflow Conditions', w: '6', ty: 'page', u: '/ag/workflow/workflow_conditions.htm', d: 'Description of built-in workflow condition types that can be used with Policy Manager workflow.', nn: '', nc: '', sn: '', sc: 'Workflow'} , { t: 'Default Workflow', nt: 'Default Workflows', w: '6', ty: 'page', u: '/ag/workflow/workflow_default.htm', d: 'Description of Policy Manager service, contract, and policy default workflows.', nn: '', nc: '', sn: '', sc: 'Workflow'} , { t: 'Workflow Functions', nt: 'Workflow Functions', w: '6', ty: 'page', u: '/ag/workflow/workflow_functions.htm', d: 'Description of built-in Workflow Functions that can be used to perform specific actions relative to a service, contract, or policy.', nn: '', nc: '', sn: '', sc: 'Workflow'} , { t: 'Workflow Library', nt: 'Workflow Library', w: '6', ty: 'page', u: '/ag/workflow/workflow_library.htm', d: 'Learn about the workflow components used to perform service, contract, and policy management in Policy Manager.', nn: '', nc: '', sn: '', sc: 'Workflow'} , { t: 'Managing Workflow', nt: 'Managing Workflow', w: '6', ty: 'page', u: '/ag/workflow/workflow_management.htm', d: 'Description of functions and tools for managing service, contract, and policy workflow definitions.', nn: '', nc: '', sn: '', sc: 'Workflow'} , { t: 'Workflow Portlets', nt: 'Workflow Portlets', w: '6', ty: 'page', u: '/ag/workflow/workflow_portlets.htm', d: 'Description of Service, Contract, and Policy Workflow Portlets in the Policy Manager Management Console.', nn: '', nc: '', sn: '', sc: 'Workflow'} , { t: 'Workflow Reserved Actions', nt: 'Workflow Reserved Actions', w: '6', ty: 'page', u: '/ag/workflow/workflow_reserved_actions.htm', d: 'Description of reserved  states and actions  that can be defined in a workflow definition.', nn: '', nc: '', sn: '', sc: 'Workflow'} , { t: 'Workflow States', nt: 'Workflow States and Task List', w: '6', ty: 'page', u: '/ag/workflow/workflow_states_tasklist.htm', d: 'Description of special workflow state and workflow task list.', nn: '', nc: '', sn: '', sc: 'Workflow'} , { t: 'Workflow Variables', nt: 'Workflow Variables', w: '6', ty: 'page', u: '/ag/workflow/workflow_variables.htm', d: 'Description of built-in Workflow Variables that can be referenced in a Workflow Definition.', nn: '', nc: '', sn: '', sc: 'Workflow'} , { t: 'WS-Schema Validation Policy Use Cases for Policy Manager 7.x', nt: 'WS-Schema Validation Policy Use Cases', w: '6', ty: 'pdf', u: '/ag/ws_schema_validation_use_cases.html', d: 'Usage Scenarios for the WS-Schema Validation Policy', nn: '', nc: '', sn: '', sc: ''} ,  
		]};
</script>
<!-- end filtered pages for product and category list script -->
		<!-- left nav script -->
<script>
	function leftnav()
    {
        var i = 0, snClasses = [];
        var pages = unsorted_pages_prod_cat.pages.filter(function(a) {
            return (a.nn != 'true' && a.nn != 'api' && a.sc == '');
        }).sort(function CustomSort(a, b) {
            if ( ! a["w"] ) { a["w"] = 1000 ;}
            if ( ! b["w"] ) { b["w"] = 1000 ;}
            var weighta = a['w'];
            var weightb = b['w'];
            if(weighta != weightb){
                return (weighta - weightb);
            }
            else{
                return (a.nt.localeCompare(b.nt));
            }
        });
        var snpages = unsorted_pages_prod_cat.pages.filter(function(a) {
            return (a.nn != 'true' && a.nn != 'api' && a.sc != '');
        }).sort(function CustomSort(a, b) {
            if ( ! a["w"] ) { a["w"] = 1000 ;}
            if ( ! b["w"] ) { b["w"] = 1000 ;}
            var weighta = a['w'];
            var weightb = b['w'];
            if(weighta != weightb){
                return (weighta - weightb);
            }
            else{
                return (a.nt.localeCompare(b.nt));
            }
        });

        // Get the value of the sc query string (if present)
        var scParam = $.url().param('sc') || 'null';

        if (snpages.length == 0) {
            var ObjUl = $('<ul></ul>').hide();
            ObjUl.addClass("soa-ui-dc-container-main-left-nav");

            for (i = 0; i < pages.length; i++)
            {
                var Objli = $('<li></li>');
                var Obja = $('<a></a>');
                var Objp = $('<p></p>');

                Objli.attr("role", "menuitem");

                if ( pages[i].u == '/ag/key_management/using_external_keystore.htm' ) {
                    Obja.addClass("soa-ui-dc-container-main-left-nav-item-selected soa-ui-dc-container-main-left-nav-item-link");
                } else {
                    Obja.addClass("soa-ui-dc-container-main-left-nav-item-link");
                }

                if ( "/docs-test" ) {
                    Obja.attr("href", "/docs-test".concat(pages[i].u) );
                } else {
                    Obja.attr("href", pages[i].u );
                }
                if ( pages[i].ty == 'pdf' ) {
                    Obja.attr("target", "_blank");
                }
                if (pages[i].nt) {
                    Obja.html(pages[i].nt.replace("&amp;nbsp;", " "));
                } else {
                    Obja.html(pages[i].t.replace("&amp;nbsp;", " "));
                }

                Objli.addClass("soa-ui-dc-container-main-left-nav-item");
                Objli.append(Obja);

                ObjUl.append(Objli);
            }
            $('.soa-ui-dc-container-main-left').append(ObjUl);
        } else {
            for (; i < snpages.length; i++) {
                if (snClasses.indexOf(snpages[i].sc) < 0) {
                    snClasses.push(snpages[i].sc);
                }
            }
            snClasses.sort();

            var ObjUl = $('<ul></ul>').hide();
            ObjUl.addClass("soa-ui-dc-container-main-left-nav");

            // Iterate through the sub-nav-classes
            for (i = 0; i < snClasses.length; i++)
            {
                // Get the subnav for this class
                var classsnpages = snpages.filter(function(a) {
                    return (a.sc == snClasses[i]);
                });

                var ObjInnerUl = $('<ul></ul>');
                ObjInnerUl.addClass("soa-ui-dc-container-main-left-nav soa-ui-dc-container-main-left-nav-inner");
                for (j = 0; j < classsnpages.length; j++)
                {
                    var ObjInnerli = $('<li></li>');
                    var ObjInnera = $('<a></a>');
                    var ObjInnerp = $('<p></p>');

                    ObjInnerli.attr("role", "menuitem");

                    if ( classsnpages[j].u == '/ag/key_management/using_external_keystore.htm' ) {
                        ObjInnera.addClass("soa-ui-dc-container-main-left-nav-item-selected soa-ui-dc-container-main-left-nav-item-link");
                    } else {
                        ObjInnera.addClass("soa-ui-dc-container-main-left-nav-item-link");
                    }

                    if ( "/docs-test" ) {
                        ObjInnera.attr("href", "/docs-test".concat(classsnpages[j].u) );
                    } else {
                        ObjInnera.attr("href", classsnpages[j].u );
                    }
                    if ( classsnpages[j].ty == 'pdf' ) {
                        ObjInnera.attr("target", "_blank");
                    }
                    if (classsnpages[j].nt) {
                        ObjInnera.html(classsnpages[j].nt.replace("&amp;nbsp;", " "));
                    } else {
                        ObjInnera.html(classsnpages[j].t.replace("&amp;nbsp;", " "));
                    }

                    ObjInnerli.addClass("soa-ui-dc-container-main-left-nav-item");
                    ObjInnerli.append(ObjInnera);
                    ObjInnerUl.append(ObjInnerli);          
                }

                var Objli = $('<li></li>');
                var Obja = $('<a></a>');
                var Objp = $('<p></p>');

                if ( ('Security' == snClasses[i]) || (scParam == snClasses[i]) ) {
                    Objli.addClass("soa-ui-dc-container-main-left-nav-item-selected");
                }

                Obja.addClass("soa-ui-dc-container-main-left-nav-item-link");

                // Construct the URL for the subnav heading entry link
                var subnavLink = "";

                // Start with the product
                if ( "/docs-test" ) {
                    subnavLink = "/docs-test/".concat('ag');
                } else {
                    subnavLink = "/".concat('ag');
                }
                // Add the category
                switch ( 'learn' ) {
                    case "gs":
                        subnavLink += "/getting-started.html";
                        break;
                    case "learn":
                        subnavLink += "/learning.html";
                        break;
                    case "ref":
                        subnavLink += "/reference.html";
                        break;
                }
                // And put the subnav-class as a query param
                subnavLink += "?sc=" + snClasses[i];
                Obja.attr("href", subnavLink);

                Obja.html(snClasses[i]);

                Objli.addClass("soa-ui-dc-container-main-left-nav-item");

                Objli.append(Obja);

                if (classsnpages.length > 0) {
                    Objli.append(ObjInnerUl);
                }

                ObjUl.append(Objli);
            }
            // And now add the miscellaneous (uncategorized) entries
            var ObjInnerUl = $('<ul></ul>');
            ObjInnerUl.addClass("soa-ui-dc-container-main-left-nav soa-ui-dc-container-main-left-nav-inner");
            for (j = 0; j < pages.length; j++)
            {
                var ObjInnerli = $('<li></li>');
                var ObjInnera = $('<a></a>');
                var ObjInnerp = $('<p></p>');

                ObjInnerli.attr("role", "menuitem");

                if ( pages[j].u == '/ag/key_management/using_external_keystore.htm' ) {
                    ObjInnera.addClass("soa-ui-dc-container-main-left-nav-item-selected soa-ui-dc-container-main-left-nav-item-link");
                } else {
                    ObjInnera.addClass("soa-ui-dc-container-main-left-nav-item-link");
                }

                if ( "/docs-test" ) {
                    ObjInnera.attr("href", "/docs-test".concat(pages[j].u) );
                } else {
                    ObjInnera.attr("href", pages[j].u );
                }
                if ( pages[j].ty == 'pdf' ) {
                    ObjInnera.attr("target", "_blank");
                }
                if (pages[j].nt) {
                    ObjInnera.html(pages[j].nt.replace("&amp;nbsp;", " "));
                } else {
                    ObjInnera.html(pages[j].t.replace("&amp;nbsp;", " "));
                }

                ObjInnerli.addClass("soa-ui-dc-container-main-left-nav-item");
                ObjInnerli.append(ObjInnera);
                ObjInnerUl.append(ObjInnerli);          
            }

            var Objli = $('<li></li>');
            var Obja = $('<a></a>');
            var Objp = $('<p></p>');

            if ( ('Security' == '' && 'page' == 'page') ||
                (scParam == "undefined") ) {
                Objli.addClass("soa-ui-dc-container-main-left-nav-item-selected");
            }

            Obja.addClass("soa-ui-dc-container-main-left-nav-item-link");

            // Construct the URL for the subnav heading entry link
            var subnavLink = "";

            // Start with the product
            if ( "/docs-test" ) {
                subnavLink = "/docs-test/".concat('ag');
            } else {
                subnavLink = "/".concat('ag');
            }
            // Add the category
            switch ( 'learn' ) {
                case "gs":
                    subnavLink += "/getting-started.html";
                    break;
                case "learn":
                    subnavLink += "/learning.html";
                    break;
                case "ref":
                    subnavLink += "/reference.html";
                    break;
            }
            // And put the subnav-class as a query param
            subnavLink += "?sc=" + snClasses[i];
            Obja.attr("href", subnavLink);

            Obja.html("Miscellaneous");

            Objli.addClass("soa-ui-dc-container-main-left-nav-item");

            Objli.append(Obja);

            if (pages.length > 0) {
                Objli.append(ObjInnerUl);
            }

            ObjUl.append(Objli);

            $('.soa-ui-dc-container-main-left').append(ObjUl);
        }
    }
    $(document).ready(function() {
        leftnav();
        $(".soa-ui-dc-container-main-left").find("ul").first().show();
        $(".soa-ui-dc-container-main").removeClass("soa-ui-dc-before-load");
    });
</script>
<!-- End left nav script -->
	</head>
	<body>
		<div class="soa-ui-dc-top-bar-wrapper">
	<div class="top-bar">

					<h2 class="soa-ui-dc-logo-container">
				<a href="/docs-test/index.html" class="soa-ui-dc-logo">
					<img src="/docs-test/style/images/SOA-Logo.png" alt="SOA Software &trade;, Powering the API Economy" width="215" height="62">
				</a><!-- logo link, replace href -->
			</h2>


		<div class="soa-ui-dc-topnav-wrapper">
			<div class="soa-ui-dc-topnav-container">
				<!-- top nav starts here -->
				<ul class="soa-ui-dc-topnav soa-ui-dc-clearthis">
					<li class="soa-ui-dc-topnav-item ">
						<a href="/docs-test/sp/index.html" class="soa-ui-dc-topnav-item-link soa-ui-dc-icon soa-ui-dc-topnav-item-link-soaplatform"><span class="soa-ui-dc-topnav-item-link-firstword">DEPLOYMENT</span> PLATFORM</a><!-- replace href -->
					</li>					
					<li class="soa-ui-dc-topnav-item ">
						<a href="/docs-test/cm/index.html" class="soa-ui-dc-topnav-item-link soa-ui-dc-icon soa-ui-dc-topnav-item-link-communitymanager"><span class="soa-ui-dc-topnav-item-link-firstword">COMMUNITY</span> MANAGER</a><!-- replace href -->
					</li>
					<li class="soa-ui-dc-topnav-item soa-ui-dc-topnav-item-active">
						<a href="/docs-test/ag/index.html" class="soa-ui-dc-topnav-item-link soa-ui-dc-icon soa-ui-dc-topnav-item-link-apigateway"><span class="soa-ui-dc-topnav-item-link-firstword">API</span> GATEWAY</a><!-- replace href -->
					</li>
					<li class="soa-ui-dc-topnav-item ">
						<a href="/docs-test/lm/index.html" class="soa-ui-dc-topnav-item-link soa-ui-dc-icon soa-ui-dc-topnav-item-link-lifecyclemanager"><span class="soa-ui-dc-topnav-item-link-firstword">LIFECYCLE</span> MANAGER</a><!-- replace href -->
					</li>
				</ul>
				<!-- top nav ends here -->
			</div>
			<div class="soa-ui-dc-subnav-container">
				<!-- sub nav starts here -->
				<ul class="soa-ui-dc-subnav soa-ui-dc-clearthis">
					<li class="soa-ui-dc-subnav-item">
						<a href="/docs-test/ag/getting-started.html" class="soa-ui-dc-subnav-item-link soa-ui-dc-icon soa-ui-dc-icon-action-dark">Getting Started</a>
					</li>
					<li class="soa-ui-dc-subnav-item">
						<a href="/docs-test/ag/learning.html" class="soa-ui-dc-subnav-item-link soa-ui-dc-icon soa-ui-dc-icon-action-dark soa-ui-dc-subnav-item-link-active">Learning</a><!-- replace href -->
					</li>
					<li class="soa-ui-dc-subnav-item">
						<a href="/docs-test/ag/reference.html" class="soa-ui-dc-subnav-item-link soa-ui-dc-icon soa-ui-dc-icon-action-dark">Reference</a><!-- replace href -->
					</li>
				</ul>
				<!-- sub nav ends here -->
			</div>
		</div>

					<div class="soa-ui-dc-topsearch-container">
				<form class="soa-ui-dc-topsearch">
					<label for="soa-control-dc-search" class="soa-ui-dc-label soa-ui-dc-label-hidden">Enter Search Text</label>
					<input type="text" id="soa-control-dc-search-query" name="q" placeholder="Search" autocomplete="off" class="soa-ui-dc-topsearch-input">
					<button class="soa-ui-dc-topsearch-button soa-ui-dc-icon-imgtxt soa-ui-dc-icon-magnifying-glass" type="button">Search</button>
				</form>
				<div id="soa-control-dc-search-results" class="soa-ui-dc-inline-search-div soa-ui-dc-icon" style="display: none;">
					<ul class="soa-ui-dc-buttons">
						<li>
							<button id="soa-control-dc-close-results" type="button" class="soa-ui-dc-icon-imgtxt soa-ui-dc-button soa-ui-dc-button-borderless soa-ui-dc-button-close">Close</button>
						</li>
					</ul>
					<h3 class="soa-ui-dc-content-header">Search Results</h3>
					<div id="soa-control-dc-search-result-entries">
					</div>
				</div>
			</div>

		    
		    <script id="soa-control-dc-search-results-template" type="text/x-handlebars-template">
				{{#entries}}
					<div class="soa-ui-dc-content-catalog">
						<ul class="soa-ui-dc-content-catalog-items">
							<li class="soa-ui-dc-content-catalog-item soa-ui-dc-2col-with-avatar soa-ui-dc-clearthis">
								<div class="soa-ui-dc-avatar-box">
									<h4 class="soa-ui-dc-icon-imgtxt soa-ui-dc-document-type soa-ui-dc-icon-{{ type }}">
									Document
									</h4>
								</div>
								<div class="soa-ui-dc-details-box">
									<div class="soa-ui-dc-section">
										<h3 class="soa-ui-dc-section-header">
											<a href="/docs-test{{ url }}"{{#if_eq type "pdf"}} target="_blank"{{/if_eq}}>{{ title }}</a>
										</h3>
										<p class="soa-ui-dc-section-paragraph">
										{{ description }}
										</p>
									</div>
								</div>
							</li>
						</ul>
					</div>
				{{/entries}}
		    </script>
		    
		
	</div>
</div>
		<div class="soa-ui-dc-container-main soa-ui-dc-clearthis">
			<!-- left nav -->
			<div class="soa-ui-dc-container-main-left">
				<h3 class="soa-ui-dc-container-main-left-header">
					
					<a href="/docs-test/ag/learning.html" class="soa-ui-dc-container-main-left-header-link">Learning</a>
								
				</h3>

			</div>
<!-- End left nav -->
			<div class="soa-ui-dc-container-main-content"><!-- main content starts here -->
				<div class="documentation supportContent">
					  <h2 name="top">Using the SOA Software External Keystore Feature</h2>
  <p>Learn how to enable your own hardware security module (HSM)  as an external keystore for storing and managing Policy Manager PKI keys and certificates.</p>

<p>NOTE: This guide describes features only available in API Gateway version 7.1 and greater.</p>

<a href="key_management.htm" class="button secondary">Managing Keys</a> <a href="identity_categories.htm" class="button secondary"> Identity Categories</a>

<p></p>


  <div class = "divider1"></div>
   <h3 style="color: gray;">Table of Contents</h3>

   <ol class="table_of_contents">

 <li><a href="#introduction">Introduction</a></li>
 <li><a href="#prereq_hsm">Step 1: Prerequisites - HSM Device</a></li>
  <li><a href="#prereq_pm">Step 2: Prerequisites - SOA Software Platform Installation</a></li>

  
  <li><a href="#create_containers">Step 3: Create Policy Manager / Network Director SOA Containers</a></li>
  


  <li><a href="#install_externalkeystore">Step 4: Install SOA Software External Keystore Feature</a></li>

    <li><a href="#install_pmfeatures">Step 5: Install Policy Manager Features</a></li>


  <li><a href="#configure_keystore">Step 6: Configure External Keystore Options</a></li>


  <li><a href="#verify_keystore">Step 7: Verify External Keystore Installation</a></li>


  <li><a href="#assignadminkeys">Step 8: Assign Keys for Administrator Account</a></li>

  <li><a href="#configurend">Step 9: Configure Network Director</a></li>





  </ol>
  <div class = "divider1"></div><p></p>






<a name="introduction">
<h3>Introduction</h3></a>

<p>Policy Manager provides an <em>SOA Software External Keystore Feature</em> that allows you to enable a Hardware Security Module (HSM)  security provider as your cryptography solution for storing and managing Policy Manager PKI keys and certificates. After the feature is installed, all key management tasks performed using the <em>Manage PKI Keys Wizard</em> for each identity (service, organization, container, or user) will be stored in the designated external keystore.
</p>
<p>Some important points to note:</p>
<ul class="usingOrderedList">
  <li>Policy Manager and Network Director must be installed in separate containers.</li>
  <li>The <em>SOA Software External Keystore Feature</em> must be installed in each of these containers.</li>
  <li>Policy Manager and Network Director containers can be stored on the same hardware device (if you are using a simple USB version of HSM). </li>
  <li> It is also possible to use different HSM devices  (i.e., different external keystore) for Policy Manager, Network Director, and Agent containers. In this case, the key / aliases must be  synced between each HSM device.</li>
</ul>
<p><em>Note: This topic provides a simple use case for a  Policy Manager / Network Director installation where both products are installed on the same hardware device. Policy Manager and Network Director are installed in separate containers,  the SOA Software External Keystore Feature is installed on each container, and are both referencing the same keystore.</em></p>
<p>Additional use cases will be published in forthcoming releases of this document. If you are using a more complex use case than the one covered here, or have questions about your particular external keystore use case requirement, contact SOA Software Customer Support.</p>
<p>Here's how it works:</p>
<ul class="usingOrderedList">
  <li>First you perform a list of prerequisite steps to configure your HSM (see <a href="#prereq_hsm">Step 1: Prerequisites - HSM Device</a>) and for the SOA Software Platform (see <a href="#prereq_pm">Step 2: Prerequisites - SOA Software Platform Installation</a>).</li>
  <li> When Policy Manager is initially installed, it creates a default keystore where all the PKI keys and certificates are stored. To replace the Policy Manager keystore with your own HSM, you must install and configure the <em>SOA Software External Keystore Feature</em> prior to installing the <em>SOA Software Policy Manager Console</em> and <em>SOA Software Policy Manager Services</em> features and configure a series of external keystore options (Provider Name, Key Store Type, Keystore Location, and Keystore Password) to integrate your HSM with Policy Manager. You obtain the  external keystore information for your HSM as part of the prerequisite steps.</li>
  <li>After the feature is installed, all key management tasks performed using the Manage PKI Keys Wizard for any identity will be stored in the designated external keystore.</li>
</ul>
<a name="prereq_hsm">
<h3>Step 1: Prerequisites - HSM Device</h3></a>

<p>HSM modules come in different forms including (i.e., plug-in card, external device attached to computer or server, networked HSM, etc.). Each module requires setup instructions that are unique to the device but generally the tasks are similar. The following list represents a list of general configuration tasks that should be completed on your HSM  prior to installing the<em> SOA Software External Keystore Feature</em>.
</p>
<p><em><strong>Note:</strong> Steps marked with * represent input required to configure the SOA Software External Keystore or java.security file.</em> </p>
<ul class="usingOrderedList">
  <li><strong>Install   Options</strong> - Represents the initial installation tasks for the HSM device or encryption engine software. </li>
  <li><strong>Configure  Service Ports</strong> - Configure private and non-private ports.</li>
  <li><strong>Initialize  Device</strong> - Generates secrets that protect operator cards and keys. </li>
  <li><strong>Select FIPS Service Level </strong>- The <em>SOA Software External Keystore Feature</em> supports FIPS Service Level II and III. See the <a href="http://en.wikipedia.org/wiki/FIPS_140-2">FIPS 140-2 Wiki</a>  for more information. <strong><em>FIPS Support for  importing external private keys:</em></strong> FIPS 140-2 level II allows import of external private keys. You cannot import external private keys into an HSM that is FIPS-140-2 level III compliant.</li>
  <li><strong>Configure Operator Card Set</strong> - Cards that authorized personal are issued to operate the HSM device. </li>
  <li><strong>Start System Services</strong> - This represents service startup tasks for the device.</li>
  <li><strong>Obtain HSM Security Provider .jar file* </strong>- This file must be copied in the Policy Manager lib/ext folder as part of the security.provider configuration task (covered in Prerequisites - SOA Software Platform Installation) </li>
  <li><strong>Obtain HSM Provider Name</strong>* - Obtain the official &quot;Provider Name&quot; from the HSM vendor. This name must be supplied when configuring the <em>SOA Software External Keystore Feature</em>. </li>
  <li><strong>Obtain HSM Security Provider Name</strong>* - Obtain the official &quot;Security Provider&quot; name of the HSM. This name will be added to the java.security file in the SOA Software Platform installation directory. </li>
  <li><strong>Obtain HSM Key Store Type</strong>* - Obtain the  &quot;Key Store Type&quot; from the HSM vendor. This name must be supplied when configuring the <em>SOA Software External Keystore Feature</em>. </li>
</ul>
<a name="prereq_pm">
<h3>Step 2: Prerequisites - SOA Software Platform  Installation</h3></a><ul class="usingOrderedList">
  <li><strong>Copy HSM .jar File</strong> - Copy the HSM security.provider .jar file from the java\classes directory of your HSM to the<strong> \sm70\jre\lib\extlib\ext</strong> folder of your SOA Software Platform installation directory. </li>
  <li><strong>Add HSM Security Provider to java.security file </strong> - Go to <strong>sm70\jre\lib\security</strong> of the SOA Software Platform installation directory, load the java.security file into a text editor and add your HSM security provider. Note that provider order must be lower than SunJCE provider.<br>
    <br>
    <img src="images/prereq_pm_security_provider.jpg" width="360" height="483">
    <br>
    Figure. Example of adding security provider to java.security
  </li>
</ul>
<p><a href="#top">Back to top</a></p>

<h3><a name="create_containers">Step 3: Create Policy Manager / Network Director SOA Containers</a></h3>
<ol class="usingOrderedList">
   <li>Launch the <em>Configure Container Instance Wizard </em> and define container for Policy Manager and Network Director, then follow the configuration instructions for each container (below). See the  <a href="http://docs.soa.com/ag/assets/SOA_Software_Platform_Install_Guide_v71.pdf">Policy Manager Installation Guide</a> for more on configuing the SOA Container. </li>
 </ol>



<h3><a name="install_externalkeystore">Step 4: Install SOA Software External Keystore Feature </a></h3>


 <ol class="usingOrderedList">
   <li>Launch the <em>SOA Software Administration Console </em>(http://&lt;hostname:&lt;port&gt;/admin/).</li>
   <li>On the <em>Installed Features</em> screen, select <strong>Plug-in</strong> from the <em>Filter</em> menu. </li>
   <li>Select the <em>SOA Software External Keystore Feature</em> and click <strong>Install Feature</strong>.</li>
   <li>After the installation is complete, click <strong>Close</strong>. Do not select <strong>Configure</strong>.</li>
 </ol>
 <a name="install_pmfeatures">
<h3>Step 5: Install Policy Manager Features</h3></a>

<ol class="usingOrderedList">

   <li>On the <em>Available Features</em> screen, select <strong>Product Feature </strong> from the <em>Filter</em> menu. </li>
   <li>Install the Policy Manager features (<em>SOA Software Policy Manager Services</em> and <em>SOA Software Policy Manager Console</em>).</li>
   <li>When the installation is complete, click <strong>Configure</strong>. The <em>External Keystore Options</em> screen displays. <br>
   </li>
  
</ol>



  <a name="configure_keystore">
<h3>Step 6: Configure External Keystore Options</h3>
</a>
<ol class="usingOrderedList">
  <li>On the <em>External Keystore Options </em>screen, specify the Provider Name and Key Store Type (you obtained as part of the  <a href="#prereq_hsm">HSM Device prerequisite tasks</a>), enter a Key Store Location, and assign a Key Store Password.<br>
    <br>
    <img src="images/external keystore options.jpg" alt="" width="586" height="372"></li>
  <li>You must also set the Encyrption option. </em>
    <ul class="usingUnorderedList">
      <li>If Encrypted=True, Policy Manager will attach the alias, and Network Director will obtain the private key directly from external keystore using the alias provided by Policy Manager. </li>
      <li>If Encrypted=False, Policy Manager will attach the encrypted private key directly to WSDL. If you are using an HSM external keystore, the &quot;Encryption&quot; option must by checked. </li>
      <li>If you are using another type of encryption engine (e.g., Sun JCE) encryption can be checked or unchecked.<br>
      </li>
    </ul>
    <br>
  </li>
  <li>After completing your entries, click <strong>Finish</strong>,   then complete the remainder of the Policy Manager configuration (see <a href="http://docs.soa.com/ag/assets/SOA_Software_Platform_Install_Guide_v71.pdf">Policy Manager Installation Guide</a> for more information). </li>
  <li>Restart the container as prompted by the configuration. </li>
</ol>

 <a name="verify_keystore">
<h3>Step 7: Verify External Keystore Installation</h3></a>

<ol class="usingOrderedList">
  <li>After the system has restarted, verify that the PKI keys are not stored in the Database. Policy Manager only stores the alias and encrypted password for external keystore entries.<br>
    <br>
    <img src="images/verify_database.jpg" width="625" height="149"></li>
  <li>You can also verify that the Policy Manager secret key is not being stored in the database. All the key and seed entries for the pmdomain user are null.<br>
    <br>
    <img src="images/verify_secret.jpg" width="617" height="149"><br>

  </li>
</ol>
 <a name="assignadminkeys">
<h3>Step 8: Assign Keys for Administrator Account</h3>
</a>

 <ol class="usingOrderedList">
   <li>When you  install the  <em>SOA Software External Keystore </em>feature keys are not automatically assigned to the Policy Manager Administrator User account (as they are when you are using the  Policy Manager default keystore), so you must generate them. <br>
     <br>
    <em><strong>Note:</strong> This same process is performed for key management performed on service, organization, container, or user identities. </em>Refer to <a href="key_management.htm">Key Management</a> for a list of <em>Manage PKI Key Wizard</em>  options available for each identity type.</li>
   <li>Launch the Policy Manager Management Console and go to <em>Security &gt; Users</em>. Select the Administrator user account, and click <strong>Manage PKI Keys</strong>. Select a Key Management option based on your requirements.  </em><br><br>
     <ul class="usingUnorderedList">
       <li>If you select the<strong> Generate PKI Keys and X.509 Certificate</strong> option you can  configure a new alias to assign keys. This alias will then be stored in your external keystore.</li>
       <li>You can also select an  existing alias that is already defined in the  keystore to assign the keys too on the  <em>Assign Keys from External Keystore</em> screen. You can get to this screen by clicking <strong>Next</strong> on the Generate PKI Keys and X.509 Certificate screen without specifying a new alias. <br>
         <br>
         <img src="images/assign_keys_external.jpg" width="583" height="390"><br>
       </li>
     </ul>
   </li>
   <li>When you've completed your entries click <strong>Finish</strong>.
   </li>
 </ol>

 <a name="configurend">
<h3>Step 9: Configure Network Director</h3>
</a>
 <ol class="usingOrderedList">
   <li>Launch the <em>SOA Software Administration Console </em>(http://&lt;hostname:&lt;port&gt;/admin/) for the Network Director  container instance.</li>
   <li>On the <em>Available Features</em> screen, select <em>SOA Software Network Director</em> and <em>SOA Software External Keystore</em> features, and click <strong>Install Features</strong>. </li>
   <li>When the installation is complete, click <strong>Configure</strong>. The <em>External Keystore Options</em> screen displays. </li>
   <li>Specify the Provider Name and Key Store Type (you obtained as part of the  HSM Device prerequisite tasks), enter a Key Store Location, and assign a Key Store Password. <br />
     <br />
     <em><strong>If you are using one external keystore for all container instances</strong></em>, enter the same values you used to configure the external keystore on the  Policy Manager container instance. <br />
     <br />
     <em><strong>If you are using a different  external keystore for your Network Director container instance</strong></em>, enter the unique values for the external keystore.  After completing the configuration refer to the <em>Generate Options &gt; Generate PKI Keys and X.509 Certificate &gt; External Keystore</em> section of <a href="key_management.htm">Managing Keys</a> to learn how to reference an alias in the Network Director keystore using the <strong>Manage PKI Keys Wizard</strong>. <br>
     <br>
     <img src="images/external keystore options.jpg" alt="" width="586" height="372"></li>
   <li>Click <strong>Finish</strong> and complete the remainder of the Network Director configuration. </li>
   <li>Register Network Director with Policy Manager using the <strong>Add Container Wizard</strong>. <br>
     <br>
     <img src="images/add_container_wizard.jpg" width="572" height="399"></li>
   <li>Configure a contract, physical and virtual services, and host on Network Director.</li>
   <li>Send requests to Network Director and verify they are processed successfully. </li>
   <li>The configuration is now complete. All key management tasks performed by the <em>Manage PKI Keys Wizard</em> for each identity type will now be stored in the external keystore. <em> </em>Refer to <a href="key_management.htm">Managing Keys</a> for <em>Manage PKI Key Wizard</em> available options for each identity type.
   
</li>
 </ol>
 <p><a href="#top">back to top</a> </p>


<div class = "divider1"></div>
				</div>
				<!-- main content ends here -->
			</div>
			</div>			
</div>			
			<!-- starts footer -->

			<footer id="footer">
			  <div class="container">
			    <div class="row" id="div0">
			      <div class="col-sm-3 top48">
			        <div class="wrapper" id="div1">
			          <ul id="ul0">
			            <li><strong>Solutions</strong></li>
			            <li><a href="http://soa.com/solution/api-management">API Management</a></li>
			            <li><a href="http://soa.com/solutions/api-security">API Security</a></li>
			            <li><a href="http://soa.com/solutions/mobile-application-gateway">Mobile Application Gateway</a></li>
			            <li><a href="http://soa.com/solutions/integrated_soa_governance">Integrated SOA Governance</a></li>
			            <li><a href="http://soa.com/solutions/application-services-governance">Application Services Governance</a></li>
			            <li><a href="http://soa.com/solution/reinvent-datacenter-with-apis">DataCenter API Platform</a></li>
			            <li><a href="http://soa.com/solutions/microsoft_and_soa_software">Microsoft APIs &amp; SOA</a></li>
			            <li><a href="http://soa.com/solutions/ibm_datapower_governance">IBM APIs &amp; SOA</a></li>
			            <li><a href="http://soa.com/solutions/sola/enterprise_soa_and_the_mainframe_solutions">Mainframe APIs &amp; SOA</a></li>
						<li><a href="http://soa.com/solutions/semantics-management">Metadata Management</a></li>
			          </ul>
			        </div>
			      </div>
			      <div class="col-sm-3 top48">
			        <div class="wrapper" id="div2">
			          <ul id="ul1">
			            <li><strong>Products</strong></li>
			 	    <li><a href="http://soa.com/solutions/api-gateway">API Gateway</a></li>
			            <li><a href="http://soa.com/products/community-manager">Community Manager</a></li>
			            <li><a href="http://soa.com/products/lifecycle_manager">Lifecycle Manager</a></li>
			            <li><a href="http://soa.com/products/policy_manager">Policy Manager</a></li>
			            <li><a href="http://soa.com/products/oauth-server">OAuth Server</a></li>
			          </ul>
			        </div>
			      </div>
			      <div class="col-sm-2 top48">
			        <div class="wrapper" id="div3">
			          <ul id="ul2">
			            <li><strong>Resources</strong></li>
			            <li><a href="http://resource.soa.com/">Resource Center</a></li>
			            <li><a href="http://resource.soa.com/resource/whitepaper/ebook-building-successful-apis">API eBook</a></li>
			            <li><a href="http://resource.soa.com/resource/White-Papers">White Papers</a></li>
			            <li><a href="http://resource.soa.com/resource/datasheets">Datasheets</a></li>
			            <li><a href="http://resource.soa.com/resource/Videos">Videos</a></li>
			            <li><a href="http://docs.soa.com" rel="external">Documentation</a></li>

			                                               <li class="partners-footer-holder"><strong>Support</strong></li>
									<li><a href="http://support.soa.com">Customer Support</a></li>
								
			          </ul>
			        </div>
			      </div>
			      <div class="col-sm-2 top48">
			        <div class="wrapper" id="div4">
			          <ul id="ul3">
			            <li><strong>News &amp; Events</strong></li>
			            <li><a href="http://soa.com/news/press-releases">Press releases</a></li>
			            <li><a href="http://soa.com/news/in_the_news">In the News</a></li>
			               

			 <li class="partners-footer-holder"><strong>Partners</strong></li>
			            <li><a href="http://soa.com/partners/soa_software_partners">Partner program</a></li>
			            <li><a href="http://soa.com/partners/partners_distribute_resell_consult">Distributors and Resellers</a></li>
			</ul>



			        </div>
			      </div>




			      <div class="col-sm-2 top48">
			        <div class="wrapper" id="div5">
			          <ul id="ul4">
			            <li><strong>Company</strong></li>
			            <li><a href="http://soa.com/company/executive_list">Executive Team</a></li>
			            <li><a href="http://soa.com/company/board_list">Board of Directors</a></li>
			            <li><a href="http://soa.com/company/customers">Customers</a></li>
			            <li><a href="http://soa.com/company/awards">Awards</a></li>
			            <li><a href="http://soa.com/company/careers">Careers</a></li>
			            <li><a href="http://soa.com/company/contact_us">Contact Us</a></li>
			            <li><a href="http://blog.soa.com/">Blog</a></li>
			          </ul>
			        </div>
			      </div>
			    </div>
			  </div>
			  <div class="row credits" id="div6">
			    <div class="col-md-12">
			      <div class="row social">
			        <div class="col-md-12"> <a href="https://www.facebook.com/SOASoftware" class="facebook"> <span class="socialicons ico1"></span> </a> <a href="https://twitter.com/SOASoftwareInc" class="twitter"> <span class="socialicons ico2"></span> </a>  <a href="https://www.linkedin.com/company/soa-software" class="pinterest"> <span class="socialicons ico5"></span> </a>  <a href="http://www.youtube.com/soasoftware" class="behance"> <span class="socialicons ico7"></span> </a> </div>
			      </div>
			      <div class="row copyright" id="div7">
			       
			        <div class="col-md-12"> &copy; 2014 SOA Software, Inc. All rights reserved </div>
			      </div>
			    </div>
			  </div>
			</footer>
			<!-- Scripts -->

			<script>								


			/* do we need this script below? */
			$(".balls").click(function(e) {
			    $("html, body").bind("scroll mousedown DOMMouseScroll mousewheel keyup", function(){
			       $('html, body').stop();
			   });
			    var elem;
			    e.preventDefault();
			    var id = $(this).attr("id");
			    if(id == "scrollBtn1") {
			        elem = "#box-top";
			 }else if(id == "scrollBtn2"){
			     elem = "#box-middle";
			 }else if(id == "scrollBtn3"){
			     elem = "#box-bottom";
			     
			 }
			 $('html, body').animate({
			        scrollTop: $(elem).offset().top - 96
			    }, 1500);
			    return false;
			});


			</script>
			<!--
			<script type="text/javascript"> 
			var debugMode=true;
			var bt_config_project_id = 114;
			var bt_config_default_location = "Home Page";
			var bt_config_btn_placement = "topLeft";
			var bt_config_btn_style = "trans";
			</script>
			<script type="text/javascript" src="http://bugtracker.ripemedia.com/widget/js/embed.js"></script> -->
			<!-- RipeTracker Button END -->
			<div id="soa-control-dc-overlay" class="soa-ui-dc-overlay"></div>
			<script type="text/javascript">
				$(function() {
					$('#soa-control-dc-search-query').lunrSearch({
						indexUrl: '/docs-test/search.json',
						results:  '#soa-control-dc-search-results',
						entries:  '#soa-control-dc-search-result-entries',
						template: '#soa-control-dc-search-results-template'
					});
					$("#soa-control-dc-close-results").click(function(e){
						e.preventDefault();
						$('#soa-control-dc-search-results').hide();
						$('#soa-control-dc-overlay').removeClass('soa-ui-dc-overlay-visible');
					});
					$("#soa-control-dc-overlay").click(function(e){
						e.preventDefault();
						$('#soa-control-dc-search-results').hide();
						$('#soa-control-dc-overlay').removeClass('soa-ui-dc-overlay-visible');
					});
					$(".soa-ui-dc-container-main-left-nav-item-link").click(function(e){
						if ( ! $(this).closest(".soa-ui-dc-container-main-left-nav-inner").length ) {
							$(".soa-ui-dc-container-main-left-nav-item").removeClass('soa-ui-dc-container-main-left-nav-item-selected');
							$(this).parent().addClass('soa-ui-dc-container-main-left-nav-item-selected');
							// $(this).addClass('soa-ui-dc-container-main-left-nav-item-selected');
						}
					});
				});
			</script>

		</div>
	</body>
</html>
