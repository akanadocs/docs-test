<!DOCTYPE html>
<html lang="en">
	<head>
		            <meta http-equiv="Content-type" content="text/html; charset=utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <title>Platform Hardening</title>
            <link href="http://soa.com/css/bootstrap/bootstrap.min.css" rel="stylesheet" />
            <link rel="stylesheet" href="http://soa.com/css/compiled/bootstrap-overrides.css" type="text/css" />
            <link rel="stylesheet" type="text/css" href="http://soa.com/css/compiled/theme.css" />
            <link rel="stylesheet" href="/docs-test/style/reset.css" type="text/css">
            <link rel="stylesheet" href="/docs-test/style/base.css" type="text/css">
            <link rel="stylesheet" href="/docs-test/style/style.css" type="text/css">
            <link rel="stylesheet" href="/docs-test/style/document.css" type="text/css">
	          <link rel="stylesheet" href="/docs-test/style/pygments.css" type="text/css">

            <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700' rel='stylesheet' type='text/css'>
            <link rel="icon" type="image/png" href="http://soa.com/favicon.ico">


            <!-- <link rel="stylesheet" href="/docs-test/style/site.min.css" type="text/css" media="screen" /> -->
            <!--[if lt IE 10]><link rel="stylesheet" href="style/ie.css" type="text/css"><![endif]-->
            <!--[if lt IE 9]><link rel="stylesheet" href="style/ie8.css" type="text/css"><![endif]-->
          
            <script src="/docs-test/js/soadocs.min.js"></script>

            <script type="text/javascript">

              var _gaq = _gaq || [];
              _gaq.push(['_setAccount', 'UA-333097-1']);
              _gaq.push(['_trackPageview']);

              (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
              })();
            </script>
            <script type="text/javascript">
              adroll_adv_id = "DV6Z3DM2IVAT5P6URKK3RO";
              adroll_pix_id = "WORRISBFGNASNPUS72EOCQ";
              (function () {
              var oldonload = window.onload;
              window.onload = function(){
                 __adroll_loaded=true;
                 var scr = document.createElement("script");
                 var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
                 scr.setAttribute('async', 'true');
                 scr.type = "text/javascript";
                 scr.src = host + "/j/roundtrip.js";
                 ((document.getElementsByTagName('head') || [null])[0] ||
                  document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
                 if(oldonload){oldonload()}};
              }());
            </script>


		<!-- filtered pages for product and category list script -->
<script>
	
	var unsorted_pages_prod_cat = { p: 'sp', c: 'ref', pages: [ 
		{ t: 'Installing SOA Software Platform 7.0', nt: 'Installing SOA Software Platform 7.0', w: '1', ty: 'pdf', u: '/sp/SOA_Software_Platform_Install_Guide_v70.html', d: 'Provides instructions for installing the SOA Software Platform 7.0 GA, SOA Software Platform Updates, configuring a Container Instance, installing Policy Manager Features using the SOA Software Administration Console, and performing administration tasks.', nn: '', nc: '', sn: '', sc: ''} , { t: 'Installing SOA Software Platform 7.1', nt: 'Installing SOA Software Platform 7.1', w: '1', ty: 'pdf', u: '/sp/SOA_Software_Platform_Install_Guide_v71.html', d: 'Provides instructions for installing the SOA Software Platform 7.1 GA, SOA Software Platform Updates, configuring a Container Instance, installing Policy Manager Features using the SOA Software Administration Console, and performing administration tasks.', nn: '', nc: '', sn: '', sc: ''} , { t: 'Platform Hardening', nt: 'Platform Hardening', w: '4', ty: 'page', u: '/sp/platform-hardening.html', d: 'A guide on how to harden the platform for secure deployments', nn: '', nc: '', sn: '', sc: ''} , { t: 'Platform Reference', nt: 'Reference', w: '5', ty: '', u: '/sp/reference.html', d: 'The Platform Reference Documents', nn: 'true', nc: 'true', sn: '', sc: ''} ,  
		]};
</script>
<!-- end filtered pages for product and category list script -->
		<!-- left nav script -->
<script>
	function leftnav()
    {
        var i = 0, snClasses = [];
        var pages = unsorted_pages_prod_cat.pages.filter(function(a) {
            return (a.nn != 'true' && a.nn != 'api' && a.sc == '');
        }).sort(function CustomSort(a, b) {
            if ( ! a["w"] ) { a["w"] = 1000 ;}
            if ( ! b["w"] ) { b["w"] = 1000 ;}
            var weighta = a['w'];
            var weightb = b['w'];
            if(weighta != weightb){
                return (weighta - weightb);
            }
            else{
                return (a.nt.localeCompare(b.nt));
            }
        });
        var snpages = unsorted_pages_prod_cat.pages.filter(function(a) {
            return (a.nn != 'true' && a.nn != 'api' && a.sc != '');
        }).sort(function CustomSort(a, b) {
            if ( ! a["w"] ) { a["w"] = 1000 ;}
            if ( ! b["w"] ) { b["w"] = 1000 ;}
            var weighta = a['w'];
            var weightb = b['w'];
            if(weighta != weightb){
                return (weighta - weightb);
            }
            else{
                return (a.nt.localeCompare(b.nt));
            }
        });

        // Get the value of the sc query string (if present)
        var scParam = $.url().param('sc') || 'null';

        if (snpages.length == 0) {
            var ObjUl = $('<ul></ul>').hide();
            ObjUl.addClass("soa-ui-dc-container-main-left-nav");

            for (i = 0; i < pages.length; i++)
            {
                var Objli = $('<li></li>');
                var Obja = $('<a></a>');
                var Objp = $('<p></p>');

                Objli.attr("role", "menuitem");

                if ( pages[i].u == '/sp/platform-hardening.html' ) {
                    Obja.addClass("soa-ui-dc-container-main-left-nav-item-selected soa-ui-dc-container-main-left-nav-item-link");
                } else {
                    Obja.addClass("soa-ui-dc-container-main-left-nav-item-link");
                }

                if ( "/docs-test" ) {
                    Obja.attr("href", "/docs-test".concat(pages[i].u) );
                } else {
                    Obja.attr("href", pages[i].u );
                }
                if ( pages[i].ty == 'pdf' ) {
                    Obja.attr("target", "_blank");
                }
                if (pages[i].nt) {
                    Obja.html(pages[i].nt.replace("&amp;nbsp;", " "));
                } else {
                    Obja.html(pages[i].t.replace("&amp;nbsp;", " "));
                }

                Objli.addClass("soa-ui-dc-container-main-left-nav-item");
                Objli.append(Obja);

                ObjUl.append(Objli);
            }
            $('.soa-ui-dc-container-main-left').append(ObjUl);
        } else {
            for (; i < snpages.length; i++) {
                if (snClasses.indexOf(snpages[i].sc) < 0) {
                    snClasses.push(snpages[i].sc);
                }
            }
            snClasses.sort();

            var ObjUl = $('<ul></ul>').hide();
            ObjUl.addClass("soa-ui-dc-container-main-left-nav");

            // Iterate through the sub-nav-classes
            for (i = 0; i < snClasses.length; i++)
            {
                // Get the subnav for this class
                var classsnpages = snpages.filter(function(a) {
                    return (a.sc == snClasses[i]);
                });

                var ObjInnerUl = $('<ul></ul>');
                ObjInnerUl.addClass("soa-ui-dc-container-main-left-nav soa-ui-dc-container-main-left-nav-inner");
                for (j = 0; j < classsnpages.length; j++)
                {
                    var ObjInnerli = $('<li></li>');
                    var ObjInnera = $('<a></a>');
                    var ObjInnerp = $('<p></p>');

                    ObjInnerli.attr("role", "menuitem");

                    if ( classsnpages[j].u == '/sp/platform-hardening.html' ) {
                        ObjInnera.addClass("soa-ui-dc-container-main-left-nav-item-selected soa-ui-dc-container-main-left-nav-item-link");
                    } else {
                        ObjInnera.addClass("soa-ui-dc-container-main-left-nav-item-link");
                    }

                    if ( "/docs-test" ) {
                        ObjInnera.attr("href", "/docs-test".concat(classsnpages[j].u) );
                    } else {
                        ObjInnera.attr("href", classsnpages[j].u );
                    }
                    if ( classsnpages[j].ty == 'pdf' ) {
                        ObjInnera.attr("target", "_blank");
                    }
                    if (classsnpages[j].nt) {
                        ObjInnera.html(classsnpages[j].nt.replace("&amp;nbsp;", " "));
                    } else {
                        ObjInnera.html(classsnpages[j].t.replace("&amp;nbsp;", " "));
                    }

                    ObjInnerli.addClass("soa-ui-dc-container-main-left-nav-item");
                    ObjInnerli.append(ObjInnera);
                    ObjInnerUl.append(ObjInnerli);          
                }

                var Objli = $('<li></li>');
                var Obja = $('<a></a>');
                var Objp = $('<p></p>');

                if ( ('' == snClasses[i]) || (scParam == snClasses[i]) ) {
                    Objli.addClass("soa-ui-dc-container-main-left-nav-item-selected");
                }

                Obja.addClass("soa-ui-dc-container-main-left-nav-item-link");

                // Construct the URL for the subnav heading entry link
                var subnavLink = "";

                // Start with the product
                if ( "/docs-test" ) {
                    subnavLink = "/docs-test/".concat('sp');
                } else {
                    subnavLink = "/".concat('sp');
                }
                // Add the category
                switch ( 'ref' ) {
                    case "gs":
                        subnavLink += "/getting-started.html";
                        break;
                    case "learn":
                        subnavLink += "/learning.html";
                        break;
                    case "ref":
                        subnavLink += "/reference.html";
                        break;
                }
                // And put the subnav-class as a query param
                subnavLink += "?sc=" + snClasses[i];
                Obja.attr("href", subnavLink);

                Obja.html(snClasses[i]);

                Objli.addClass("soa-ui-dc-container-main-left-nav-item");

                Objli.append(Obja);

                if (classsnpages.length > 0) {
                    Objli.append(ObjInnerUl);
                }

                ObjUl.append(Objli);
            }
            // And now add the miscellaneous (uncategorized) entries
            var ObjInnerUl = $('<ul></ul>');
            ObjInnerUl.addClass("soa-ui-dc-container-main-left-nav soa-ui-dc-container-main-left-nav-inner");
            for (j = 0; j < pages.length; j++)
            {
                var ObjInnerli = $('<li></li>');
                var ObjInnera = $('<a></a>');
                var ObjInnerp = $('<p></p>');

                ObjInnerli.attr("role", "menuitem");

                if ( pages[j].u == '/sp/platform-hardening.html' ) {
                    ObjInnera.addClass("soa-ui-dc-container-main-left-nav-item-selected soa-ui-dc-container-main-left-nav-item-link");
                } else {
                    ObjInnera.addClass("soa-ui-dc-container-main-left-nav-item-link");
                }

                if ( "/docs-test" ) {
                    ObjInnera.attr("href", "/docs-test".concat(pages[j].u) );
                } else {
                    ObjInnera.attr("href", pages[j].u );
                }
                if ( pages[j].ty == 'pdf' ) {
                    ObjInnera.attr("target", "_blank");
                }
                if (pages[j].nt) {
                    ObjInnera.html(pages[j].nt.replace("&amp;nbsp;", " "));
                } else {
                    ObjInnera.html(pages[j].t.replace("&amp;nbsp;", " "));
                }

                ObjInnerli.addClass("soa-ui-dc-container-main-left-nav-item");
                ObjInnerli.append(ObjInnera);
                ObjInnerUl.append(ObjInnerli);          
            }

            var Objli = $('<li></li>');
            var Obja = $('<a></a>');
            var Objp = $('<p></p>');

            if ( ('' == '' && 'page' == 'page') ||
                (scParam == "undefined") ) {
                Objli.addClass("soa-ui-dc-container-main-left-nav-item-selected");
            }

            Obja.addClass("soa-ui-dc-container-main-left-nav-item-link");

            // Construct the URL for the subnav heading entry link
            var subnavLink = "";

            // Start with the product
            if ( "/docs-test" ) {
                subnavLink = "/docs-test/".concat('sp');
            } else {
                subnavLink = "/".concat('sp');
            }
            // Add the category
            switch ( 'ref' ) {
                case "gs":
                    subnavLink += "/getting-started.html";
                    break;
                case "learn":
                    subnavLink += "/learning.html";
                    break;
                case "ref":
                    subnavLink += "/reference.html";
                    break;
            }
            // And put the subnav-class as a query param
            subnavLink += "?sc=" + snClasses[i];
            Obja.attr("href", subnavLink);

            Obja.html("Miscellaneous");

            Objli.addClass("soa-ui-dc-container-main-left-nav-item");

            Objli.append(Obja);

            if (pages.length > 0) {
                Objli.append(ObjInnerUl);
            }

            ObjUl.append(Objli);

            $('.soa-ui-dc-container-main-left').append(ObjUl);
        }
    }
    $(document).ready(function() {
        leftnav();
        $(".soa-ui-dc-container-main-left").find("ul").first().show();
        $(".soa-ui-dc-container-main").removeClass("soa-ui-dc-before-load");
    });
</script>
<!-- End left nav script -->
	</head>
	<body>
		<div class="soa-ui-dc-top-bar-wrapper">
	<div class="top-bar">

					<h2 class="soa-ui-dc-logo-container">
				<a href="/docs-test/index.html" class="soa-ui-dc-logo">
					<img src="/docs-test/style/images/SOA-Logo.png" alt="SOA Software &trade;, Powering the API Economy" width="215" height="62">
				</a><!-- logo link, replace href -->
			</h2>


		<div class="soa-ui-dc-topnav-wrapper">
			<div class="soa-ui-dc-topnav-container">
				<!-- top nav starts here -->
				<ul class="soa-ui-dc-topnav soa-ui-dc-clearthis">
					<li class="soa-ui-dc-topnav-item soa-ui-dc-topnav-item-active">
						<a href="/docs-test/sp/index.html" class="soa-ui-dc-topnav-item-link soa-ui-dc-icon soa-ui-dc-topnav-item-link-soaplatform"><span class="soa-ui-dc-topnav-item-link-firstword">DEPLOYMENT</span> PLATFORM</a><!-- replace href -->
					</li>					
					<li class="soa-ui-dc-topnav-item ">
						<a href="/docs-test/cm/index.html" class="soa-ui-dc-topnav-item-link soa-ui-dc-icon soa-ui-dc-topnav-item-link-communitymanager"><span class="soa-ui-dc-topnav-item-link-firstword">COMMUNITY</span> MANAGER</a><!-- replace href -->
					</li>
					<li class="soa-ui-dc-topnav-item ">
						<a href="/docs-test/ag/index.html" class="soa-ui-dc-topnav-item-link soa-ui-dc-icon soa-ui-dc-topnav-item-link-apigateway"><span class="soa-ui-dc-topnav-item-link-firstword">API</span> GATEWAY</a><!-- replace href -->
					</li>
					<li class="soa-ui-dc-topnav-item ">
						<a href="/docs-test/lm/index.html" class="soa-ui-dc-topnav-item-link soa-ui-dc-icon soa-ui-dc-topnav-item-link-lifecyclemanager"><span class="soa-ui-dc-topnav-item-link-firstword">LIFECYCLE</span> MANAGER</a><!-- replace href -->
					</li>
				</ul>
				<!-- top nav ends here -->
			</div>
			<div class="soa-ui-dc-subnav-container">
				<!-- sub nav starts here -->
				<ul class="soa-ui-dc-subnav soa-ui-dc-clearthis">
					<li class="soa-ui-dc-subnav-item">
						<a href="/docs-test/sp/getting-started.html" class="soa-ui-dc-subnav-item-link soa-ui-dc-icon soa-ui-dc-icon-action-dark">Getting Started</a>
					</li>
					<li class="soa-ui-dc-subnav-item">
						<a href="/docs-test/sp/learning.html" class="soa-ui-dc-subnav-item-link soa-ui-dc-icon soa-ui-dc-icon-action-dark">Learning</a><!-- replace href -->
					</li>
					<li class="soa-ui-dc-subnav-item">
						<a href="/docs-test/sp/reference.html" class="soa-ui-dc-subnav-item-link soa-ui-dc-icon soa-ui-dc-icon-action-dark soa-ui-dc-subnav-item-link-active">Reference</a><!-- replace href -->
					</li>
				</ul>
				<!-- sub nav ends here -->
			</div>
		</div>

					<div class="soa-ui-dc-topsearch-container">
				<form class="soa-ui-dc-topsearch">
					<label for="soa-control-dc-search" class="soa-ui-dc-label soa-ui-dc-label-hidden">Enter Search Text</label>
					<input type="text" id="soa-control-dc-search-query" name="q" placeholder="Search" autocomplete="off" class="soa-ui-dc-topsearch-input">
					<button class="soa-ui-dc-topsearch-button soa-ui-dc-icon-imgtxt soa-ui-dc-icon-magnifying-glass" type="button">Search</button>
				</form>
				<div id="soa-control-dc-search-results" class="soa-ui-dc-inline-search-div soa-ui-dc-icon" style="display: none;">
					<ul class="soa-ui-dc-buttons">
						<li>
							<button id="soa-control-dc-close-results" type="button" class="soa-ui-dc-icon-imgtxt soa-ui-dc-button soa-ui-dc-button-borderless soa-ui-dc-button-close">Close</button>
						</li>
					</ul>
					<h3 class="soa-ui-dc-content-header">Search Results</h3>
					<div id="soa-control-dc-search-result-entries">
					</div>
				</div>
			</div>

		    
		    <script id="soa-control-dc-search-results-template" type="text/x-handlebars-template">
				{{#entries}}
					<div class="soa-ui-dc-content-catalog">
						<ul class="soa-ui-dc-content-catalog-items">
							<li class="soa-ui-dc-content-catalog-item soa-ui-dc-2col-with-avatar soa-ui-dc-clearthis">
								<div class="soa-ui-dc-avatar-box">
									<h4 class="soa-ui-dc-icon-imgtxt soa-ui-dc-document-type soa-ui-dc-icon-{{ type }}">
									Document
									</h4>
								</div>
								<div class="soa-ui-dc-details-box">
									<div class="soa-ui-dc-section">
										<h3 class="soa-ui-dc-section-header">
											<a href="/docs-test{{ url }}"{{#if_eq type "pdf"}} target="_blank"{{/if_eq}}>{{ title }}</a>
										</h3>
										<p class="soa-ui-dc-section-paragraph">
										{{ description }}
										</p>
									</div>
								</div>
							</li>
						</ul>
					</div>
				{{/entries}}
		    </script>
		    
		
	</div>
</div>
		<div class="soa-ui-dc-container-main soa-ui-dc-clearthis">
			<!-- left nav -->
			<div class="soa-ui-dc-container-main-left">
				<h3 class="soa-ui-dc-container-main-left-header">
					
					<a href="/docs-test/sp/reference.html" class="soa-ui-dc-container-main-left-header-link">Reference</a>
								
				</h3>

			</div>
<!-- End left nav -->
			<div class="soa-ui-dc-container-main-content"><!-- main content starts here -->
				<div class="documentation supportContent">
					<h2>SOA Software Platform Hardening Guide</h2>

<h3 style="color: grey;">Table of Contents</h3>

<ol class="table_of_contents">
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#deployment-architecture">Deployment Architecture</a></li>
    <ol>
        <li><a href="#install-network-director-on-a-separate-container">Install Network Director on a separate container</a></li>
        <li><a href="#install-internet-facing-and-administration-applications-on-separate-containers">Install Internet-facing and administration applications on separate containers</a></li>
        <li><a href="#configure-all-listeners-internal-and-external-as-htts-only">Configure all listeners, internal and external as HTTPS only</a></li>
        <li><a href="#config-admin-sep-port">Configure the Admin console (/admin) on a separate port</a></li>
    </ol>
    <li><a href="#config-setting">Configuration Settings</a></li>
    <ol>
        <li><a href="#jre-unlimited-strength">Add the unlimited strength policy to the JDK</a></li>
        <li><a href="#ignore-cookies">Configure the product to ignore downstream cookies</a></li>
        <li><a href="#secure-cookies">Configure secure cookies</a></li>
        <li><a href="#restrict-cipher-suites">Restrict the cipher suites used/a></li>
        <li><a href="#nd-header-propagation">Header Propagation in Network Director</a></li>
        <li><a href="#cm-header-propagation">Header Propagation in Community Manager Subsystem</a></li>
        <li><a href="#credential-cache">Tune the API Security Credential Cache</a></li>
    </ol>
</ol>

<h3><a name="introduction"></a>Introduction</h3>

<p>SOA Software is a recognized leader in API Management and SOA Governance Automation solutions.  Our platform-independent solution set includes the API Gateway, which is further broken down into Policy Manager, the centralized administration console, and Network Director, an intermediary that integrates with Policy Manager to provide high-performance, scalable API security and management capabilities. The solution also includes Community Manager, which provides a branded developer portal for the consumption of API by the developer.</p>

<p>This document describes the best practices and configuration settings to harden SOA Software’s API Gateway and Community Manager products. This document is a supplement to SOA Software’s existing “Product Architecture” document showing recommendations for a typical large enterprise.</p>

<h3><a name="deployment-architecture"></a>Deployment Architecture</h3>

<p>There are several best practices that cover the deployment of the product in a hardened environment.</p>

<h4><a name="install-network-director-on-a-separate-container"></a>Install Network Director on a separate container</h4>

<p>API traffic processing should be handled separately from Web traffic and Admin traffic. To this end, the Network Director should not be installed on the same container as Community Manager, or Policy Manager features:</p>

<p><img src="images/hardening-admin-console.png" alt="Admin Console" title="Admin Console"></p>

<h4><a name="install-internet-facing-and-administration-applications-on-separate-containers"></a>Install Internet-facing and administration applications on separate containers</h4>

<p>There are two components to this:
1.  The Community Manager should not be installed on the same container as Policy Manager Console
2.  The Community Manager User Interface and APIs provide both consumer-facing and administrative functions. If needed by your security constraints, the administrative functions can be disabled in Community Manager. This will allow you to install different instances of Community Manager on different containers – and disable the administration functionality in the Internet-facing instance. </p>

<p>To disable the administrative functionality in the Community Manager:</p>

<p>In the admin console, configure the following:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">com.soa.atmosphere -&gt;
atmosphere.config.denyUserRoles=SiteAdmin,BusinessAdmin,ApiAdmin,System Administrator,Security Administrator,Site Administrator
</code></pre></div>
<h4><a name="configure-all-listeners-internal-and-external-as-htts-only"></a>Configure all listeners, internal and external as HTTPS only</h4>

<p>This is accomplished in two places in the product. Firstly, the listeners for the applications in the container are configured from within Policy Manager at Containers-&gt;[container_name]-&gt;Details-&gt;Inbound Listeners. Options for configuring port and PKI are available. Settings for two-way SSL mutual authentication are also available. It is recommended that either the “Accept client certificates” or “Require client certificates” be selected based on customer security requirements</p>

<p>Secondly, when the container starts up, it supports an Admin application (/admin). The port and associated transport settings for the Admin application are configurable in the /instances/[container_name]/system.properties file for each container. To avoid any confusion with keys and certificates, it is recommended that the Admin application’s SSL settings be changed only after the main container listeners have been configured for SSL.</p>

<p><strong>Scope</strong>: All Containers</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#Config for pm
#Thu Jul 10 23:47:51 PDT 2014
product.home=file\:/Users/example/soa/sm70/
org.eclipse.jetty.server.Request.maxFormContentSize=500000
felix.cm.dir=${felix.cache.rootdir}/cm
org.osgi.service.http.port.secure=9900
com.soa.provision.file.dir=${felix.cache.rootdir}/deploy
product.home.dir=/Users/alistairfarquharson/soa/b962/sm70
com.soa.snapshot.directory=${felix.cache.rootdir}/snapshot
com.soa.provision.noInitialDelay=true
com.soa.http.host=127.0.0.1
com.soa.http.bind.all=false
com.soa.provision.bundles.start=true
com.soa.provision.poll=2000
org.eclipse.jetty.servlet.SessionCookie=JSESSIONID_pm
felix.shutdown.hook=false
container.name=[container_name]
</code></pre></div>
<p>Note above the *.secure syntax used for the settings.</p>

<p>Once all of these SSL listener configurations have been validated, the container’s original HTTP listeners can be deleted using the Policy Manager Console. Note that when deleting HTTP listeners for a container running the Policy Manager Services feature, it is necessary to add that container listener’s X.509 certificate to the “bootstrap keystore” of all Network Director containers. More information on this configuration task can be found in the Support Knowledgebase.</p>

<h4><a name="config-admin-sep-port"></a>Configure the Admin console (/admin) on a separate port</h4>

<p>As shown above, this is configurable in the /instances/[container_name]/system.properties file for each container. The Admin console (/admin) and the other features installed in the container should ideally not be configured on the same port. This will allow you to isolate the Admin console from the Internet.</p>

<p>The system.properties file is updated with the following highlighted properties and also requires a configuration file placed in the container’s deploy directory (i.e /sm70/instances/[container]/deploy) to ensure the Admin console is only accessed from the defined port and host. </p>

<p><strong>Scope</strong>: All Containers</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#Config for pm
#Thu Jul 10 23:47:51 PDT 2014
product.home=file\:/Users/example/soa/sm70/
org.eclipse.jetty.server.Request.maxFormContentSize=500000
felix.cm.dir=${felix.cache.rootdir}/cm
org.osgi.service.http.port.secure=14443
com.soa.provision.file.dir=${felix.cache.rootdir}/deploy
product.home.dir=/Users/alistairfarquharson/soa/b962/sm70
com.soa.snapshot.directory=${felix.cache.rootdir}/snapshot
com.soa.provision.noInitialDelay=true
com.soa.http.host=10.1.1.2
com.soa.http.bind.all.secure=false
com.soa.provision.bundles.start=true
com.soa.provision.poll=2000
org.eclipse.jetty.servlet.SessionCookie=JSESSIONID_pm
felix.shutdown.hook=false
container.name=[container_name]
</code></pre></div>
<p>In this configuration, the Admin console (/admin) would only be accessible via SSL on IP address 10.1.1.2, port 14443.
It is further possible to eliminate exposing the Admin console (/admin) to the network at all. The Admin console can be configured so that it is only bound to the “localhost” address and not exposed outside the local system. To enable this configuration, modify the above properties to include these values:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">com.soa.http.host.secure=127.0.0.1
</code></pre></div>
<p>The configuration file to restrict the Admin console access must be named:  <em>com.soa.admin.console.cfg</em>.  The contents of this file is as shown below.  The <em>admin.console.access.restricted</em> property must be set to <em>true</em> to restrict the Admin Console access.  The other two properties are optional depending on the specific security requirements.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># Set access to the Admin Console on the localhost interface only
admin.console.localhost.only=false

# Restrict the Admin Console access to the port and interface
# defined in the system.properties
admin.console.access.restricted=true

# Hides the Admin domain from the Admin Console login
admin.console.domain.enabled=true
</code></pre></div>
<p>The most common way of accessing the Admin console in this configuration is using SSH port tunneling.</p>

<h3><a name="config-setting"></a>Configuration Settings</h3>

<p>This section covers settings and tuning parameters in the product related to hardening.</p>

<h4><a name="jre-unlimited-strength"></a>Add the unlimited strength policy to the JDK</h4>

<p>To support long passwords when importing PKI from Java Keystores, you will need to install the Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files. This is dependent on the JRE version being used and is available from Oracle. To install, copy the US<em>export</em>policy.jar and local_policy.jar files to the /lib/security directory for the JRE. </p>

<p><strong>Scope</strong>: All Containers</p>

<h4><a name="ignore-cookies"></a>Configure the product to ignore downstream cookies</h4>

<p>This prevents the product from automatically storing and forwarding any cookies retrieved from the downstream APIs and Services.</p>

<p><strong>Scope</strong>: All Containers</p>

<p>In the admin console, configure the following:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">com.soa.http.client.core -&gt;
http.client.params.cookiePolicy=ignoreCookies
</code></pre></div>
<h4><a name="secure-cookies"></a>Configure secure cookies</h4>

<p>This sets the product to only use secure cookies. </p>

<p><strong>Scope</strong>: All Containers</p>

<p>In the admin console, configure the following:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">com.soa.transport.jetty -&gt;
session.manager.factory.secureCookies=true
</code></pre></div>
<h4><a name="restrict-cipher-suites"></a>Restrict the cipher suites used</h4>

<p>Use only stronger cipher suites for SSL</p>

<p><strong>Scope</strong>: All Containers</p>

<p>In the admin console, configure the following:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">com.soa.transport.jetty -&gt;
http.incoming.transport.config.cipherSuites=SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,TLS_RSA_WITH_AES_128_CBC_SHA,TLS_DHE_DSS_WITH_AES_128_CBC_SHA,SSL_RSA_WITH_3DES_EDE_CBC_SHA,SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA
</code></pre></div>
<h4><a name="nd-header-propagation"></a>Header Propagation in Network Director</h4>

<p>Prevent the automatic propagation of certain HTTP headers through the Network Director and also configure a translation of the X-Forwarded-Host header. </p>

<p><strong>Scope</strong>: Network Director Containers</p>

<p>In the admin console, configure the following:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">com.soa.http.client.core -&gt;
block.headers.interceptor.blocked=content-type,content-length,content-range,content-md5,host,expect,keep-alive,connection,transfer-encoding,atmo-forward-to,atmo-forwarded-from

header.formatter.interceptor.templates=replace=X-Forwarded-Host:{host}
</code></pre></div>
<h4><a name="cm-header-propagation"></a>Header Propagation in Community Manager Subsystem</h4>

<p>Prevent the automatic propagation of certain HTTP headers through the Network Director and also configure a NULL (none) translation of the X-Forwarded-Host header. </p>

<p><strong>Scope</strong>: Community Manager Containers</p>

<p>In the admin console, configure the following:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">com.soa.http.client.core -&gt;
block.headers.interceptor.blocked=content-type,content-length,content-range,content-md5,host,expect,keep-alive,connection,transfer-encoding

header.formatter.interceptor.templates=
</code></pre></div>
<h4><a name="credential-cache"></a>Tune the API Security Credential Cache</h4>

<p>You can configure the expiration period and refresh time for the security cache for API calls.</p>

<p><strong>Scope</strong>: Network Director Containers</p>

<p>In the admin console, optionally configure the following:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">com.soa.api.security -&gt;
com.soa.api.security.cache.expirationPeriod=3600000
com.soa.api.security.cache.refreshTime=300000
</code></pre></div>
				</div>
				<!-- main content ends here -->
			</div>
			</div>			
</div>			
			<!-- starts footer -->

			<footer id="footer">
			  <div class="container">
			    <div class="row" id="div0">
			      <div class="col-sm-3 top48">
			        <div class="wrapper" id="div1">
			          <ul id="ul0">
			            <li><strong>Solutions</strong></li>
			            <li><a href="http://soa.com/solution/api-management">API Management</a></li>
			            <li><a href="http://soa.com/solutions/api-security">API Security</a></li>
			            <li><a href="http://soa.com/solutions/mobile-application-gateway">Mobile Application Gateway</a></li>
			            <li><a href="http://soa.com/solutions/integrated_soa_governance">Integrated SOA Governance</a></li>
			            <li><a href="http://soa.com/solutions/application-services-governance">Application Services Governance</a></li>
			            <li><a href="http://soa.com/solution/reinvent-datacenter-with-apis">DataCenter API Platform</a></li>
			            <li><a href="http://soa.com/solutions/microsoft_and_soa_software">Microsoft APIs &amp; SOA</a></li>
			            <li><a href="http://soa.com/solutions/ibm_datapower_governance">IBM APIs &amp; SOA</a></li>
			            <li><a href="http://soa.com/solutions/sola/enterprise_soa_and_the_mainframe_solutions">Mainframe APIs &amp; SOA</a></li>
						<li><a href="http://soa.com/solutions/semantics-management">Metadata Management</a></li>
			          </ul>
			        </div>
			      </div>
			      <div class="col-sm-3 top48">
			        <div class="wrapper" id="div2">
			          <ul id="ul1">
			            <li><strong>Products</strong></li>
			 	    <li><a href="http://soa.com/solutions/api-gateway">API Gateway</a></li>
			            <li><a href="http://soa.com/products/community-manager">Community Manager</a></li>
			            <li><a href="http://soa.com/products/lifecycle_manager">Lifecycle Manager</a></li>
			            <li><a href="http://soa.com/products/policy_manager">Policy Manager</a></li>
			            <li><a href="http://soa.com/products/oauth-server">OAuth Server</a></li>
			          </ul>
			        </div>
			      </div>
			      <div class="col-sm-2 top48">
			        <div class="wrapper" id="div3">
			          <ul id="ul2">
			            <li><strong>Resources</strong></li>
			            <li><a href="http://resource.soa.com/">Resource Center</a></li>
			            <li><a href="http://resource.soa.com/resource/whitepaper/ebook-building-successful-apis">API eBook</a></li>
			            <li><a href="http://resource.soa.com/resource/White-Papers">White Papers</a></li>
			            <li><a href="http://resource.soa.com/resource/datasheets">Datasheets</a></li>
			            <li><a href="http://resource.soa.com/resource/Videos">Videos</a></li>
			            <li><a href="http://docs.soa.com" rel="external">Documentation</a></li>

			                                               <li class="partners-footer-holder"><strong>Support</strong></li>
									<li><a href="http://support.soa.com">Customer Support</a></li>
								
			          </ul>
			        </div>
			      </div>
			      <div class="col-sm-2 top48">
			        <div class="wrapper" id="div4">
			          <ul id="ul3">
			            <li><strong>News &amp; Events</strong></li>
			            <li><a href="http://soa.com/news/press-releases">Press releases</a></li>
			            <li><a href="http://soa.com/news/in_the_news">In the News</a></li>
			               

			 <li class="partners-footer-holder"><strong>Partners</strong></li>
			            <li><a href="http://soa.com/partners/soa_software_partners">Partner program</a></li>
			            <li><a href="http://soa.com/partners/partners_distribute_resell_consult">Distributors and Resellers</a></li>
			</ul>



			        </div>
			      </div>




			      <div class="col-sm-2 top48">
			        <div class="wrapper" id="div5">
			          <ul id="ul4">
			            <li><strong>Company</strong></li>
			            <li><a href="http://soa.com/company/executive_list">Executive Team</a></li>
			            <li><a href="http://soa.com/company/board_list">Board of Directors</a></li>
			            <li><a href="http://soa.com/company/customers">Customers</a></li>
			            <li><a href="http://soa.com/company/awards">Awards</a></li>
			            <li><a href="http://soa.com/company/careers">Careers</a></li>
			            <li><a href="http://soa.com/company/contact_us">Contact Us</a></li>
			            <li><a href="http://blog.soa.com/">Blog</a></li>
			          </ul>
			        </div>
			      </div>
			    </div>
			  </div>
			  <div class="row credits" id="div6">
			    <div class="col-md-12">
			      <div class="row social">
			        <div class="col-md-12"> <a href="https://www.facebook.com/SOASoftware" class="facebook"> <span class="socialicons ico1"></span> </a> <a href="https://twitter.com/SOASoftwareInc" class="twitter"> <span class="socialicons ico2"></span> </a>  <a href="https://www.linkedin.com/company/soa-software" class="pinterest"> <span class="socialicons ico5"></span> </a>  <a href="http://www.youtube.com/soasoftware" class="behance"> <span class="socialicons ico7"></span> </a> </div>
			      </div>
			      <div class="row copyright" id="div7">
			       
			        <div class="col-md-12"> &copy; 2014 SOA Software, Inc. All rights reserved </div>
			      </div>
			    </div>
			  </div>
			</footer>
			<!-- Scripts -->

			<script>								


			/* do we need this script below? */
			$(".balls").click(function(e) {
			    $("html, body").bind("scroll mousedown DOMMouseScroll mousewheel keyup", function(){
			       $('html, body').stop();
			   });
			    var elem;
			    e.preventDefault();
			    var id = $(this).attr("id");
			    if(id == "scrollBtn1") {
			        elem = "#box-top";
			 }else if(id == "scrollBtn2"){
			     elem = "#box-middle";
			 }else if(id == "scrollBtn3"){
			     elem = "#box-bottom";
			     
			 }
			 $('html, body').animate({
			        scrollTop: $(elem).offset().top - 96
			    }, 1500);
			    return false;
			});


			</script>
			<!--
			<script type="text/javascript"> 
			var debugMode=true;
			var bt_config_project_id = 114;
			var bt_config_default_location = "Home Page";
			var bt_config_btn_placement = "topLeft";
			var bt_config_btn_style = "trans";
			</script>
			<script type="text/javascript" src="http://bugtracker.ripemedia.com/widget/js/embed.js"></script> -->
			<!-- RipeTracker Button END -->
			<div id="soa-control-dc-overlay" class="soa-ui-dc-overlay"></div>
			<script type="text/javascript">
				$(function() {
					$('#soa-control-dc-search-query').lunrSearch({
						indexUrl: '/docs-test/search.json',
						results:  '#soa-control-dc-search-results',
						entries:  '#soa-control-dc-search-result-entries',
						template: '#soa-control-dc-search-results-template'
					});
					$("#soa-control-dc-close-results").click(function(e){
						e.preventDefault();
						$('#soa-control-dc-search-results').hide();
						$('#soa-control-dc-overlay').removeClass('soa-ui-dc-overlay-visible');
					});
					$("#soa-control-dc-overlay").click(function(e){
						e.preventDefault();
						$('#soa-control-dc-search-results').hide();
						$('#soa-control-dc-overlay').removeClass('soa-ui-dc-overlay-visible');
					});
					$(".soa-ui-dc-container-main-left-nav-item-link").click(function(e){
						if ( ! $(this).closest(".soa-ui-dc-container-main-left-nav-inner").length ) {
							$(".soa-ui-dc-container-main-left-nav-item").removeClass('soa-ui-dc-container-main-left-nav-item-selected');
							$(this).parent().addClass('soa-ui-dc-container-main-left-nav-item-selected');
							// $(this).addClass('soa-ui-dc-container-main-left-nav-item-selected');
						}
					});
				});
			</script>

		</div>
	</body>
</html>
