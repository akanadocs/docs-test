---
layout: page
title: Using the MongoDB Support Feature
description: Learn how to redirect the collection of metrics and audit data from the designated Policy Manager Database to the MongoDB Database.
product: sp
category: learn
weight:	3
sub-nav-class: Installation
type: page
nav-title: Using the MongoDB Support Feature
---
<h2 id="top">Using the MongoDB Support Feature</h2>
<p>Learn how to redirect the collection of metrics and audit data from the designated Policy Manager database to the MongoDB database.</p>
<p><a href="using_admin_console.htm" class="button secondary">Using Admin Console</a> <a href="../container_management/container_management.htm" class="button secondary">Managing Containers</a></p>
<h5 class="stamp">Supported Platforms: 8.0</h5> 
<div class = "divider1"></div>



<h3>Table of Contents</h3>
<div id="toc-marker"></div>
<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#step_1_download_and_install_mongodb">Step 1: Download and Install MongoDB</a></li>
  <li><a href="#step_2_create_mongodb_data_folder">Step 2: Create MongoDB Data Folder</a></li>
  <li><a href="#step_3_start_mongob">Step 3: Start MongoDB</a></li>
  <li><a href="#step_4_configure_mongodb_support_plugin">Step 4: Configure MongoDB Support Plug-in</a></li>
</ul>
<div class = "divider1"></div>



<a name="introduction"></a><h3>Introduction</h3>
<p>This plug-in redirects the collection of metrics and audit data from the designated Policy Manager Database (RDBMS) to the MongoDB Database.</p>
<p>Use of this plug-in requires installation of MongoDB.</p>
<p>Redirecting the capture of metrics and auditing data can help to optimize performance by reducing the toll on your designated RDBMS. This is because metrics and roll-up data processes will now occur in MongoDB which will increase performance in the container by reducing query times and CPU/memory overhead.</p>
<ul>
  <li>This plug-in can be used exclusively with the Policy Manager product or in combination with Community Manager and/or Akana Envision.</li>
  <li>Data stored includes Policy Manager Alerts, and all metrics and auditing log data that has a write operation.</li>
  <li>Metrics and audit data collected from Network Director will be stored directly in MongoDB and will not be stored in the designated Policy Manager database (RDBMS). This includes data relating to how an API is performing (response times, error rates, and so forth)</li>
  <li>Alert and audit trail data would be information such as when a specific service changed, who changed it, and the result of the change.</li>
  <li>Audit data can be used both in Community Manager, Policy Manager, and Envision for various charts by configuring a Business Metrics Policy that allows you to configure what focus of data to extract from the payload.</li>
<li>In Policy Manager, logging data for historical charts and logs that can be viewed via the <em>Monitoring</em> tab in Services, Containers, and Contracts will now be fetched from MongoDB.</li>
  <li>The logging data stored in MongoDB can also be used in your own third-party reporting tools.</li>
</ul>
<p><a href="#top">back to top</a></p>



<a name="step_1_download_and_install_mongodb"></a><h3>Step 1: Download and Install MongoDB</h3>
<p>Use of this plug-in requires installation of MongoDB. If you have already installed and started MongoDB skip to Step 4.</p>
<ol>
  <li>Go to <a href="https://www.mongodb.com/akana" title="https://www.mongodb.com/akana" target="_blank">https://www.mongodb.com/akana</a> and download the MongoDB Version 3.2 file for your platform. Windows 64-bit (MSI), Linux 64-bit (TGZ), and Solaris 64-bit (TGZ) are supported. If you are on a Mac, you can install MongoDB with homebrew using <strong>brew install mongo</strong>. We highly recommend that you use MongoDB Enterprise Advanced, especially if you're running the API Gateway to support production or mission-critical applications. MongoDB Enterprise Advanced offers enterprise-grade security, operational automation, proactive support, and disaster recovery to run API Gateway in a secure, reliable and hassle-free way.</li>
  <li>Install MongoDB on your platform.</li>
</ol>
<p><strong>Note</strong>: These instructions provide a basic MongoDB installation approach. Refer to the MongoDB documentation for information on installation instructions and shutdown procedures for your specific deployment: <a href="https://docs.mongodb.org/v3.2/tutorial/manage-mongodb-processes/" title="Link to MongoDB doc" target="_blank">https://docs.mongodb.org/v3.2/tutorial/manage-mongodb-processes/</a>.</p>
<p><a href="#top">back to top</a></p>



<a name="step_2_create_mongodb_data_folder"></a><h3>Step 2: Create MongoDB Data Folder</h3>
<ol>
  <li>Create a MongoDB data folder. The default is <strong>/data/db</strong>. If you prefer to use a different location use <strong>--dbpath</strong>.</li>
</ol>
<p><a href="#top">back to top</a></p>



<a name="step_3_start_mongob"></a><h3>Step 3: Start MongoDB</h3>
<ol>
  <li>Navigate to the MongoDB installation directory:<strong>/MongoDB/Server/3.2/bin</strong></li>
  <li>Enter <strong>mongod</strong>.</li>
  <li>If MongoDB successfully starts, your command window will display the message <strong>waiting for connections</strong> followed by the port number.</li>
</ol>
<p><a href="#top">back to top</a></p>



<a name="step_4_configure_mongodb_support_plugin"></a><h3>Step 4: Configure MongoDB Support Plug-in</h3>
<ol>
  <li>Log in to the <strong>Akana Administration Console</strong> of the target installation container instance using your default credentials.</li>
  <li>On the <strong>Available Features</strong> screen, from the <strong>Filter</strong> menu, select <strong>Plug-ins</strong>.</li>
  <li>Select the <strong>MongoDB Support</strong> plug-in and click <strong>Install Feature</strong>.</li>
  <li>After the installation is complete, click <strong>Configure</strong> and then click <strong>Continue</strong>.</li>
  <li>On the <strong>Configure MongoDB Database</strong> screen, specify the host name and port where the MongoDB database is installed in the MongoClientURI field. The default MongoDB port is 27017.</li>
  <li>Click <strong>Finish</strong>, and then click <strong>OK</strong> to restart the container. The URI is assigned and the system automatically configures seed data and adds schemas.</li>
  <li>After the installation is complete, you can manage (install / uninstall) data sets: On the <strong>Configuration</strong> tab, select <strong>Configure MongoDB Database</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>