---
layout: page
title: Troubleshooting Elasticsearch
description: Some troubleshooting information to help resolve issues with Elasticsearch.
product: sp
category: gs
weight: 09
sub-nav-class: Elasticsearch
type: page
nav-title: Troubleshooting Elasticsearch
---
<h2 id="top">Troubleshooting Elasticsearch</h2>
<p>Some troubleshooting information to help resolve issues with Elasticsearch.</p>
<p>
<a href="install_es_secure_tc.htm" class="button secondary">Configuring Elasticsearch with Security</a> 
<a href="install_es_config.htm" class="button secondary">Installing and Configuring Elasticsearch (2018.0.0 and later)</a>
</p>
<div class = "divider1"></div>



<h3 style="color: gray;">Table of Contents</h3>
<ol class="table_of_contents">
	<li><a href="#es_ts_port_config">Elasticsearch client can't connect to the nodes</a></li>
	<li><a href="#es_config_settings">Elasticsearch search results hang or are not returned</a></li>
</ol>
<div class = "divider1"></div>



<h3 id="es_ts_port_config">Elasticsearch client can't connect to the nodes</h3>
<p>If the Elasticsearch client can't connect to the nodes, and/or the nodes can't connect to each other, check that you have the correct Elasticsearch ports available on every container that the Elasticsearch feature is installed on.</p>
<p>The ports are specific to the mode in use. The defaults are:</p>
<ul>
	<li>RESTClient mode: 9200</li>
	<li>Transport Client mode: 9300</li>
</ul>
<p>However, it depends on what's specified in the Elasticsearch YAML file. Make sure the ports specified in the YAML file are available.</p>
<p>For more information, see <a href="install_es_config.htm#es_yaml">What changes do I need to make to the Elasticsearch YAML file?</a></p>
<p><a href="#top">Back to top</a></p>




<h3 id="es_config_settings">Elasticsearch search results hang or are not returned</h3>
<p>In certain circumstances you might encounter an issue that Elasticsearch search results are not returned, and the search query seems to hang. If restarting the CM container resolves the issue, you could try reducing the default timeout connection settings to help free up connections.</p>
<p>In version 2019.0.0 and later there are additional Elasticsearch security settings that you can modify, if needed, to help resolve Elasticsearch connection issues by modifying the timeout values.</p>
<p>If you have Elasticsearch connections that use a centralized server behind a firewall, it might be possible that the firewall is closing the TCP connection from the CM DMZ containers to the internal Elasticsearch cluster. In this scenario, reducing the timeout value results in CM freeing up those database connections more quickly.</p>
<p>In most cases the default settings should be fine.</p>
<p>Information on the Elasticsearch timeout settings is given below.</p>
<h5>To modify the Elasticsearch timeout values</h5>
<ol>
	<li>Log in to the Akana Administrator Console for the Policy Manager container.</li>
	<li>Go to <strong>Configuration</strong> &gt; <strong>Configuration Categories</strong> and find the <strong>com.akana.es.client.security</strong> category.</li>
	<li>Modify the settings as needed:
		<ul>
			<li><strong>elastic.rest.client.connectTimeout</strong>. Default: 1000.</li>
			<li><strong>elastic.rest.client.socketTimeout</strong>. Default: 30000.</li>
		</ul>
		</li>
</ol>
<p><a href="#top">back to top</a></p>



<div class = "divider1"></div>



<h3 id="related_topics">Related Topics</h3>
<div class="relatedlinks" id="install"><!-- #BeginLibraryItem "/Library/relatedtopics_install.lbi" -->
<ul>
	<li><a href="../upgrade/upgrading_akana_api_platform_84_2018.htm">Upgrading Akana API Platform from Version 8.4x to Version 2018.0.x</a></li>
	<li><a href="../upgrade/upgrading_akana_api_platform_82_84.htm">Upgrading Akana API Platform from Version 8.2 to Version 8.4x</a></li>
	<li><a href="../upgrade/upgrading_min_downtime.htm">Use Case: Upgrading with Minimum Downtime</a></li>
	<li><a href="../upgrade/upgrading_micro.htm">Minor-Version Update Notes</a></li>
</ul>
<ul>
	<li><a href="installing_akana_api_platform_all.htm">Installing the Akana API Platform (all versions)</a></li>
	<li><a href="implementation_planning.htm">Planning Your Implementation</a></li>
	<li><a href="install_cm_jython_script.htm">Installation Jython Script</a></li>
	<li><a href="install_es_config.htm">Installing and Configuring Elasticsearch</a></li>
	<li><a href="install_es_secure_tc.htm">Configuring Elasticsearch with Security</a></li>
</ul><!-- #EndLibraryItem --></div>