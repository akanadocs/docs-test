{"swagger":"2.0","info":{"title":"Health Service","description":"<p>The Health Service provides an API to manage and query any health-related measurable attributes\nin the system.</p>","version":"0.0.0"},"host":"0.0.0.0","basePath":"/admin/health","schemes":["https","http"],"tags":[{"name":"JAXRSHealthService"}],"paths":{"/measurables":{"get":{"tags":["JAXRSHealthService"],"operationId":"getMeasurables","produces":["application/json"],"responses":{"default":{"schema":{"$ref":"#/definitions/healthMeasurableMetadata"}}},"deprecated":false},"post":{"tags":["JAXRSHealthService"],"description":"<p>Adds a health configuration.\nA health configuration is comprised of a set of standard Monitorable attributes defined\nusing the OSGi MonitorAdmin service interfaces.  A health configuration allows attributes\nfrom different Monitorable instances to be combined into a hierarchy, and thresholds may\nthen be placed on those attributes.  The state of the hierarchy will then reflect the combined\nstate of all the component attributes with respect to their configured thresholds.</p>\n<h4>Request:</h4>\n<pre><code>POST /admin/health HTTP/1.1\nContent-Type: application/json\n\n{\"name\":\"My Health Variables\"}\n</code></pre>\n<h4>Responses:</h4>\n<ul>\n<li>HTTP/1.1 201 Created</li>\n<li>HTTP/1.1 300 Bad Request if a name or ID is not provided by the client</li>\n</ul>\n<h4>Sample Response:</h4>\n<pre><code>201 Created\nContent-Type: application/json\nLocation: http://localhost:9905/admin/health/measurables/my.health.variables\n\n{\n  \"id\" : \"my.health.variables\",\n  \"name\" : \"My Health Variables\",\n  \"state\" : \"NORMAL\",\n  \"attributes\" : [ ],\n  \"children\" : [ ],\n  \"editable\" : true,\n  \"links\" : [ {\n    \"rel\" : \"self\",\n    \"href\" : \"http://localhost:9905/admin/health/measurables/my.health.variables\"\n  }, {\n    \"rel\" : \"brief\",\n    \"href\" : \"http://localhost:9905/admin/health/measurables/my.health.variables?brief=true\"\n  }, {\n    \"rel\" : \"children\",\n    \"href\" : \"http://localhost:9905/admin/health/measurables/my.health.variables/children\"\n  }, {\n    \"rel\" : \"values\",\n    \"href\" : \"http://localhost:9905/admin/health/measurables/my.health.variables/values\"\n  } ]\n}\n</code></pre>","operationId":"createConfiguration","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/healthMeasurableMetadata"}}],"responses":{"default":{"schema":{"$ref":"#/definitions/healthMeasurableMetadata"}}},"deprecated":false}},"/measurables/{id}":{"delete":{"tags":["JAXRSHealthService"],"operationId":"deleteMetadata","parameters":[{"in":"path","name":"id","type":"string","required":true}],"responses":{"default":{}},"deprecated":false},"get":{"tags":["JAXRSHealthService"],"operationId":"getMetadataDetail","produces":["application/json"],"parameters":[{"in":"path","name":"id","type":"string","required":true},{"in":"query","name":"normal-status","type":"string"},{"in":"query","name":"warning-status","type":"string"},{"in":"query","name":"failure-status","type":"string"},{"in":"query","name":"children","type":"boolean"},{"in":"query","name":"brief","type":"boolean"}],"responses":{"default":{"schema":{"$ref":"#/definitions/healthMeasurableMetadata"}}},"deprecated":false}},"/measurables/{id}/configuration":{"put":{"tags":["JAXRSHealthService"],"operationId":"updateOptions","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"id","type":"string","required":true},{"in":"body","name":"body","schema":{"$ref":"#/definitions/options"}}],"responses":{"default":{"schema":{"$ref":"#/definitions/options"}}},"deprecated":false},"get":{"tags":["JAXRSHealthService"],"operationId":"getOptions","produces":["application/json"],"parameters":[{"in":"path","name":"id","type":"string","required":true}],"responses":{"default":{"schema":{"$ref":"#/definitions/options"}}},"deprecated":false}},"/measurables/{parent}/children/{child}/variables/{var}/threshold":{"put":{"tags":["JAXRSHealthService"],"operationId":"updateThreshold","produces":["application/json"],"parameters":[{"in":"path","name":"parent","type":"string","required":true},{"in":"path","name":"child","type":"string","required":true},{"in":"path","name":"var","type":"string","required":true},{"in":"body","name":"body","schema":{"$ref":"#/definitions/threshold"}}],"responses":{"default":{"schema":{"$ref":"#/definitions/threshold"}}},"deprecated":false},"get":{"tags":["JAXRSHealthService"],"operationId":"getThreshold","produces":["application/json"],"parameters":[{"in":"path","name":"parent","type":"string","required":true},{"in":"path","name":"child","type":"string","required":true},{"in":"path","name":"var","type":"string","required":true}],"responses":{"default":{"schema":{"$ref":"#/definitions/threshold"}}},"deprecated":false}},"/available":{"get":{"tags":["JAXRSHealthService"],"operationId":"getAvailable","produces":["application/json"],"responses":{"default":{"schema":{"$ref":"#/definitions/healthMeasurableMetadata"}}},"deprecated":false}},"/measurables/{parent}/children/{child}":{"delete":{"tags":["JAXRSHealthService"],"operationId":"deleteMetadataChild","parameters":[{"in":"path","name":"parent","type":"string","required":true},{"in":"path","name":"child","type":"string","required":true}],"responses":{"default":{}},"deprecated":false},"put":{"tags":["JAXRSHealthService"],"operationId":"updateMetadataChild","produces":["application/json"],"parameters":[{"in":"path","name":"parent","type":"string","required":true},{"in":"path","name":"child","type":"string","required":true},{"in":"body","name":"body","schema":{"$ref":"#/definitions/healthMeasurableMetadata"}}],"responses":{"default":{"schema":{"$ref":"#/definitions/healthMeasurableMetadata"}}},"deprecated":false},"get":{"tags":["JAXRSHealthService"],"operationId":"getMetadataChild","produces":["application/json"],"parameters":[{"in":"path","name":"parent","type":"string","required":true},{"in":"path","name":"child","type":"string","required":true}],"responses":{"default":{"schema":{"$ref":"#/definitions/healthMeasurableMetadata"}}},"deprecated":false}},"/measurables/{id}/children":{"put":{"tags":["JAXRSHealthService"],"operationId":"setMetadataChildren","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"id","type":"string","required":true},{"in":"body","name":"body"}],"responses":{"default":{"schema":{"$ref":"#/definitions/healthMeasurableSet"}}},"deprecated":false},"get":{"tags":["JAXRSHealthService"],"operationId":"getMetadataChildren","produces":["application/json"],"parameters":[{"in":"path","name":"id","type":"string","required":true}],"responses":{"default":{"schema":{"$ref":"#/definitions/healthMeasurableSet"}}},"deprecated":false}},"/measurables/{parent}/children/{child}/variables/{var}":{"get":{"tags":["JAXRSHealthService"],"operationId":"getVariable","produces":["application/json"],"parameters":[{"in":"path","name":"parent","type":"string","required":true},{"in":"path","name":"child","type":"string","required":true},{"in":"path","name":"var","type":"string","required":true}],"responses":{"default":{"schema":{"$ref":"#/definitions/monitoredAttribute"}}},"deprecated":false}},"/measurables/{id}/values":{"get":{"tags":["JAXRSHealthService"],"operationId":"getMeasurableValues","produces":["application/json"],"parameters":[{"in":"path","name":"id","type":"string","required":true}],"responses":{"default":{"schema":{"$ref":"#/definitions/nameValue"}}},"deprecated":false}},"/":{"get":{"tags":["JAXRSHealthService"],"operationId":"getMetadata","produces":["application/json","application/xml"],"responses":{"default":{"schema":{"$ref":"#/definitions/healthMeasurableSet"}}},"deprecated":false}}},"definitions":{"nameValue":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"name":{"type":"string"},"state":{"type":"string"},"timestamp":{"type":"integer","format":"int64"},"value":{"type":"string"}}},"options":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["enableAuth"],"properties":{"enableAuth":{"type":"boolean"},"links":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/atomLink"}}}},"healthMeasurableMetadata":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"id":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"},"state":{"type":"string"},"childCount":{"type":"string"},"attributes":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/monitoredAttribute"}},"children":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/healthMeasurableMetadata"}},"editable":{"type":"boolean"},"options":{"$ref":"#/definitions/options"},"links":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/atomLink"}}}},"atomLink":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["href"],"properties":{"length":{"type":"string"},"title":{"type":"string"},"hreflang":{"type":"string"},"rel":{"type":"string"},"type":{"type":"string"},"href":{"type":"string","format":"uri"}}},"healthMeasurableSet":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"links":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/atomLink"}},"measurables":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/healthMeasurableMetadata"}}}},"threshold":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"normal":{"type":"string"},"warning":{"type":"string"},"failure":{"type":"string"},"links":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/atomLink"}}}},"monitoredAttribute":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"type":{"type":"string"},"units":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"},"description":{"type":"string"},"threshold":{"$ref":"#/definitions/threshold"},"state":{"type":"string"},"value":{"type":"string"},"links":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/atomLink"}}}}}}