{"swagger":"2.0","info":{"title":"Alert Management API","description":"The API used to report and manage alerts.","version":"8.0.0"},"host":"0.0.0.0","basePath":"/rest","schemes":["http","https"],"tags":[{"name":"AlertService"}],"paths":{"/alerts/{id}/workflow":{"put":{"tags":["AlertService"],"summary":"Perform Workflow Action","operationId":"performWorkflowAction","consumes":["application/json","application/xml","text/xml"],"parameters":[{"in":"path","name":"id","description":"ID of the alert to perform the action on.","type":"string","required":true},{"in":"body","name":"body","description":"The action to perform.","required":true,"schema":{"$ref":"#/definitions/alertWorkflowAction"}}],"responses":{"default":{}},"deprecated":false}},"/alerts/{id}":{"delete":{"tags":["AlertService"],"summary":"Delete Alert","operationId":"deleteAlert","parameters":[{"in":"path","name":"id","description":"ID of the alert to delete.","type":"string","required":true}],"responses":{"default":{}},"deprecated":false}},"/alerts":{"get":{"tags":["AlertService"],"summary":"Get Alerts","description":"<p>Retrieves the alerts meeting the given criteria. The following usage example illustrates a query for all UNOBSERVED alerts reported against service with the\nkey uddi:f996a248-f061-11e4-924f-f8246128b60a with a severity of MAJOR or CRITICAL that were generated between 2015-05-01T16:21:17 and now. It also illustrates\npaging by asking for records starting from position 50 and to only return 50 records.</p>\n<h4>Request:</h4>\n<pre><code>GET /rest/alerts?state=UNOBSERVED&amp;source=uddi:f996a248-f061-11e4-924f-f8246128b60a&amp;severity=1&amp;severity=2&amp;from=2015-05-01T16:21:17&amp;start=50&amp;count=50 HTTP/1.1\n</code></pre>\n<h4>Response:</h4>\n<pre><code>HTTP/1.1 200 OK\n{\n    \"totalCount\" : \"50\",\n    \"records\" : [\n        {\n            \"id\" : \"1010\",\n            \"alertType\" : \"1\",\n            \"alertCode\" : \"1000000\",\n            \"alertCodeInfo\" : {\n                \"severity\" : \"2\",\n                \"description\" : \"Policy enforcement failure\",\n                \"componentName\" : \"Policy Handler Framework\",\n                \"subsystemName\" : \"General\",\n                \"sendEmailEnabled\" : \"true\",\n                \"snmpTrapEnabled\" : \"false\"\n            }\n            \"description\" : \"Problem executing custom policy.\",\n            \"generatedAt\" : \"2015-05-01T16:21:18\"\n            \"source\" : {\n                \"sourceType\" : \"1\",\n                \"source\" : \"uddi:f996a248-f061-11e4-924f-f8246128b60a\",\n                \"sourceName\" : \"General\\\n            }\n            \"transaction\" : {\n                \"OperationInvocation\" : {\n                    \"operationName\" : \"op1\",\n                    \"operationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b61b\",\n                    \"serviceName\" : \"Service1\",\n                    \"serviceKey\"uddi:f996a248-f061-11e4-924f-f8246128b60a\",\n                    \"contractName\" : \"Anonymous Access\",\n                    \"contractKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b53c\",\n                    \"organizationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246127d45a\n                }\n           }\n           \"workflow\" : {\n               \"state\" : \"UNOBSERVED\n               \"receivedAt\" : \"2015-05-01T16:21:18\",\n           }\n           \"alertDispatchStatus\" : {\n               \"dispatched\" : \"false\"\n           }\n       },\n       ... not shown for brevity ...\n    ],  \n    \"listIncomplete\" : \"true\"\n}\n</code></pre>\n<p>The <em>listIncomplete</em> field in the response indicates there are more records beyond the 50 that match the given criteria.</p>","operationId":"getAlerts","produces":["application/json","application/xml","text/xml"],"parameters":[{"in":"query","name":"code","description":"Alert code to filter on.","type":"string","required":false},{"in":"query","name":"source","description":"Source of the alerts to filter on.","type":"string","required":false},{"in":"query","name":"org","description":"Organization key to filter on.","type":"string","required":false},{"in":"query","name":"from","description":"Date at which only alerts generated after will be returned. ISO-8601 format","type":"string","required":false},{"in":"query","name":"to","description":"Date at which only alerts generated before will be returned. ISO-8601 format","type":"string","required":false},{"in":"query","name":"severity","description":"Severities of the alerts to filter on.","type":"string","required":false},{"in":"query","name":"state","description":"States of the alerts to filter on.","type":"string","required":false},{"in":"query","name":"actor","description":"Indicates only alerts that the user with the given username performed a workflow action on should be returned.","type":"string","required":false},{"in":"query","name":"start","description":"To page the results this integer indicates the first alert from the full result set to return as the first item of the page.","type":"integer","required":false},{"in":"query","name":"count","description":"To page the results this integer indicates the number of items thatshould be returned in the page.","type":"integer","required":false}],"responses":{"default":{"schema":{"$ref":"#/definitions/alertList"}}},"deprecated":false},"post":{"tags":["AlertService"],"summary":"Add Alert","description":"<p>Adds/reports an alert. An alert is defined by its type, a code, and a source. The alert's type is a numeric value, 0 is for a basic alert, 1 is\nfor a service alert, and 3 is for an SLA alert. The alert code identifies a particular event or condition that has been detected. The source of\nthe alert is the entity the alert is about. There are several types of alert sources which are identified with a numeric value.</p>\n<ul>\n<li>unknown</li>\n<li>service</li>\n<li>operation</li>\n<li>contract</li>\n<li>organization</li>\n<li>endpoint</li>\n<li>container</li>\n</ul>\n<p>Each type of source may have a different type of identifier or key used in the <em>source</em> property. The\n<em>sourceName</em> property provides a functional area that can be used to group or categorize the alerts. An\nalert may also be tied to a transaction, or action performed in the system. The most common transaction\nto be associated with alerts is an operation invocation.</p>\n<p>The following example illustrates adding a service alert:</p>\n<h4>Request:</h4>\n<pre><code>POST /rest/alerts HTTP/1.1\nContent-Type: application/json\n\n{\n    \"alertType\" : \"1\",\n    \"alertCode\" : \"1000000\",\n    \"description\" : \"Problem executing custom policy.\",\n    \"generatedAt\" : \"2015-05-01T16:21:18\",\n    \"source\" : {\n        \"sourceType\" : \"1\",\n        \"source\" : \"uddi:f996a248-f061-11e4-924f-f8246128b60a\",\n        \"sourceName\" : \"General\"\n    }\n    \"transaction\" : {\n        \"OperationInvocation\" : {\n            \"operationName\" : \"op1\",\n            \"operationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b61b\",\n            \"serviceName\" : \"Service1\",\n            \"serviceKey\"uddi:f996a248-f061-11e4-924f-f8246128b60a\",\n            \"contractName\" : \"Anonymous Access\",\n            \"contractKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b53c\",\n            \"organizationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246127d45a\n        }\n    }\n}\n</code></pre>\n<h4>Response:</h4>\n<pre><code>HTTP/1.1 200 OK\n{\n    \"id\" : \"1010\",\n    \"alertType\" : \"1\",\n    \"alertCode\" : \"1000000\",\n    \"alertCodeInfo\" : {\n        \"severity\" : \"2\",\n        \"description\" : \"Policy enforcement failure\",\n        \"componentName\" : \"Policy Handler Framework\",\n        \"subsystemName\" : \"General\",\n        \"sendEmailEnabled\" : \"true\",\n        \"snmpTrapEnabled\" : \"false\"\n    }\n    \"description\" : \"Problem executing custom policy.\",\n    \"generatedAt\" : \"2015-05-01T16:21:18\"\n    \"source\" : {\n        \"sourceType\" : \"1\",\n        \"source\" : \"uddi:f996a248-f061-11e4-924f-f8246128b60a\",\n        \"sourceName\" : \"General\\\n    }\n    \"transaction\" : {\n        \"OperationInvocation\" : {\n            \"operationName\" : \"op1\",\n            \"operationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b61b\",\n            \"serviceName\" : \"Service1\",\n            \"serviceKey\"uddi:f996a248-f061-11e4-924f-f8246128b60a\",\n            \"contractName\" : \"Anonymous Access\",\n            \"contractKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b53c\",\n            \"organizationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246127d45a\n        }\n    }\n    \"workflow\" : {\n      \"state\" : \"UNOBSERVED\n      \"receivedAt\" : \"2015-05-01T16:21:18\",\n    }\n    \"alertDispatchStatus\" : {\n        \"dispatched\" : \"false\"\n    }\n}\n</code></pre>\n<p>Note the <em>id</em> property is not provided in the request but is provided in the response message. The <em>id</em> can then be used when performing workflow actions.\nAdditional information about the alert derived from the alert code specified is added by the system. Of note the severity of the alert is\ndictated by the alert code. The severity is a numeric value and may be one of the following:</p>\n<ul>\n<li>CRITICAL</li>\n<li>MAJOR</li>\n<li>MINOR</li>\n<li>NORMAL</li>\n<li>CLEAR</li>\n</ul>\n<p>The workflow is also auto-generated and provided in the response where it indicates the initial state and when the system received the record. And finally\na dispatch status may be added if the alert code requires any sort of dispatch.</p>","operationId":"addAlert","consumes":["application/json","application/xml","text/xml"],"produces":["application/json","application/xml","text/xml"],"parameters":[{"in":"body","name":"body","description":"The alert to add.","required":true,"schema":{"$ref":"#/definitions/alert"}}],"responses":{"default":{"schema":{"$ref":"#/definitions/alert"}}},"deprecated":false}},"/alerts/{id}/comments":{"post":{"tags":["AlertService"],"summary":"Add Comment","operationId":"addComment","consumes":["application/json","application/xml","text/xml"],"produces":["application/json","application/xml","text/xml"],"parameters":[{"in":"path","name":"id","description":"ID of the alert to comment on.","type":"string","required":true},{"in":"body","name":"body","description":"Comment being made. Includes the text of the commentas well as the user who made the comment and when it was made.","required":true,"schema":{"$ref":"#/definitions/alertComment"}}],"responses":{"default":{"schema":{"$ref":"#/definitions/alertComment"}}},"deprecated":false}},"/alertcodes/{code}":{"get":{"tags":["AlertService"],"summary":"Get Alert Code Details","operationId":"getAlertCode","produces":["application/json","application/xml","text/xml"],"parameters":[{"in":"path","name":"code","description":"Alert code.","type":"integer","required":true}],"responses":{"default":{"schema":{"$ref":"#/definitions/alertCode"}}},"deprecated":false}}},"definitions":{"AlerstDispatchStatus":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["dispatched"],"properties":{"dispatched":{"type":"boolean"},"emailStatus":{"$ref":"#/definitions/EmailStatus"},"commandStatus":{"$ref":"#/definitions/CommandStatus"},"snmpStatus":{"$ref":"#/definitions/SnmpStatus"}}},"alertCode":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["alertCode","severity","sendSNMPTrap","sendEmail","logAlert","commandId","userAlert"],"properties":{"alertCode":{"type":"string"},"componentName":{"type":"string"},"subsystemName":{"type":"string"},"severity":{"type":"string"},"description":{"type":"string"},"additionalInfo":{"type":"string"},"sendSNMPTrap":{"type":"boolean"},"sendEmail":{"type":"boolean"},"logAlert":{"type":"boolean"},"commandId":{"type":"string"},"scriptName":{"type":"string"},"EmailDests":{"type":"array","minItems":0,"items":{"type":"string"}},"userAlert":{"type":"boolean"}}},"alertWorkflow":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"state":{"enum":["UNOBSERVED","OBSERVED","RESOLVED"],"type":"string"},"receivedAt":{"type":"string","format":"date-time"},"observedBy":{"type":"string"},"observedAt":{"type":"string","format":"date-time"},"resolvedBy":{"type":"string"},"resolvedAt":{"type":"string","format":"date-time"},"Comments":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/alertComment"}}}},"alertSource":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["sourceType"],"properties":{"sourceType":{"type":"string"},"source":{"type":"string"},"sourceName":{"type":"string"}}},"alertComment":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["commentId"],"properties":{"comment":{"type":"string"},"userName":{"type":"string"},"createdDts":{"type":"string","format":"date-time"},"commentId":{"type":"integer","format":"int64"}}},"EmailStatus":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["executed"],"properties":{"executed":{"type":"boolean"},"executionDate":{"type":"string","format":"date-time"}}},"alertSlaInfo":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["ruleValue","measuredValue"],"properties":{"attachmentPointType":{"type":"string"},"attachmentPointKey":{"type":"string"},"policyKey":{"type":"string"},"policyName":{"type":"string"},"ruleKey":{"type":"string"},"ruleMetricName":{"type":"string"},"ruleOperator":{"type":"string"},"ruleValue":{"type":"integer","format":"int64"},"ruleValueUnit":{"type":"string"},"measuredValue":{"type":"number","format":"double"},"startTime":{"type":"string","format":"date-time"},"endTime":{"type":"string","format":"date-time"},"ruleValueInterval":{"type":"string"}}},"alertList":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["totalCount","Alerts","listIncomplete"],"properties":{"totalCount":{"type":"string"},"Alerts":{"type":"array","minItems":1,"items":{"$ref":"#/definitions/alert"}},"listIncomplete":{"type":"boolean"}}},"alertWorkflowAction":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"action":{"enum":["OBSERVE","RESOLVE","UNRESOLVE","UNOBSERVE"],"type":"string"},"comment":{"type":"string"},"userName":{"type":"string"}}},"SnmpStatus":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["executed"],"properties":{"executed":{"type":"boolean"},"executionDate":{"type":"string","format":"date-time"}}},"alert":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["alertType","alertCode"],"properties":{"id":{"type":"string"},"alertType":{"type":"string"},"alertCode":{"type":"string"},"alertCodeInfo":{"$ref":"#/definitions/alertCodeInfo"},"description":{"type":"string"},"generatedAt":{"type":"string","format":"date-time"},"source":{"$ref":"#/definitions/alertSource"},"transaction":{"$ref":"#/definitions/alertTransaction"},"workflow":{"$ref":"#/definitions/alertWorkflow"},"containerKey":{"type":"string"},"alertSlaInfo":{"$ref":"#/definitions/alertSlaInfo"},"alertDispatchStatus":{"$ref":"#/definitions/AlerstDispatchStatus"}}},"alertCodeInfo":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["severity","sendEmailEnabled","snmpTrapEnabled"],"properties":{"severity":{"type":"string"},"description":{"type":"string"},"componentName":{"type":"string"},"subsystemName":{"type":"string"},"additionalInfo":{"type":"string"},"sendEmailEnabled":{"type":"boolean"},"snmpTrapEnabled":{"type":"boolean"},"ScriptCommand":{"type":"string"}}},"alertTransaction":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{}},"CommandStatus":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["executed"],"properties":{"executed":{"type":"boolean"},"executionDate":{"type":"string","format":"date-time"}}}}}