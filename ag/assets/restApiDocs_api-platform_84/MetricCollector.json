{"swagger":"2.0","info":{"title":"Metrics Collection API","description":"This API is used to report metrics, audit, and transaction data.","version":"8.0.0"},"host":"0.0.0.0","basePath":"/rest","schemes":["http","https"],"tags":[{"name":"MetricCollector"}],"paths":{"/publish/usage":{"post":{"tags":["MetricCollector"],"summary":"Report audit information about a specific message exchange.","description":"<p>Uploads audit information about a specific message exchange. A usage example is as follows:</p>\n<h4>Sample Request</h4>\n<pre><code>POST /rest/monitor/publish/usage HTTP/1.1\nContent-Type: application/json\n\n{\n    \"usageDatas\" : [ {\n        \"bindingTemplateKey\" : \"uddi:f0d941be-b8a6-11e5-a824-b68f99c42d0e\",\n        \"bindingTemplateId\" : 2252,\n        \"contractKey\" : \"952c7a3e-b8a6-11e5-a824-b68f99c42d0e:1012\",\n        \"contractId\" : 0,\n        \"eventId\" : \"7b072b28-b8ef-11e5-a582-fac2dcd786a5\",\n        \"operationuuid\" : \"f0bc6ae7-b8a6-11e5-a824-b68f99c42d0e\",\n        \"operationId\" : 0,\n        \"serviceKey\" : \"uddi:f09a63f3-b8a6-11e5-a824-b68f99c42d0e\",\n        \"serviceId\" : 0,\n        \"organizationKey\" : \"uddi:8ca53fe5-b8a6-11e5-a824-b68f99c42d0e\",\n        \"organizationId\" : 0,\n        \"containerKey\" : \"793475ab-f688-487a-820b-c12dfc26\",\n        \"usageMessages\" : [ {\n            \"eventId\" : \"7b072b28-b8ef-11e5-a582-fac2dcd786a5\",\n            \"sequence\" : 0,\n            \"messageName\" : \"APPLICATION\",\n            \"msgDate\" : 1452577440544,\n            \"message\" : \"&amp;lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" ...\",\n            \"contentType\" : \"text/xml;charset=UTF-8\",\n            \"transportHeaders\" : \"POST /shoepos HTTP/1.1 ...\",\n            \"type\" : \"request\",\n            \"completeMessage\" : true\n        }, {\n            \"eventId\" : \"7b072b28-b8ef-11e5-a582-fac2dcd786a5\",\n            \"sequence\" : 1,\n            \"messageName\" : \"APPLICATION\",\n            \"msgDate\" : 1452577440553,\n            \"message\" : \"&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" ...\",\n            \"contentType\" : \"text/xml;charset=UTF-8\",\n            \"transportHeaders\" : \"HTTP/1.1 200 ...\",\n            \"type\" : \"response\",\n            \"completeMessage\" : true\n        } ],\n        \"nextHopInfos\" : [ {\n            \"url\" : \"http://localhost:8088/shoepos\",\n            \"requestDts\" : 1452577440545,\n            \"responseTime\" : 7\n        } ],\n        \"host\" : \"127.0.0.1\",\n        \"groupId\" : \"793475ab-f688-487a-820b-c12dfc26\",\n        \"clientIP\" : \"127.0.0.1\",\n        \"requestDtsCal\" : 1452577440543,\n        \"responseTime\" : 10,\n        \"reqMsgSize\" : 531,\n        \"respMsgSize\" : 270,\n        \"nextHopUrl\" : \"http://localhost:8088/shoepos\",\n        \"isSoapFaultByMP\" : false,\n        \"isSoapFaultByNextHop\" : false,\n        \"errCategory\" : 0,\n        \"listenerUrl\" : \"http://localhost:9905/shoepos\",\n        \"timeTakenByNextHopInMS\" : 7,\n        \"evaluationPointResult\" : false,\n        \"virtualService\" : true,\n        \"normalizedReqMsgSize\" : 0,\n        \"normalizedRespMsgSize\" : 0,\n        \"otherUsernames\" : {\n        },\n        \"verb\" : \"POST\",\n        \"statusCode\" : \"200\",\n        \"isQosViolationFault\" : false,\n        \"uniqueKey\" : \"f0bc6ae7-b8a6-11e5-a824-b68f99c42d0euddi:f0d941be-b8a6-11e5-a824-b68f99c42d0e952c7a3e-b8a6-11e5-a824-b68f99c42d0e:1012**\"\n    } ]\n}\n</code></pre>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nsuccess\n</code></pre>\n<p>In this example a single record is reported in the &ldquo;usageDatas&rdquo; array.</p>","operationId":"publishUsage","consumes":["application/json"],"produces":["text/plain"],"parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/auditDataCollection"}}],"responses":{"default":{"schema":{"type":"string"}}},"deprecated":false}},"/publish/custom/rollup":{"post":{"tags":["MetricCollector"],"summary":"Internally used interface. Not supported for public use.","description":"Internally used interface. Not supported for public use.","operationId":"publishCustomMetric","consumes":["application/json"],"produces":["text/plain"],"parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/customRollupData"}}],"responses":{"default":{"schema":{"type":"string"}}},"deprecated":false}},"/publish/transactions":{"post":{"tags":["MetricCollector"],"summary":"Report one or more multi-service transactions executed during a given time period.","description":"<p>Uploads information about one or more multi-service transactions executed during a given time period. A usage example is as follows:</p>\n<h4>Sample Request</h4>\n<pre><code>POST /rest/monitor/publish/operation/rollup HTTP/1.1\nContent-Type: application/json\n\n{\n    \"transactionDatas\" : [ {\n        \"serviceId\" : 0,\n        \"serviceKey\" : \"uddi:d1ba2a33-b957-11e5-a824-b68f99c42d0e\",\n        \"transactionId\" : \"181ce475-b95a-11e5-a186-ab2406d90304\",\n        \"createdDate\" : 1452623230786,\n        \"containerKey\" : \"216bed6b-363e-4f32-b2ac-b6702a2d\",\n        \"eventId\" : \"181ce475-b95a-11e5-a186-ab2406d90304\",\n        \"operationId\" : 0,\n        \"operationUuid\" : \"d1dcf477-b957-11e5-a824-b68f99c42d0e\"\n    }, ]\n}\n</code></pre>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nsuccess\n</code></pre>\n<p>In this example a single record is reported in the &ldquo;transactionDatas&rdquo; array.</p>","operationId":"publishTransactions","consumes":["application/json"],"produces":["text/plain"],"parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/transactionDataCollection"}}],"responses":{"default":{"schema":{"type":"string"}}},"deprecated":false}},"/publish/operation/rollup":{"post":{"tags":["MetricCollector"],"summary":"Report metrics about one or more services for a given time period.","description":"<p>Uploads metrics about one or more services for a given time period. A usage example is as follows:</p>\n<h4>Sample Request</h4>\n<pre><code>POST /rest/monitor/publish/operation/rollup HTTP/1.1\nContent-Type: application/json\n\n{\n    \"rollupDatas\" : [ {\n        \"contractKey\" : \"952c7a3e-b8a6-11e5-a824-b68f99c42d0e:1012\",\n        \"operationId\" : 0,\n        \"operationuuid\" : \"f0bc6ae7-b8a6-11e5-a824-b68f99c42d0e\",\n        \"contractId\" : 0,\n        \"serviceId\" : 0,\n        \"bindingTemplateKey\" : \"uddi:f0d941be-b8a6-11e5-a824-b68f99c42d0e\",\n        \"bindingTemplateId\" : 2252,\n        \"serviceKey\" : \"uddi:f09a63f3-b8a6-11e5-a824-b68f99c42d0e\",\n        \"usageCount\" : 2,\n        \"timeSlot\" : \"201601112130\",\n        \"successCount\" : 2,\n        \"minRespTime\" : 9,\n        \"respMsgSize\" : 540,\n        \"totalRespTime\" : 19,\n        \"maxRespTime\" : 10,\n        \"maxMsgSize\" : 531,\n        \"maxID\" : 0,\n        \"reqMsgSize\" : 1062,\n        \"rollupType\" : 0,\n        \"errorCount\" : 0,\n        \"minMsgSize\" : 531,\n        \"max_id\" : 0,\n        \"rollupEndTime\" : 1452577445001,\n        \"qosViolationCount\" : 0,\n        \"containerName\" : \"793475ab-f688-487a-820b-c12dfc26\",\n        \"maxErrorRespTime\" : 0,\n        \"minErrorRespTime\" : -1,\n        \"rollupStartTime\" : 1452577440000,\n        \"minSuccessRespTime\" : 9,\n        \"maxSuccessRespTime\" : 10,\n        \"totalSuccessRespTime\" : 19,\n        \"totalErrorRespTime\" : 0,\n        \"clientId\" : 0\n    } ]\n}\n</code></pre>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nsuccess\n</code></pre>\n<p>In this example a single record is reported in the &ldquo;rollupDatas&rdquo; array.</p>","operationId":"publishOperationalMetric","consumes":["application/json"],"produces":["text/plain"],"parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/operationalRollupData"}}],"responses":{"default":{"schema":{"type":"string"}}},"deprecated":false}}},"definitions":{"auditDataCollection":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"usageDatas":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/usageData"}}}},"rollupData":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["clientId","errorCount","maxErrorRespTime","maxID","maxMsgSize","maxRespTime","maxSuccessRespTime","max_id","minErrorRespTime","minMsgSize","minRespTime","minSuccessRespTime","qosViolationCount","reqMsgSize","respMsgSize","rollupEndTime","rollupStartTime","rollupType","successCount","totalErrorRespTime","totalRespTime","totalSuccessRespTime","usageCount","bindingTemplateId","contractId","operationId","serviceId"],"properties":{"analyticsCollection":{"$ref":"#/definitions/customAnalyticsCollection"},"clientId":{"type":"integer","format":"int64"},"containerName":{"type":"string"},"errorCount":{"type":"integer","format":"int64"},"licenseTerms":{"type":"array","minItems":0,"items":{"type":"string"}},"licenseTermsID":{"type":"string"},"maxErrorRespTime":{"type":"integer","format":"int64"},"maxID":{"type":"integer","format":"int64"},"maxMsgSize":{"type":"integer","format":"int64"},"maxRespTime":{"type":"integer","format":"int64"},"maxSuccessRespTime":{"type":"integer","format":"int64"},"max_id":{"type":"integer","format":"int64"},"minErrorRespTime":{"type":"integer","format":"int64"},"minMsgSize":{"type":"integer","format":"int64"},"minRespTime":{"type":"integer","format":"int64"},"minSuccessRespTime":{"type":"integer","format":"int64"},"qosViolationCount":{"type":"integer","format":"int64"},"reqMsgSize":{"type":"integer","format":"int64"},"respMsgSize":{"type":"integer","format":"int64"},"rollupEndTime":{"type":"integer","format":"int64"},"rollupStartTime":{"type":"integer","format":"int64"},"rollupType":{"type":"string"},"successCount":{"type":"integer","format":"int64"},"timeSlot":{"type":"string"},"totalErrorRespTime":{"type":"integer","format":"int64"},"totalRespTime":{"type":"integer","format":"int64"},"totalSuccessRespTime":{"type":"integer","format":"int64"},"usageCount":{"type":"integer","format":"int64"},"bindingTemplateId":{"type":"string"},"bindingTemplateKey":{"type":"string"},"contractId":{"type":"string"},"contractKey":{"type":"string"},"operationId":{"type":"string"},"operationuuid":{"type":"string"},"serviceId":{"type":"string"},"serviceKey":{"type":"string"}}},"entry":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"key":{"type":"string"},"value":{"type":"string"}}},"customAnalyticsCollection":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"data":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/entry"}}}},"usageMessage":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["sequence","completeMessage"],"properties":{"eventId":{"type":"string"},"sequence":{"type":"string"},"messageName":{"type":"string"},"msgDate":{"type":"string","format":"date-time"},"message":{"type":"string"},"contentType":{"type":"string"},"transportHeaders":{"type":"string"},"type":{"type":"string"},"completeMessage":{"type":"boolean"}}},"usageData":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["bindingTemplateId","contractId","operationId","serviceId","organizationId","responseTime","reqMsgSize","respMsgSize","isSoapFaultByMP","isSoapFaultByNextHop","errCategory","timeTakenByNextHopInMS","evaluationPointResult","virtualService","normalizedReqMsgSize","normalizedRespMsgSize","isQosViolationFault"],"properties":{"bindingTemplateKey":{"type":"string"},"bindingTemplateId":{"type":"string"},"contractKey":{"type":"string"},"contractName":{"type":"string"},"contractId":{"type":"string"},"eventId":{"type":"string"},"operationuuid":{"type":"string"},"operationName":{"type":"string"},"operationId":{"type":"string"},"serviceKey":{"type":"string"},"serviceId":{"type":"string"},"serviceName":{"type":"string"},"organizationKey":{"type":"string"},"organizationId":{"type":"string"},"organizationName":{"type":"string"},"containerDisplayName":{"type":"string"},"containerKey":{"type":"string"},"id":{"type":"string"},"usageMessages":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/usageMessage"}},"nextHopInfos":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/nextHopInfo"}},"host":{"type":"string"},"groupId":{"type":"string"},"clientIP":{"type":"string"},"clientId":{"type":"integer","format":"int64"},"requestDtsCal":{"type":"string","format":"date-time"},"responseTime":{"type":"integer","format":"int64"},"reqMsgSize":{"type":"integer","format":"int64"},"respMsgSize":{"type":"integer","format":"int64"},"reqUsername":{"type":"string"},"nextHopUrl":{"type":"string"},"isSoapFaultByMP":{"type":"boolean"},"isSoapFaultByNextHop":{"type":"boolean"},"errCategory":{"type":"integer","format":"int64"},"errMessage":{"type":"string"},"errDetails":{"type":"string"},"listenerUrl":{"type":"string"},"timeTakenByNextHopInMS":{"type":"integer","format":"int64"},"applicationUser":{"type":"string"},"customField1":{"type":"string"},"startTime":{"type":"string","format":"date-time"},"evaluationPointResult":{"type":"boolean"},"virtualService":{"type":"boolean"},"originalCreateDtsCal":{"type":"string","format":"date-time"},"normalizedReqMsgSize":{"type":"integer","format":"int64"},"normalizedRespMsgSize":{"type":"integer","format":"int64"},"otherUsernames":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/entry"}},"verb":{"type":"string"},"statusCode":{"type":"string"},"licenseTerms":{"type":"array","minItems":0,"items":{"type":"string"}},"isQosViolationFault":{"type":"boolean"},"uniqueKey":{"type":"string"}}},"nextHopInfo":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["responseTime"],"properties":{"eventId":{"type":"string"},"url":{"type":"string"},"createDts":{"type":"string","format":"date-time"},"requestDts":{"type":"string","format":"date-time"},"responseTime":{"type":"integer","format":"int64"}}},"customRollupData":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"rollupDatas":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/rollupData"}}}},"transactionData":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["operationId","serviceId"],"properties":{"containerKey":{"type":"string"},"createdDate":{"type":"string","format":"date-time"},"eventId":{"type":"string"},"operationId":{"type":"string"},"operationUuid":{"type":"string"},"parentEventId":{"type":"string"},"parentOperationId":{"type":"string"},"serviceId":{"type":"string"},"serviceKey":{"type":"string"},"transactionId":{"type":"string"}}},"transactionDataCollection":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"transactionDatas":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/transactionData"}}}},"operationalRollupData":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"rollupDatas":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/rollupData"}}}}}}