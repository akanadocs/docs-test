{"swagger":"2.0","info":{"title":"Alert Management API","description":"The API used to report and manage alerts.","version":"8.0.0"},"host":"0.0.0.0","basePath":"/rest","schemes":["http","https"],"tags":[{"name":"AlertService"}],"paths":{"/alerts/{id}/workflow":{"put":{"tags":["AlertService"],"summary":"Perform Workflow Action","description":"<p>Performs a workflow action on the alert with the given ID.A usage example is as follows: </p><p>Request:<br/>PUT /rest/alerts/1010/workflow HTTP/1.1<br/>{<br/>    \"action\" : \"OBSERVE\",<br/>    \"comment\" : \"Observed alert, no action taken\",<br/>    \"userName\" : \"jdoe\"<br/>}</p><p>Response:<br/>HTTP/1.1 200 OK</p>","operationId":"performWorkflowAction","consumes":["application/json","application/xml","text/xml"],"parameters":[{"in":"path","name":"id","description":"ID of the alert to perform the action on.","type":"string","required":true}],"responses":{"default":{}},"deprecated":false}},"/alerts/{id}":{"delete":{"tags":["AlertService"],"summary":"Delete Alert","description":"<p>Deletes the alert with the given ID. A usage example is as follows:</p><p>Request:<br>DELETE /rest/alerts/1010 HTTP/1.1</p><p>Response:<br>HTTP/1.1 200 OK</p>","operationId":"deleteAlert","parameters":[{"in":"path","name":"id","description":"ID of the alert to delete.","type":"string","required":true}],"responses":{"default":{}},"deprecated":false}},"/alerts":{"post":{"tags":["AlertService"],"summary":"Add Alert","description":"<p>Adds/reports an alert. An alert is defined by its type, a code, and a source. The alert's type is a numeric value, 0 is for a basic alert, 1 is for a service alert, and 3 is for an SLA alert. The alert code identifies a particular event orcondition that has been detected. The source of the alert is the entity the alert is about. There are several types of alert sources which is identified with a numeric value.<ol start=\"0\"><li>unknown</li><li>service</li><li>operation</li><li>contract</li><li>organization</li><li>endpoint</li><li>container</li></ol>Each type of source may have a different type of identifier or key used in the <i>source</i> property. The <i>sourceName</i> property provides a functional area that can be used to group or categorize the alerts. An alert may also be tied to a transaction, or action performed in the system. The most common transaction to be associated with alerts is an operation invocation.</p><p>The following example illustrates adding a service alert: </p><p>Request:<br>POST /rest/alerts HTTP/1.1<br>{<br>    \"alertType\" : \"1\",<br>    \"alertCode\" : \"1000000\",<br>    \"description\" : \"Problem executing custom policy.\",<br>    \"generatedAt\" : \"2015-05-01T16:21:18\",<br>    \"source\" : {<br>        \"sourceType\" : \"1\",<br>        \"source\" : \"uddi:f996a248-f061-11e4-924f-f8246128b60a\",<br>        \"sourceName\" : \"General\" +<br>    }<br>    \"transaction\" : {<br>        \"OperationInvocation\" : {<br>            \"operationName\" : \"op1\",<br>            \"operationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b61b\",<br>            \"serviceName\" : \"Service1\",<br>            \"serviceKey\"uddi:f996a248-f061-11e4-924f-f8246128b60a\",<br>            \"contractName\" : \"Anonymous Access\",<br>            \"contractKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b53c\",<br>            \"organizationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246127d45a<br>        }<br>    }<br>}</p><p>Response:<br>HTTP/1.1 200 OK<br>{<br>    \"id\" : \"1010\",<br>    \"alertType\" : \"1\",<br>    \"alertCode\" : \"1000000\",<br>    \"alertCodeInfo\" : {<br>        \"severity\" : \"2\",<br>        \"description\" : \"Policy enforcement failure\",<br>        \"componentName\" : \"Policy Handler Framework\",<br>        \"subsystemName\" : \"General\",<br>        \"sendEmailEnabled\" : \"true\",<br>        \"snmpTrapEnabled\" : \"false\"<br>    }<br>    \"description\" : \"Problem executing custom policy.\",<br>    \"generatedAt\" : \"2015-05-01T16:21:18\"<br>    \"source\" : {<br>        \"sourceType\" : \"1\",<br>        \"source\" : \"uddi:f996a248-f061-11e4-924f-f8246128b60a\",<br>        \"sourceName\" : \"General\" +<br>    }<br>    \"transaction\" : {<br>        \"OperationInvocation\" : {<br>            \"operationName\" : \"op1\",<br>            \"operationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b61b\",<br>            \"serviceName\" : \"Service1\",<br>            \"serviceKey\"uddi:f996a248-f061-11e4-924f-f8246128b60a\",<br>            \"contractName\" : \"Anonymous Access\",<br>            \"contractKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b53c\",<br>            \"organizationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246127d45a<br>        }<br>    }<br>    \"workflow\" : {<br>      \"state\" : \"UNOBSERVED<br>      \"receivedAt\" : \"2015-05-01T16:21:18\",<br>    }<br>    \"alertDispatchStatus\" : {<br>        \"dispatched\" : \"false\"<br>    }<br>}</p><p>Note the <i>id</i> property is not provided in the request but is provided in the response message. The <i>id</i> can then be used when performing workflow actions. Additional information about the alert derived from the alert code specified is added by the system. Of note the severity of the alert is dictated by the alert code. The severity is a numeric value and may be one of the following: <ol><li>CRITICAL</li><li>MAJOR</li><li>MINOR</li><li>NORMAL</li><li>CLEAR</li></ol>The workflow is also auto-generated and provided in the response where it indicates the initial state and when the system received the record. And finally a dispatch status may be added if the alert code requires any sort of dispatch.</p>","operationId":"addAlert","consumes":["application/json","application/xml","text/xml"],"produces":["application/json","application/xml","text/xml"],"responses":{"default":{"schema":{"$ref":"#/definitions/alert"}}},"deprecated":false},"get":{"tags":["AlertService"],"summary":"Get Alerts","description":"<p>Retrieves the alerts meeting the given criteria. The following usage example illustrates a query for all UNOBSERVED alerts reported against service with the key uddi:f996a248-f061-11e4-924f-f8246128b60a with a severity of MAJOR or CRITICAL that were generated between 2015-05-01T16:21:17 and now. It also illustrates paging by asking for records starting from position 50 and to only return 50 records. </p><p>Request:<br>GET /rest/alerts?state=UNOBSERVED&source=uddi:f996a248-f061-11e4-924f-f8246128b60a&severity=1&severity=2&from=2015-05-01T16:21:17&start=50&count=50 HTTP/1.1</p><p>Response:<br>HTTP/1.1 200 OK<br>{<br>    \"totalCount\" : \"50\",<br>    \"records\" : [<br>        {<br>            \"id\" : \"1010\",<br>            \"alertType\" : \"1\",<br>            \"alertCode\" : \"1000000\",<br>            \"alertCodeInfo\" : {<br>                \"severity\" : \"2\",<br>                \"description\" : \"Policy enforcement failure\",<br>                \"componentName\" : \"Policy Handler Framework\",<br>                \"subsystemName\" : \"General\",<br>                \"sendEmailEnabled\" : \"true\",<br>                \"snmpTrapEnabled\" : \"false\"<br>            }<br>            \"description\" : \"Problem executing custom policy.\",<br>            \"generatedAt\" : \"2015-05-01T16:21:18\"<br>            \"source\" : {<br>                \"sourceType\" : \"1\",<br>                \"source\" : \"uddi:f996a248-f061-11e4-924f-f8246128b60a\",<br>                \"sourceName\" : \"General\" +<br>            }<br>            \"transaction\" : {<br>                \"OperationInvocation\" : {<br>                    \"operationName\" : \"op1\",<br>                    \"operationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b61b\",<br>                    \"serviceName\" : \"Service1\",<br>                    \"serviceKey\"uddi:f996a248-f061-11e4-924f-f8246128b60a\",<br>                    \"contractName\" : \"Anonymous Access\",<br>                    \"contractKey\" : \"uddi:f996a248-f061-11e4-924f-f8246128b53c\",<br>                    \"organizationKey\" : \"uddi:f996a248-f061-11e4-924f-f8246127d45a<br>                }<br>           }<br>           \"workflow\" : {<br>               \"state\" : \"UNOBSERVED<br>               \"receivedAt\" : \"2015-05-01T16:21:18\",<br>           }<br>           \"alertDispatchStatus\" : {<br>               \"dispatched\" : \"false\"<br>           }<br>       },<br>       ... not shown for brevity ...<br>    ],<br>    \"listIncomplete\" : \"true\"<br>}</p><p>The <i>listIncomplete</i> field in the response indicates there are more records beyond the 50 that match the given criteria.</p>","operationId":"getAlerts","produces":["application/json","application/xml","text/xml"],"parameters":[{"in":"query","name":"severity","description":"Severities of the alerts to filter on.","required":false},{"in":"query","name":"actor","description":"Indicates only alerts that the user with the given username performed a workflow action on should be returned.","type":"string","required":false},{"in":"query","name":"code","description":"Alert code to filter on.","required":false},{"in":"query","name":"org","description":"Organization key to filter on.","required":false},{"in":"query","name":"start","description":"To page the results this integer indicates the first alert from the full result set to return as the first item of the page.","type":"integer","required":false},{"in":"query","name":"count","description":"To page the results this integer indicates the number of items thatshould be returned in the page.","type":"integer","required":false},{"in":"query","name":"from","description":"Date at which only alerts generated after will be returned. ISO-8601 format","type":"string","required":false},{"in":"query","name":"source","description":"Source of the alerts to filter on.","type":"string","required":false},{"in":"query","name":"to","description":"Date at which only alerts generated before will be returned. ISO-8601 format","type":"string","required":false},{"in":"query","name":"state","description":"States of the alerts to filter on.","required":false}],"responses":{"default":{"schema":{"$ref":"#/definitions/alertList"}}},"deprecated":false}},"/alerts/{id}/comments":{"post":{"tags":["AlertService"],"summary":"Add Comment","description":"<p>Adds a comment to the alert with the given ID. A usage example is as follows:</p><p>Request:<br>POST /rest/alerts/1010/comments HTTP/1.1<br>{<br>    \"comment\" : \"This is serious.\",<br>    \"userName\" : \"jdoe\"<br>}<p>Response:<br>HTTP/1.1 200 OK<br>{<br>    \"comment\" : \"This is serious.\",<br>    \"userName\" : \"jdoe\",<br>    \"createdAt\" : \"2015-05-01T18:32:40\",<br>    \"commentId\" : \"1\"<br>}<p>Note the <i>id</i> property is not provided in the request but is provided in the response message. The <i>createdAt</i> property was not provided in the request so the system auto-generated it when the request was received.</p>","operationId":"addComment","consumes":["application/json","application/xml","text/xml"],"produces":["application/json","application/xml","text/xml"],"parameters":[{"in":"path","name":"id","description":"ID of the alert to comment on.","type":"string","required":true}],"responses":{"default":{"schema":{"$ref":"#/definitions/alertComment"}}},"deprecated":false}},"/alertcodes/{code}":{"get":{"tags":["AlertService"],"summary":"Get Alert Code Details","description":"<p>Retrieves Alert code details given alert code id. A usage example is as follows:</p><p>Request:<br>GET /rest/alertcodes/503 HTTP/1.1</p><p>Response:<br>HTTP/1.1 200 OK<br>{<br>\t\"alertCode\" : 503,<br>\t\"componentName\" : \"Common\",<br>\t\"subsystemName\" : \"General\",<br>\t\"severity\" : 1,<br>\t\"description\" : \"Error while retrieving database connection.\",<br>\t\"sendSNMPTrap\" : false,<br>\t\"sendEmail\" : false,<br>\t\"logAlert\" : true,<br>\t\"commandId\" : 0,<br>\t\"userAlert\" : false<br>}</p>","operationId":"getAlertCode","produces":["application/json","application/xml","text/xml"],"parameters":[{"in":"path","name":"code","description":"Alert code.","type":"integer","required":true}],"responses":{"default":{"schema":{"$ref":"#/definitions/alertCode"}}},"deprecated":false}}},"definitions":{"AlerstDispatchStatus":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["dispatched"],"properties":{"dispatched":{"type":"boolean"},"emailStatus":{"type":"object"},"commandStatus":{"type":"object"},"snmpStatus":{"type":"object"}}},"alertCode":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["alertCode","severity","sendSNMPTrap","sendEmail","logAlert","commandId","userAlert"],"properties":{"alertCode":{"type":"string"},"componentName":{"type":"string"},"subsystemName":{"type":"string"},"severity":{"type":"string"},"description":{"type":"string"},"additionalInfo":{"type":"string"},"sendSNMPTrap":{"type":"boolean"},"sendEmail":{"type":"boolean"},"logAlert":{"type":"boolean"},"commandId":{"type":"string"},"scriptName":{"type":"string"},"EmailDests":{"type":"array","minItems":0,"items":{"type":"string"}},"userAlert":{"type":"boolean"}}},"alertWorkflow":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{"state":{"enum":["UNOBSERVED","OBSERVED","RESOLVED"],"type":"string"},"receivedAt":{"type":"string","format":"date-time"},"observedBy":{"type":"string"},"observedAt":{"type":"string","format":"date-time"},"resolvedBy":{"type":"string"},"resolvedAt":{"type":"string","format":"date-time"},"Comments":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/alertComment"}}}},"alertSource":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["sourceType"],"properties":{"sourceType":{"type":"string"},"source":{"type":"string"},"sourceName":{"type":"string"}}},"alertComment":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["commentId"],"properties":{"comment":{"type":"string"},"userName":{"type":"string"},"createdDts":{"type":"string","format":"date-time"},"commentId":{"type":"integer","format":"int64"}}},"EmailStatus":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["executed"],"properties":{"executed":{"type":"boolean"},"executionDate":{"type":"string","format":"date-time"}}},"alertSlaInfo":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["ruleValue","measuredValue"],"properties":{"attachmentPointType":{"type":"string"},"attachmentPointKey":{"type":"string"},"policyKey":{"type":"string"},"policyName":{"type":"string"},"ruleKey":{"type":"string"},"ruleMetricName":{"type":"string"},"ruleOperator":{"type":"string"},"ruleValue":{"type":"integer","format":"int64"},"ruleValueUnit":{"type":"string"},"measuredValue":{"type":"number","format":"double"},"startTime":{"type":"string","format":"date-time"},"endTime":{"type":"string","format":"date-time"},"ruleValueInterval":{"type":"string"}}},"alertList":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["totalCount","Alerts","listIncomplete"],"properties":{"totalCount":{"type":"string"},"Alerts":{"type":"array","minItems":1,"items":{"$ref":"#/definitions/alert"}},"listIncomplete":{"type":"boolean"}}},"SnmpStatus":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["executed"],"properties":{"executed":{"type":"boolean"},"executionDate":{"type":"string","format":"date-time"}}},"alert":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["alertType","alertCode"],"properties":{"id":{"type":"string"},"alertType":{"type":"string"},"alertCode":{"type":"string"},"alertCodeInfo":{"type":"object"},"description":{"type":"string"},"generatedAt":{"type":"string","format":"date-time"},"source":{"type":"object"},"transaction":{"type":"object"},"workflow":{"type":"object"},"containerKey":{"type":"string"},"alertSlaInfo":{"type":"object"},"alertDispatchStatus":{"type":"object"}}},"alertCodeInfo":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["severity","sendEmailEnabled","snmpTrapEnabled"],"properties":{"severity":{"type":"string"},"description":{"type":"string"},"componentName":{"type":"string"},"subsystemName":{"type":"string"},"additionalInfo":{"type":"string"},"sendEmailEnabled":{"type":"boolean"},"snmpTrapEnabled":{"type":"boolean"},"ScriptCommand":{"type":"string"}}},"alertTransaction":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":[],"properties":{}},"CommandStatus":{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["executed"],"properties":{"executed":{"type":"boolean"},"executionDate":{"type":"string","format":"date-time"}}}}}