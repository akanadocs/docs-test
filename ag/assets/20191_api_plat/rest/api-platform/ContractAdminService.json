{"swagger":"2.0","info":{"title":"Contract Management API","description":"The API used to manage PM contracts","version":"8.0.0"},"host":"0.0.0.0","basePath":"/rest","schemes":["http","https"],"tags":[{"name":"ContractAdminService"}],"paths":{"/contracts/{key}":{"put":{"tags":["ContractAdminService"],"summary":"Update contract resource scope.","description":"<p>Change the organization, container, service, operation of a given contract in effect changing the management of contract scope.</p>\n<h4>Request:</h4>\n<pre><code>PUT /rest/contracts/9eaa8b14-10b5-11e5-93d5-eb4e298f7990:1042  HTTP/1.1\nContent-Type: application/xml\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;ns2:ResourceSet ...&gt;\n    &lt;ns2:ResourceSetInfo Name=\"CreatedContract\" Anonymous=\"true\" State=\"Active\"&gt;\n        &lt;ns5:ResourceSetName&gt;My Resourceset&lt;/ns5:ResourceSetName&gt;\n    &lt;/ns2:ResourceSetInfo&gt;\n    &lt;ns6:OrganizationKey&gt;uddi:f005b0b2-1079-11e5-a330-a83ecc4e96f2&lt;/ns6:OrganizationKey&gt;\n    &lt;ns6:ContainerKey&gt;nd3845&lt;/ns6:ContainerKey&gt;\n    &lt;ns6:ServiceKey&gt;uddi:a06434c0-1122-11e5-93d5-eb4e298f7990&lt;/ns6:ServiceKey&gt;\n    &lt;ns6:OperationKey&gt;a2328c24-1122-11e5-93d5-eb4e298f7990&lt;/ns6:OperationKey&gt;\n    &lt;ns6:ContractKey&gt;9eaa8b14-10b5-11e5-93d5-eb4e298f7990:1042&lt;/ns6:ContractKey&gt;\n&lt;/ns2:ResourceSet&gt;\n</code></pre>\n<h4>Response:</h4>\n<pre><code>HTTP/1.1 200 OK\n</code></pre>","operationId":"PUT /contracts/{key}","consumes":["application/xml"],"parameters":[{"in":"path","name":"key","description":"The contract key.","type":"string","required":true},{"in":"body","name":"parameter0","description":"The update contract specification.","required":true,"schema":{"$ref":"#/definitions/ResourceSet"}}],"responses":{"default":{}},"deprecated":false},"delete":{"tags":["ContractAdminService"],"summary":"Remove specified contract","description":"<p>Remove the contract with given key.</p>\n<h4>Request:</h4>\n<pre><code>DELETE /rest/contracts/dfde5141-10b2-11e5-93d5-eb4e298f7990:1041 HTTP/1.1\n</code></pre>","operationId":"DELETE /contracts/{key}","parameters":[{"in":"path","name":"key","description":"The contract key.","type":"string","required":true}],"responses":{"200":{}},"deprecated":false},"get":{"tags":["ContractAdminService"],"summary":"Get contract details.","description":"<p>Get contract information based on given key along with policy information based on the include flag given. Note that this operation produces XML content only in order to accommodate attached policies.</p>\n<h4>Request:</h4>\n<pre><code>GET /rest/contracts/d92830eb-1125-11e5-93d5-eb4e298f7990:1043?includepolicy=true HTTP/1.1\n</code></pre>\n<h4>Response:</h4>\n<pre><code>HTTP/1.1 200 OK\nContent-Type: application/xml\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;ns5:Contract ...\"&gt;\n    &lt;ns5:ContractInfo Key=\"d92830eb-1125-11e5-93d5-eb4e298f7990:1043\" Name=\"MyContract\" Anonymous=\"false\" State=\"Active\"&gt;\n        &lt;ns5:Description&gt;My simple contract&lt;/ns5:Description&gt;\n        &lt;ns5:ProviderOrganizationKey&gt;uddi:f3e6bbe6-c334-11e7-9ec8-92c36890cc34&lt;/ns5:ProviderOrganizationKey&gt;\n        &lt;ns5:ConsumerOrganizationKey&gt;uddi:87fb0f0a-c335-11e7-9ec8-81ef6990b923&lt;/ns5:ConsumerOrganizationKey&gt;\n        &lt;ns1:EffectiveDateTimes&gt;\n            &lt;ns1:StartDateTime&gt;\n                &lt;ns1:DateTime&gt;2017-11-09T09:50:00-08:00&lt;/ns1:DateTime&gt;\n                &lt;ns1:TimezoneName&gt;America/Los_Angeles&lt;/ns1:TimezoneName&gt;\n            &lt;/ns1:StartDateTime&gt;\n            &lt;ns1:EndDateTime&gt;\n                &lt;ns1:DateTime&gt;2018-11-09T09:50:00-08:00&lt;/ns1:DateTime&gt;\n                &lt;ns1:TimezoneName&gt;America/Los_Angeles&lt;/ns1:TimezoneName&gt;\n            &lt;/ns1:EndDateTime&gt;\n            &lt;ns1:Expire&gt;true&lt;/ns1:Expire&gt;\n        &lt;/ns1:EffectiveDateTimes&gt;\n        &lt;ns5:ContractVersionInfo&gt;\n            &lt;ns5:LastModifiedTimestamp&gt;2017-11-09T09:55:57-08:00&lt;/ns5:LastModifiedTimestamp&gt;\n            &lt;ns5:User&gt;Local Domain\\administrator&lt;/ns5:User&gt;\n            &lt;ns5:MetadataVersion&gt;1&lt;/ns5:MetadataVersion&gt;\n            &lt;ns5:ActiveMetadataVersion&gt;1&lt;/ns5:ActiveMetadataVersion&gt;\n        &lt;/ns5:ContractVersionInfo&gt;\n        &lt;ns5:ContractType&gt;service.contract&lt;/ns5:ContractType&gt;\n    &lt;/ns5:ContractInfo&gt;\n    &lt;ns5:ContractScope&gt;\n        &lt;ns1:ServiceKey&gt;uddi:f3e6bbe6-c334-11e7-9ec8-81ef6990b923&lt;/ns1:ServiceKey&gt;\n    &lt;/ns5:ContractScope&gt;\n    &lt;ns5:ConsumerIdentities&gt;\n        &lt;ns7:OrganizationIdentity&gt;uddi:87fb0f0a-c335-11e7-9ec8-81ef6990b923&lt;/ns7:OrganizationIdentity&gt;\n    &lt;/ns5:ConsumerIdentities&gt;\n    &lt;ns5:PolicyAttachments&gt;\n        &lt;wsp:Policy xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2004/09/policy\" ... Name=\"urn:uuid:f76c1d70-c576-11e7-80a1-ff582ddf16f0\" visibility=\"public\" wsu:Id=\"Policy1\"&gt;\n            &lt;dns0:SLAEnforcement xmlns:dns0=\"http://federatedgovernance.org/policy/quota/slaenforcement/1.0\"&gt;\n                &lt;dns0:FaultMessage&gt;SLPFault&lt;/dns0:FaultMessage&gt;\n            &lt;/dns0:SLAEnforcement&gt;\n        &lt;/wsp:Policy&gt;\n    &lt;/ns5:PolicyAttachments&gt;\n&lt;/ns5:Contract&gt;\n</code></pre>","operationId":"GET /contracts/{key}","produces":["application/xml"],"parameters":[{"in":"path","name":"key","description":"The contract key.","type":"string","required":true},{"in":"query","name":"includepolicy","description":"whether to include policy","type":"boolean","required":false}],"responses":{"default":{"schema":{"$ref":"#/definitions/Contract"}}},"deprecated":false}},"/contracts":{"post":{"tags":["ContractAdminService"],"summary":"Create a contract","description":"<p>Creates a contract in the given organization with given parameters.  Note that this operation accepts XML content only in order to accommodate attached policies.</p>\n<h4>Request:</h4>\n<pre><code>POST /rest/contracts  HTTP/1.1\nContent-Type: application/xml\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;ns2:ContractSpec ...&gt;\n    &lt;ns5:ContractInfo Name=\"CreatedContract\" Anonymous=\"true\" State=\"Active\"&gt;\n        &lt;ns5:Description&gt;Newly Created Contract.&lt;/ns5:Description&gt;\n        &lt;ns5:ProviderOrganizationKey&gt;uddi:f005b0b2-1079-11e5-a330-a83ecc4e96f2&lt;/ns5:ProviderOrganizationKey&gt;\n        &lt;ns1:EffectiveDateTimes&gt;\n            &lt;ns1:StartDateTime&gt;\n                &lt;ns1:DateTime&gt;2017-11-03T17:42:03-07:00&lt;/ns1:DateTime&gt;\n                &lt;ns1:TimezoneName&gt;America/Los_Angeles&lt;/ns1:TimezoneName&gt;\n            &lt;/ns1:StartDateTime&gt;\n            &lt;ns1:Expire&gt;false&lt;/ns1:Expire&gt;\n        &lt;/ns1:EffectiveDateTimes&gt;\n        &lt;ns5:ContractVersionInfo&gt;\n            &lt;ns5:MetadataVersion&gt;1&lt;/ns5:MetadataVersion&gt;\n            &lt;ns5:ActiveMetadataVersion&gt;1&lt;/ns5:ActiveMetadataVersion&gt;\n        &lt;/ns5:ContractVersionInfo&gt;\n        &lt;ns5:ContractType&gt;service.contract&lt;/ns5:ContractType&gt;\n    &lt;/ns5:ContractInfo&gt;\n    &lt;ns5:AddContractContext&gt;\n        &lt;ns5:Action&gt;@CreateOffer&lt;/ns5:Action&gt;\n    &lt;/ns5:AddContractContext&gt;\n&lt;/ns2:ContractSpec&gt;\n</code></pre>\n<h4>Response:</h4>\n<pre><code>HTTP/1.1 201 Created\nContent-Type: application/xml\nLocation: /rest/contracts/dfde5141-10b2-11e5-93d5-eb4e298f7990:1041\n</code></pre>","operationId":"POST /contracts","consumes":["application/xml"],"produces":["application/xml"],"parameters":[{"in":"body","name":"parameter0","description":"Add contract parameter spec","required":true,"schema":{"$ref":"#/definitions/ContractSpec"}}],"responses":{"201":{},"500":{}},"deprecated":false},"get":{"tags":["ContractAdminService"],"summary":"Fetch contracts for the given criteria.","description":"<p>Fetch contracts based on given provider service or provider organization or consumer organization.</p>\n<h4>Request:</h4>\n<pre><code>GET /rest/contracts?providerOrg=uddi:f005b0b2-1079-11e5-a330-a83ecc4e96f2  HTTP/1.1\n</code></pre>\n<h4>Response:</h4>\n<pre><code>HTTP/1.1 200 OK\nContent-Type: application/xml\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;ns2:Contracts ...\"&gt;\n    &lt;ns2:ContractInfo Key=\"ca58bd4d-c59d-11e7-80a1-ff582ddf16f0:1014\" Name=\"Contract1\" Anonymous=\"false\" State=\"Active\"&gt;\n        &lt;ns5:Description&gt;Contract One&lt;/ns5:Description&gt;\n        &lt;ns5:ProviderOrganizationKey&gt;uddi:c6f30e8d-c576-11e7-80a1-ff582ddf16f0&lt;/ns5:ProviderOrganizationKey&gt;\n        &lt;ns5:ConsumerOrganizationKey&gt;uddi:71a538c8-c59d-11e7-80a1-ff582ddf16f0&lt;/ns5:ConsumerOrganizationKey&gt;\n        &lt;ns1:EffectiveDateTimes&gt;\n            &lt;ns1:StartDateTime&gt;\n                &lt;ns1:DateTime&gt;2017-11-09T14:31:00-08:00&lt;/ns1:DateTime&gt;\n                &lt;ns1:TimezoneName&gt;America/Los_Angeles&lt;/ns1:TimezoneName&gt;\n            &lt;/ns1:StartDateTime&gt;\n            &lt;ns1:Expire&gt;false&lt;/ns1:Expire&gt;\n        &lt;/ns1:EffectiveDateTimes&gt;\n        &lt;ns5:ContractVersionInfo&gt;\n            &lt;ns5:MetadataVersion&gt;1&lt;/ns5:MetadataVersion&gt;\n            &lt;ns5:ActiveMetadataVersion&gt;1&lt;/ns5:ActiveMetadataVersion&gt;\n        &lt;/ns5:ContractVersionInfo&gt;\n        &lt;ns5:ContractType&gt;service.contract&lt;/ns5:ContractType&gt;\n    &lt;/ns2:ContractInfo&gt;\n    &lt;ns2:ContractInfo Key=\"d9b5ff74-c59d-11e7-80a1-ff582ddf16f0:1015\" Name=\"Contract2\" Anonymous=\"false\" State=\"Active\"&gt;\n        &lt;ns5:Description&gt;Contract Two&lt;/ns5:Description&gt;\n        &lt;ns5:ProviderOrganizationKey&gt;uddi:c6f30e8d-c576-11e7-80a1-ff582ddf16f0&lt;/ns5:ProviderOrganizationKey&gt;\n        &lt;ns5:ConsumerOrganizationKey&gt;uddi:b8c401a9-c59d-11e7-80a1-ff582ddf16f0&lt;/ns5:ConsumerOrganizationKey&gt;\n        &lt;ns1:EffectiveDateTimes&gt;\n            &lt;ns1:StartDateTime&gt;\n                &lt;ns1:DateTime&gt;2017-11-09T14:32:00-08:00&lt;/ns1:DateTime&gt;\n                &lt;ns1:TimezoneName&gt;America/Los_Angeles&lt;/ns1:TimezoneName&gt;\n            &lt;/ns1:StartDateTime&gt;\n            &lt;ns1:Expire&gt;false&lt;/ns1:Expire&gt;\n        &lt;/ns1:EffectiveDateTimes&gt;\n        &lt;ns5:ContractVersionInfo&gt;\n            &lt;ns5:MetadataVersion&gt;1&lt;/ns5:MetadataVersion&gt;\n            &lt;ns5:ActiveMetadataVersion&gt;1&lt;/ns5:ActiveMetadataVersion&gt;\n        &lt;/ns5:ContractVersionInfo&gt;\n        &lt;ns5:ContractType&gt;service.contract&lt;/ns5:ContractType&gt;\n    &lt;/ns2:ContractInfo&gt;\n&lt;/ns2:Contracts&gt;\n</code></pre>","operationId":"GET /contracts","produces":["application/xml"],"parameters":[{"in":"query","name":"providerService","description":"Return all contracts that govern the given provider's service key","type":"string","required":false},{"in":"query","name":"providerOrg","description":"Return all contracts that govern the given provider's organization key","type":"string","required":false},{"in":"query","name":"consumerOrg","description":"Return all contracts that govern the given consumer's organization key","type":"string","required":false}],"responses":{"default":{"schema":{"$ref":"#/definitions/Contracts"}}},"deprecated":false}},"/contracts/{key}/workflow":{"put":{"tags":["ContractAdminService"],"summary":"Perform Workflow Action","description":"<p>Performs a workflow action on the contract with the given key. The available workflow actions are based on the current workflow process in use for contracts in the system.</p>\n<h4>Request:</h4>\n<pre><code>PUT /rest/contracts/d92830eb-1125-11e5-93d5-eb4e298f7990:1043/workflow HTTP/1.1\nContent-Type: application/json\n\n{\n    \"Action\" : \"Activate Contract\",\n    \"Comment\" : \"Putting contract into production.\",\n    \"UserName\" : \"jdoe\"\n}\n</code></pre>\n<h4>Response:</h4>\n<pre><code>HTTP/1.1 200 OK\n</code></pre>","operationId":"PUT /contracts/{key}/workflow","consumes":["application/json","application/xml","text/xml"],"parameters":[{"in":"path","name":"key","description":"Key of the contract to perform the action on.","type":"string","required":true},{"in":"body","name":"parameter0","description":"The action to perform.","required":true,"schema":{"$ref":"#/definitions/WorkflowAction"}}],"responses":{"default":{}},"deprecated":false}}},"definitions":{"AddContractContext":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"Action":{"enum":["@CreateOffer","@CreateRequest","@ImportContract","@ActivateContract"],"type":"string"},"Comments":{"type":"string"}},"required":["Action"]},"PolicyAttachments":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{}},"SlaAssignment":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"SLAKey":{"type":"string"},"SLAName":{"type":"string"},"PolicyReference":{"type":"string"},"SLADescription":{"type":"string"},"SLAPolicyKey":{"type":"string"},"ServiceLevelPolicyName":{"type":"string"},"ServiceLevelPolicyDescription":{"type":"string"},"SLAPolicy":{"$ref":"#/definitions/SLAPolicy"}},"required":["SLAKey","SLAName","PolicyReference","SLAPolicy"]},"IdentitySet":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"IdentitySetInfo":{"$ref":"#/definitions/IdentitySetInfo"},"UserIdentity":{"type":"array","minItems":0,"items":{"type":"string"}},"GroupIdentity":{"type":"array","minItems":0,"items":{"type":"string"}},"OrganizationIdentity":{"type":"array","minItems":0,"items":{"type":"string"}},"ServiceIdentity":{"type":"array","minItems":0,"items":{"type":"string"}}}},"SLAPolicy":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"Rules":{"type":"array","minItems":1,"items":{"$ref":"#/definitions/Rule"}}},"required":["Rules"]},"ResourceSet":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"ResourceSetInfo":{"$ref":"#/definitions/ResourceSetInfo"},"OrganizationKey":{"type":"array","minItems":0,"items":{"type":"string"}},"ContainerKey":{"type":"array","minItems":0,"items":{"type":"string"}},"ServiceKey":{"type":"array","minItems":0,"items":{"type":"string"}},"OperationKey":{"type":"array","minItems":0,"items":{"type":"string"}},"ContractKey":{"type":"array","minItems":0,"items":{"type":"string"}},"PolicyKey":{"type":"array","minItems":0,"items":{"type":"string"}},"BindingOperationKey":{"type":"array","minItems":0,"items":{"type":"string"}},"MessageKey":{"type":"array","minItems":0,"items":{"type":"string"}},"BindingMessageKey":{"type":"array","minItems":0,"items":{"type":"string"}},"ServiceBindingId":{"type":"array","minItems":0,"items":{"type":"string","format":"int64"}},"EndpointKey":{"type":"array","minItems":0,"items":{"type":"string"}},"CategoryId":{"type":"array","minItems":0,"items":{"type":"string"}},"BpelKey":{"type":"array","minItems":0,"items":{"type":"string"}},"ScriptKey":{"type":"array","minItems":0,"items":{"type":"string"}}}},"ContractInfo":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"Key":{"type":"string"},"Name":{"type":"string"},"Anonymous":{"type":"string"},"State":{"type":"string"},"Description":{"type":"string"},"ProviderOrganizationKey":{"type":"string"},"ConsumerOrganizationKey":{"type":"string"},"EffectiveDateTimes":{"$ref":"#/definitions/EffectiveDateTimesType"},"ContractVersionInfo":{"$ref":"#/definitions/ContractVersionInfo"},"ContractType":{"type":"string"}},"required":["Name","Anonymous","EffectiveDateTimes"]},"WorkflowAction":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"Action":{"type":"string"},"UserName":{"type":"string"},"Comment":{"type":"string"}},"required":["Action","UserName"]},"Test":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"Operator":{"enum":["gt","ge","le","lt","eq","ne"],"type":"string"},"Metric":{"enum":["maxResponse","minResponse","requestMessageSize","responseMessageSize","maxMessageSize","minMessageSize","faultCounter","requestCounter","successCounter","avgResponse","responseTime","usageCount"],"type":"string"},"Value":{"type":"string","format":"int64"},"ValueUnit":{"enum":["msec","sec","min","hour","day","week","count","bytes","Kbytes","Mbytes"],"type":"string"}},"required":["Operator","Metric"]},"ResourceSetInfo":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"ResourceSetName":{"type":"string"},"Description":{"type":"string"}}},"DateTimeZoneType":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"DateTime":{"type":"string","format":"date-time"},"TimezoneName":{"type":"string"}},"required":["DateTime","TimezoneName"]},"ContractSpec":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"ContractInfo":{"$ref":"#/definitions/ContractInfo"},"SlaAssignment":{"type":"array","minItems":1,"items":{"$ref":"#/definitions/SlaAssignment"}},"ResourceSet":{"$ref":"#/definitions/ResourceSet"},"IdentitySet":{"$ref":"#/definitions/IdentitySet"},"PolicyAttachment":{"type":"array","minItems":0,"items":{"type":"string"}},"AddContractContext":{"$ref":"#/definitions/AddContractContext"}},"required":["ContractInfo","SlaAssignment","ResourceSet","IdentitySet","AddContractContext"]},"EffectiveDateTimesType":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"StartDateTime":{"$ref":"#/definitions/DateTimeZoneType"},"EndDateTime":{"$ref":"#/definitions/DateTimeZoneType"},"Expire":{"type":"string"}},"required":["StartDateTime"]},"ContractVersionInfo":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"LastModifiedTimestamp":{"type":"string","format":"date-time"},"User":{"type":"string"},"MetadataVersion":{"type":"string"},"ActiveMetadataVersion":{"type":"string"}},"required":["LastModifiedTimestamp","User","MetadataVersion","ActiveMetadataVersion"]},"Rule":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"interval":{"type":"string"},"RuleKey":{"type":"string"},"Test":{"$ref":"#/definitions/Test"}},"required":["interval","RuleKey","Test"]},"IdentitySetInfo":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"IdentitySetName":{"type":"string"},"Description":{"type":"string"}}},"Contract":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"ContractInfo":{"$ref":"#/definitions/ContractInfo"},"ContractScope":{"$ref":"#/definitions/ResourceSet"},"ConsumerIdentities":{"$ref":"#/definitions/IdentitySet"},"PolicyAttachments":{"$ref":"#/definitions/PolicyAttachments"}},"required":["ContractInfo"]},"Contracts":{"$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"ContractInfo":{"type":"array","minItems":0,"items":{"$ref":"#/definitions/ContractInfo"}}}}}}