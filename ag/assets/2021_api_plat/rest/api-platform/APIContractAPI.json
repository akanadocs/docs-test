{"swagger":"2.0","info":{"description":"<p>The Contracts service provides operations for managing API access contracts in the Akana API Platform.</p>","version":"1","title":"API Contract Management"},"host":"0.0.0.0","basePath":"/api","schemes":["http","https"],"paths":{"/contracts/{ContractID}/appdetails":{"get":{"operationId":"GET /contracts/{ContractID}/appdetails","produces":["application/xml","application/json","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"parameters":[{"name":"ContractID","in":"path","required":true}],"responses":{"default":{"description":" "}}}},"/contracts/{ContractDN}/scope":{"put":{"operationId":"PUT /contracts/{ContractDN}/scope","consumes":["application/json","application/xml","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"produces":["application/json","application/xml","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"parameters":[{"name":"ContractDN","in":"path","required":true},{"in":"body","name":"body","required":false}],"responses":{"default":{"description":" "}}}},"/contracts/{ContractID}/apidetails":{"get":{"operationId":"GET /contracts/{ContractID}/apidetails","produces":["application/xml","application/json","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"parameters":[{"name":"ContractID","in":"path","required":true}],"responses":{"default":{"description":" "}}}},"/contracts":{"post":{"description":"<p>Requests a new contract between a specific version of an app and a specific version of an API. Also used to revise a contract.\nRevising an existing, active contract creates a new contract. However, there can only be one original contract and one revised\ncontract. An attempt to create a second revision will fail.<br />\n<strong>Authorization Roles/Permissions:</strong> App team member <br />\n<strong>Workflow:</strong> When a completely new contract is created (the first contract between a specific app version and a specific API\nversion in a specific environment), the @Create initial action is used to start the workflow for the new contract. When a contract\nis revised, a new contract is created that is a revision of the existing contract, and the existing contract remains in place.\nIn this scenario, the @Revise initial action is used to start the workflow for the revised contract. When there is a revised\ncontract in place, any subsequent requests to create a contract for the app/API/environment combination will fail, since only\none revised contract is allowed at one time.</p>\n<h4>Sample Request</h4>\n<pre><code>POST /api/contracts HTTP/1.1\nHost: {hostname}\nAccept: application/json\nContent-Type: application/json\nX-Csrf-Token_{tenant}: {TokenID}\n\n{\n  \"APIVersionID\":\"b49ef94a-3a4b-4cc4-b894-ef067d9a0de9.acmepaymentscorp\",\n  \"RuntimeID\":\"7J0w4Dy2BGN2QPUi6sFGlR6w.acmepaymentscorp\",\n  \"Environment\":\"Production\",\n  \"Policies\":{\n    \"Policy\":[\n      {\n        \"PolicyKey\":\"urn:uuid:a28e7b76-499c-11e4-bfe5-b1a96aa04935\"\n      }\n    ]\n  },\n  \"ContractScope\":{\n    \"Restricted\":true,\n    \"LicenseID\":[\n      \"15d5d812-81e1-4d26-9597-e595b81b102f.acmepaymentscorp\",\n      \"e18cd5b6-93a6-4f30-b089-5ea374d2818d.acmepaymentscorp\",\n      \"104d523d-5d49-4bc3-b523-7de6725fcaae.acmepaymentscorp\"\n    ]\n  }\n}\n</code></pre>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nDate: Wed, 01 Oct 2014 00:00:00 GMT\nContent-Type: application/json\n\n{\n  \"ContractID\" : \"3f548ac7-86ac-4881-8aec-bfa5b5e9f60d.acmepaymentscorp\",\n  \"APIVersionID\" : \"b49ef94a-3a4b-4cc4-b894-ef067d9a0de9.acmepaymentscorp\",\n  \"RuntimeID\" : \"2mWn90b8Y4C2vL7qCxDW8f38.acmepaymentscorp\",\n  \"Environment\" : \"Sandbox\",\n  \"State\" : \"apicontract.status.activated\",\n  \"ContractScope\" : {\n    \"Restricted\" : false\n  },\n  \"Updated\" : \"2014-10-01T19:38:20Z\",\n  \"UpdatedInMillis\" : 1412192300000,\n  \"Status\" : \"com.soa.apicontract.inforce\"\n}\n</code></pre>","operationId":"POST /contracts","consumes":["application/json","application/xml","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"produces":["application/json","application/xml","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v1+json","application/vnd.soa.v1+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"parameters":[{"in":"body","name":"body","required":false}],"responses":{"default":{"description":" "}}}},"/contracts/{ContractID}":{"get":{"description":"<p>Retrieves information about the specified contract.\nNote: To get a list of contracts for a specific app or API you can use GET /api/apps/versions/{AppVersionID}/contracts or\nGET /api/apis/versions/{APIVersionID}/contracts. This operation returns a specific contract. If you have the ContractID,\nyou can use this operation to get information about the contract. <br />\n<strong>Authorization Roles/Permissions:</strong> To complete this operation successfully, a user must be a member of the applicable team\n(App team member or API Admin) or a Site Admin.</p>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Tue, 30 Sep 2014 00:00:00 GMT\n\n{\n  \"ContractID\" : \"6e56a1d4-308d-4269-a4d7-b47781664921.acmepaymentscorp\",\n  \"APIVersionID\" : \"b9ef39d6-5eb4-45dd-9a53-d126c83935d7.acmepaymentscorp\",\n  \"RuntimeID\" : \"5GeZHyOZUlk8ISehxqO2swA6.acmepaymentscorp\",\n  \"Environment\" : \"Production\",\n  \"State\" : \"apicontract.status.activated\",\n  \"ContractScope\" : {\n    \"Restricted\" : true,\n    \"LicenseID\" : [ \"0876cfb9-a308-4f24-a8b2-fc20493f0afb.acmepaymentscorp\" ]\n  },\n  \"Updated\" : \"2014-09-30T18:19:59Z\",\n  \"UpdatedInMillis\" : 1412101199000,\n  \"Status\" : \"com.soa.apicontract.inforce\"\n}\n</code></pre>","operationId":"GET /contracts/{ContractID}","produces":["application/json","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"parameters":[{"name":"ContractID","in":"path","required":true}],"responses":{"default":{"description":" "}}},"post":{"operationId":"POST /contracts/{ContractID}","consumes":["application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"produces":["application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"parameters":[{"name":"ContractID","in":"path","required":true},{"in":"body","name":"body","required":false}],"responses":{"default":{"description":" "}}},"put":{"description":"<p>Updates information about an app/API contract. <br />\n<strong>Authorization Roles/Permissions:</strong> To complete this operation successfully, a user must be a member of the applicable team (App\nteam member or API Admin).</p>\n<h4>Sample Request</h4>\n<pre><code>Accept: application/json\nContent-Type: application/json\nX-Csrf-Token_{tenant}: {TokenID}\n\n{\n  \"ContractID\" : \"6e56a1d4-308d-4269-a4d7-b47781664921.acmepaymentscorp\",\n  \"APIVersionID\" : \"b9ef39d6-5eb4-45dd-9a53-d126c83935d7.acmepaymentscorp\",\n  \"RuntimeID\" : \"5GeZHyOZUlk8ISehxqO2swA6.acmepaymentscorp\",\n  \"Environment\" : \"Production\",\n  \"State\" : \"apicontract.status.suspended\",\n  \"ContractScope\" : {\n    \"Restricted\" : true,\n    \"LicenseID\" : [ \"0876cfb9-a308-4f24-a8b2-fc20493f0afb.acmepaymentscorp\" ]\n  },\n  \"Status\" : \"com.soa.apicontract.inforce\"\n}\n</code></pre>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Tue, 30 Sep 2014 00:00:00 GMT\n\n{\n  \"ContractID\" : \"6e56a1d4-308d-4269-a4d7-b47781664921.acmepaymentscorp\",\n  \"APIVersionID\" : \"b9ef39d6-5eb4-45dd-9a53-d126c83935d7.acmepaymentscorp\",\n  \"RuntimeID\" : \"5GeZHyOZUlk8ISehxqO2swA6.acmepaymentscorp\",\n  \"Environment\" : \"Production\",\n  \"State\" : \"apicontract.status.suspended\",\n  \"ContractScope\" : {\n    \"Restricted\" : true,\n    \"LicenseID\" : [ \"0876cfb9-a308-4f24-a8b2-fc20493f0afb.acmepaymentscorp\" ]\n  }\n}\n</code></pre>","operationId":"PUT /contracts/{ContractID}","consumes":["application/xml","application/json","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"produces":["application/xml","application/json","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v1+json","application/vnd.soa.v1+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"parameters":[{"name":"ContractID","in":"path","required":true},{"in":"body","name":"body","required":false}],"responses":{"default":{"description":" "}}},"delete":{"operationId":"DELETE /contracts/{ContractID}","consumes":["*/*"],"produces":["text/plain"],"parameters":[{"name":"ContractID","in":"path","required":true}],"responses":{"default":{"description":" "}}}},"/contracts/reserveID":{"get":{"operationId":"GET /contracts/reserveID","produces":["text/plain"],"responses":{"default":{"description":" "}}}},"/contracts/{ContractDN}/package":{"get":{"description":"<p>Exports a specific app/API contract.<br />\n<strong>Authorization Roles/Permissions:</strong> To complete this operation successfully, a user must be a member of the applicable\nteam (App team member or API Admin) or a Site Admin or Business Admin.</p>\n<p>The response content is sent as the export file named in the Content-Disposition header.</p>\n<h4>Sample Request</h4>\n<pre><code>GET /api/contracts/{contract}/package?migration.export.include.apis=true&amp;migration.export.include.apps=true&amp;migration.export.include.licenses=true&amp;migration.qospolicy.export=true&amp;download=true&amp;wrapInHTML=true HTTP/1.1\nHost: {hostname}\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nX-Csrf-Token_{tenant}: {TokenID}\n</code></pre>\n<h5>Additional Query Parameters</h5>\n<p>The following query parameters are optional.</p>\n<p><strong>download</strong> (string) If set to true (the default), the content is downloaded. If set to false, the user is prompted for content disposition<br />\n<strong>migration.export.include.apps</strong> (boolean) If specified with a true value, apps are included in the export file <br />\n<strong>migration.export.include.apis</strong> (boolean) If specified with a true value, APIs are included in the export file <br />\n<strong>migration.export.include.licenses</strong> (boolean) If specified with a true value, Licenses are included in the export file <br />\n<strong>migration.qospolicy.export</strong> (boolean) If specified with a true value, Quality of Service policies are included in the export file</p>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nContent-Type: application/octet-stream\nContent-Disposition: attachment;filename=apicontract-export.zip\n</code></pre>","operationId":"GET /contracts/{ContractDN}/package","produces":["application/octet-stream"],"parameters":[{"name":"ContractDN","in":"path","required":true}],"responses":{"default":{"description":" "}}}},"/contracts/{ContractDN}/actions":{"post":{"description":"<p>Executes workflow actions associated with a specific change of contract status.<br />\n<strong>Authorization Roles/Permissions:</strong> To complete this operation successfully, a user must be a member of the applicable team\n(App team member or API Admin). However, the workflow itself might enforce additional requirements:</p>\n<ul>\n<li>The specific workflow action to be executed must be valid for the specific contract the action will be performed on.</li>\n<li>In addition, each action might require its own conditions. Some workflow actions can only be performed by an API Admin, some by an\napp admin, and so forth. Depending on the combination of action name and ContractID, this operation might require different roles.\nFor example, Activate can only be done by an API admin or business admin; Resubmit can be done by app team members or API admins.\nCustom workflow definitions could require different roles for different actions.</li>\n</ul>\n<h4>Sample Request</h4>\n<pre><code>POST /api/contracts/contract25519.acmepaymentscorp/actions HTTP/1.1\nHost: {hostname}\nAccept: */*\nContent-Type: application/json; charset=UTF-8\nX-Csrf-Token_{tenant}: {TokenID}\n\n{\n  \"ActionName\":\"apicontract.action.activate\",\n  \"Comments\":\"Granting production access (activating).\"\n}\n</code></pre>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nContent-Type: text/plain\nDate: Wed, 10 Jul 2013 19:57:49 GMT\n\napicontract.status.activated\n</code></pre>","operationId":"POST /contracts/{ContractDN}/actions","consumes":["application/json","application/vnd.soa.v71+json","application/vnd.soa.v72+json","application/vnd.soa.v80+json","application/vnd.soa.v71+xml","application/vnd.soa.v72+xml","application/vnd.soa.v80+xml","application/vnd.soa.v81+xml","application/vnd.soa.v81+json"],"produces":["text/plain"],"parameters":[{"name":"ContractDN","in":"path","required":true},{"in":"body","name":"body","required":false}],"responses":{"default":{"description":" "}}}}}}