{"swagger":"2.0","info":{"description":"The API used to report and manage audit trails.","version":"8.0.0","title":"Audit Trail Management API"},"host":"0.0.0.0","basePath":"/rest","schemes":["https","http"],"paths":{"/audittrail/{id}/workflow":{"put":{"summary":"Perform Workflow Action","description":"<p>Performs a workflow action on the audit record with the given ID. A usage example is as follows:</p>\n<h4>Sample Request</h4>\n<pre><code>PUT /rest/audittrail/10001/workflow HTTP/1.1\n{\n    \"action\" : \"OBSERVE\",\n    \"comment\" : \"Observed record, no action taken\",\n    \"userName\" : \"jdoe\"\n}\n</code></pre>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\n</code></pre>","operationId":"PUT /audittrail/{id}/workflow","consumes":["application/json","application/xml","text/xml"],"parameters":[{"name":"id","in":"path","description":"ID of the audit record to perform the action on.","required":true},{"in":"body","name":"body","description":"The action to perform.","required":true}],"responses":{"default":{"description":" "}}}},"/audittrail":{"get":{"summary":"Get Audit Trail","description":"<p>Retrieves the audit records meeting the given criteria. The following usage example\nillustrates a query for all OBSERVED or RESOLVED records operated on by jdoe between\n2015-05-01T16:21:17 and now. It also illustrates paging by asking for records starting\nfrom position 50 and to only return 50 records.</p>\n<h4>Sample Request</h4>\n<pre><code>GET /rest/audittrail?state=OBSERVED&amp;state=RESOLVED&amp;actor=jdoe&amp;from=2015-05-01T16:21:17&amp;start=50&amp;count=50 HTTP/1.1\nAccept: application/json\n</code></pre>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n    \"totalCount\" : \"50\",\n    \"records\" : [\n        {\n            \"id\" : \"10001\",\n            \"userName\" : \"jdoe\",\n            \"appName\" : \"console-1\",\n            \"action\" : \"Add Policy\",\n            \"description\" : \"Policy [P1] added.\",\n            \"generatedAt\" : \"2015-05-01T16:21:17\n            \"workflow\" : {\n                \"state\" : \"RESOLVED\",\n                \"receivedAt\" : \"2015-05-01T16:21:18\",\n                \"observedBy\" : \"jdoe\",\n                \"observedAt\" : \"2015-05-01T17:20:10\",\n                \"resolvedBy\" : \"jdoe\",\n                \"resolvedAt\" : \"2015-05-01T18:32:40\",\n                \"comments\" : [\n                    {\n                        \"commentId\" : \"1\", \n                        \"comment\" : \"Will investigate.\",\n                        \"userName\" : \"jdoe\",\n                        \"createdAt\" : \"2015-05-01T17:20:10\"\n                    },\n                    {\n                        \"commentId\" : \"2\", \n                        \"comment\" : \"Figured it out.\",\n                        \"userName\" : \"jdoe\",\n                        \"createdAt\" : \"2015-05-01T18:32:40\"\n                    }\n                ]\n            }\n        },\n        ... not shown for brevity ...\n    ],  \n    \"listIncomplete\" : \"true\"\n}\n\nThe *listIncomplete* field in the response indicates there are more records \nbeyond the 50 that match the given criteria.\n</code></pre>","operationId":"GET /audittrail","produces":["application/json","application/xml","text/xml"],"parameters":[{"name":"user","in":"query","description":"Name of the user who's action was audited to filter on.","required":false},{"name":"action","in":"query","description":"Action audited to filter on.","required":true},{"name":"from","in":"query","description":"Date at which only audit records reported after will be returned.","required":false},{"name":"to","in":"query","description":"Date at which only audit records reported before will be returned.","required":false},{"name":"state","in":"query","description":"States of the audit records to filter on.","required":false},{"name":"actor","in":"query","description":"Indicates only audit records that the user with the given username performed a workflow action on should be returned.","required":false},{"name":"start","in":"query","description":"To page the results this integer indicates the first audit record from the full result set to return as the first item of the page.","required":false},{"name":"count","in":"query","description":"To page the results this integer indicates the number of items thatshould be returned in the page.","required":false}],"responses":{"default":{"description":" "}}},"post":{"summary":"Add Audit Record","description":"<p>Adds an audit trail record.</p>\n<h4>Sample Request</h4>\n<pre><code>POST /rest/audittrail HTTP/1.1\nContent-Type: application/json\n\n{\n    \"userName\" : \"jdoe\",\n    \"appName\" : \"console-1\",\n    \"action\" : \"Add Policy\",\n    \"description\" : \"Policy [P1] added.\",\n    \"generatedAt\" : \"2015-05-01T16:21:17\n}\n</code></pre>\n<h4>Sample Response</h4>\n<pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n    \"id\" : \"10001\",\n    \"userName\" : \"jdoe\",\n    \"appName\" : \"console-1\",\n    \"action\" : \"Add Policy\",\n    \"description\" : \"Policy [P1] added.\",\n    \"generatedAt\" : \"2015-05-01T16:21:17\n    \"workflow\" : {\n      \"state\" : \"UNOBSERVED\n      \"receivedAt\" : \"2015-05-01T16:21:18\",\n    }\n}\n</code></pre>\n<p>Note the <em>id</em> property is not provided in the request but is provided in the\nresponse message. The <em>id</em> can then be used when performing workflow actions.\nThe workflow is also auto-generated and provided in the response where it indicates\nthe initial state and when the system received the record.</p>","operationId":"POST /audittrail","consumes":["application/json","application/xml","text/xml"],"parameters":[{"in":"body","name":"body","description":"The audit trail record to add.","required":true}],"responses":{"default":{"description":" "}}}}}}