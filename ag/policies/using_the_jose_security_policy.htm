<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Policies for Policy Manager 8.x</title>
<link href="../style/reset.css" rel="stylesheet" type="text/css" />
<link href="../style/base.css" rel="stylesheet" type="text/css" />
<link href="../document.css" rel="stylesheet" type="text/css" />

</head>
<body>
<div class="documentation supportContent">
<!-----
layout: page
title: Using the JOSE Security Policy
description: Learn how to use the JOSE security policy to sign and encrypt message content.
product: ag
category: learn
sub-nav-class: Policies - Operational
weight: 04
type: page
nav-title: JOSE Security Policy - Using
----->
<h2 id="top">Using the JOSE Security Policy</h2>
<p>Learn how to use the JOSE security policy to sign and encrypt message content.</p>

<p>
<a href="about_policies_view.htm" class="button secondary">About Policies</a>  
<a href="policy_management.htm" class="button secondary">Managing Policies</a>  
<a href="policies_operational_about.htm" class="button secondary">About Operational Policies</a>
</p>


<h5 class="stamp">Supported Platforms: 8.2x</h5>


<div class = "divider1"></div>
<h3 style="color: gray;">Table of Contents</h3>
<ol class="table_of_contents">
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#jose_create_config">Creating and Configuring the JOSE Security Policy</a>    </li>
  
  <li><a href="#jose_config_options">Configuring JOSE Security Policy Options</a></li>
  <li><a href="#config_security_options">Configuring JOSE Security Audit Options</a> </li>
</ol>
<div class = "divider1"></div>



<a name="introduction"></a><h3>Introduction</h3>
<p>The JOSE Security Policy is an out-of-the-box operational policy that is part of the Policy Manager default installation. You can attach this policy to RESTful and Messaging services to secure any message content; it signs and/or encrypts the message content. Configuration options are flexible so that you can add more or less security as needed. You can also configure the Initiator Subject category that the authenticated identity will be used as.</p>
<p>This policy conforms to the following standards:</p>
<ul>
  <li>JSON Web Signature (JWS) (<a href="https://tools.ietf.org/html/rfc7515" title="JWS standard" target="_blank">https://tools.ietf.org/html/rfc7515</a>) </li>
  <li>JSON Web Encryption (JWE) (<a href="https://tools.ietf.org/html/rfc7516" title="JWE standard" target="_blank">https://tools.ietf.org/html/rfc7516</a>)</li>
</ul>
<p><a href="#top">back to top</a></p>



<a name="jose_create_config"></a><h3>Creating and Configuring the JOSE Security Policy</h3>
<p>There are two main tasks in configuring the JOSE Security Policy:</p>
<ul>
  <li>Creating the policy. See <a href="#proc_jose_policy_create">To create the JOSE security policy</a>.</li>
  <li>Configuring the policy details. See <a href="#proc_jose_policy_configure">To configure the JOSE security policy</a>.</li>
  </ul>

<a name="proc_jose_policy_create"></a><h5>To create the JOSE security policy:</h5>
<ol>
  <li>Log in to Policy Manager: {protocol}://{hostname}:{port}/ms/index.do.</li>
  <li>Go to <strong>Workbench</strong> and click <strong>Browse</strong>.</li>
  <li>Navigate to the <strong>Policies</strong><em> &gt; </em><strong>Operational </strong>folder of the  Organization that includes services you want to add this policy to.</li>
  <li>At the <strong>Policies Summary</strong> page, click <strong>Add Policy</strong>.</li>
  <li>On the <strong>Select Policy Creation Option</strong> page, in the <strong>Add Policy</strong> field, choose <strong>JOSE Security Policy</strong>, and then click <strong>Next</strong>.</li>
  <li>On the <strong>Specify Policy Details</strong> page, provide:
    <ul>
      <li>Name (required)</li>
      <li>Policy Key (optional)</li>
      <li>Description (optional)</li>
    </ul>
  </li>
  <li>Click <strong>Finish</strong>.</li>
</ol>

<a name="proc_jose_policy_configure"></a><h5>To configure the JOSE security policy:</h5>
<ol>
  <li>Create the policy as covered above.</li>
  <li>At the <strong>Policies Summary</strong> page, in the <strong>JOSE Security Policy</strong> section, click <strong>Modify</strong>. The <strong>Specify JOSE Security Policy Options page</strong> appears, as shown below.
    <p><img src="images/jose_policyoptions.jpg" alt="JOSE policy options page" /></p>
  </li>
  <li>Specify values. For information about the fields, refer to <a href="#config_policy_options">Configuring JOSE Security Policy Options</a>below.</li>
  <li>Click <strong>Next</strong>. The <strong>Specify JOSE Security Audit Options</strong> page appears, as shown below.
  <p><img src="images/jose_audit_options.jpg" alt="JOSE security policy, audit options" /></p></li>
  <li>Specify values. For information about the fields, refer to <a href="#config_audit_options">Configuring JOSE Security Audit Options</a> below.</li>
  <li>When done, click <strong>Finish</strong>. The completion summary is displayed. An example is shown below.
    <p><img src="images/jose_completionsummary.jpg" alt="JOSE Security Policy completion summary" /></p>
  </li>
  <li>Click <strong>Close</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="jose_config_options"></a><h3>Configuring JOSE Security Policy Options</h3>
<p>Once you've created the policy, you can configure the policy options.</p>
<p>There are five main configuration sections you can use to tailor your JOSE security policy options:</p>
<ul>
  <li><strong>Protection Scope</strong>: Identifies which messages in a message exchange will be protected by the policy. Choices:
<ul>
<li><strong>IN</strong>: protects all incoming messages.</li>
<li><strong>OUT</strong>: protects all outgoing messages.</li>
<li><strong>FAULT</strong>: protects all fault messages.</li>
</ul>
 </li>
  <li><strong>Serialization</strong>: You can specify Compact or JSON serialization.</li>
  <li><strong>Sign Content</strong>: If this box is checked, the content is signed using the selected Signature/MAC algorithm. If needed, you can check the optional <strong>Embed Key</strong> box to require that the public key (corresponding to the private key used to sign the content) is embedded in the JSON structure in the <strong>jwk</strong> header, so that it can be verified later.
  <p>By default, this checkbox is cleared, so this section is disabled. To enable it, just check the box, specify the algorithm from the drop-down list, and choose <strong>Embed Key</strong> if needed.</p></li>
  <li><strong>Encrypt Conten</strong>t: if this box is checked, the content is encrypted using the selected Encryption Algorithm. You can also protect the encryption key by selecting an optional Key Management Algorithm. If needed, you can check the optional Embed Key box to require that the public key (corresponding to the private key used to sign the content) is embedded in the JSON structure in the <strong>jwk</strong> header, so that it can be verified later.
    <p>By default, this checkbox is cleared, so this section is disabled. To enable it, just check the box. The default Signature/MAC algorithm value is HS256, and the default Key Management Algorithm value is <strong>None</strong>.</p>
 </li>
  <li><strong>Initiator Subject Category</strong>: Here, you can specify the identity of the initiator of the message.This is the identity whose private key is used to sign the IN message and whose public key is used to encrypt OUT and FAULT messages. Predefined categories include <strong>Consumer</strong> and <strong>End-User</strong>. The default is <strong>Consumer</strong>. You can also choose <strong>User-Defined</strong> and specify a custom name. If you choose <strong>None</strong>, this indicates that the selection of the identity whose keys should be used for signing and encrypting content is left to the manageability container, not specified by this policy.</li>
</ul>


<a name="config_audit_options"></a><h3>Configure JOSE Security Audit Options</h3>
<p>Once you've created the policy, you can configure the audit options.</p>
<p>Choose from the available options controlling the audit data that is captured:</p>
<ul>
  <li><strong>Generate Audit Data</strong>: captures all message data, whether success or failure, for all message exchanges.</li>
  <li><strong>On Error Only</strong>: Captures audit data only when an error occurs on a message exchange.</li>
</ul>


<a name="jose_policy_attach"></a><h3>Attach Policy</h3>
<p>To use the JOSE security policy, go to the <strong>Policies</strong> folder in the Root Organization and attach the policy to a web service, binding, or binding operation.</p>
<p><a href="#top">Back to top</a></p>




</div>
</body>
</html>