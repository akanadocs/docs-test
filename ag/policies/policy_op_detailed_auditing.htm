<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Policies for Policy Manager 8.x</title>
<link href="../../style/reset.css" rel="stylesheet" type="text/css" />
<link href="../../style/base.css" rel="stylesheet" type="text/css" />
<link href="../../style/document.css" rel="stylesheet" type="text/css" />

</head>
<body>
<div class="documentation supportContent">
<!-----
layout: page
title: Using the Detailed Auditing Policy
description: Learn how to audit messages and record the message metrics in the Monitoring Logs tab as well as messages of each exchange.
product: ag
category: learn
sub-nav-class: Policies - Operational
weight: 04
type: page
nav-title: Detailed Auditing
----->
<h2 id="top">Using the Detailed Auditing Policy</h2>
<p>Learn how to enable detailed auditing of message size, bindings, and contracts.</p>

<p>
<a href="about_policies_view.htm" class="button secondary">About Policies</a>  
<a href="policy_management.htm" class="button secondary">Managing Policies</a>  
<a href="policies_operational_about.htm" class="button secondary">About Operational Policies</a>
</p>

<h5 class="stamp">Supported Platforms: 7.x, 8.0</h5>

<div class = "divider1"></div>



<h3 style="color: gray;">Table of Contents</h3>
<ol class="table_of_contents">
	<li><a href="#introduction">Introduction</a></li>
	<li><a href="#configuration">Configuration</a></li>
	<li><a href="#uc_policy_qos_detailed_auditing_pm">Detailed Auditing Policy: use case for Policy Manager</a></li>
</ol>
<div class = "divider1"></div>



<h3 id="introduction">Introduction</h3>
<p>The Detailed Auditing Policy is an out-of-the-box policy that is part of the Policy Manager default installation. It is an instance of the Auditing Service Policy. It provides detailed auditing of messages and records the message metrics in the <em>Monitoring &gt; Logs</em> tab as well as the messages of each exchange. The policy is located in the <em>Policies</em> folder of the Root Organization.</p>
<p>The following message metrics are recorded:</p>
<ul>
	<li><strong>Input Message</strong>: Audits Input Message content.</li>
	<li><strong>Output Message</strong>: Audits Output Message content.</li>
	<li><strong>Fault Message</strong>: Audits Fault Message content.</li>
	<li><strong>Message Size</strong>: Audits the size of messages in the exchange.</li>
	<li><strong>Binding</strong>: Audits binding information.</li>
	<li><strong>Transport</strong>: Audits 	 Transport information.</li>
	<li><strong>Contract</strong>: Audits the contract governing a message.</li>
</ul>
<p>The following identities are audited:</p>
<ul>
	<li><strong>Consumer</strong>: Audits consumer identity sent with a request message.</li>
	<li><strong>End User</strong>: Audits end-user identity sent with a request message.</li>
</ul>
<p><img src="images/detailedauditing1.jpg" width="453" height="463" alt="" /></p>
<p><a href="#top">back to top</a></p>



<h3 id="configuration">Configuration</h3>
<p>Let's take a quick walkthrough of the Detailed Auditing Policy configuration process to get you started.



</p>
<h5>Step 1: Attach Policy</h5>
<p>Go to the <em>Policies</em> folder in the Root Organization and attach it  to a web service, operation, or binding that you would like to audit.</p>
<h5>Step 2: Test Policy and View Monitoring Data</h5>
<p>After you've attached the Detailed Auditing Policy to a web service, operation, or binding, send a request to your service and go to the <em>Services &gt; Monitoring</em> section to view the results for Logs, Real Time Charts, and Historical Charts. For more information on using the monitoring functions, refer to the Policy Manager Online Help, available via the Help button.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="uc_policy_qos_detailed_auditing_pm">Detailed Auditing Policy: use case for Policy Manager</h3>
<p>This section includes the following usage scenario for the Detailed Auditing Policy:</p>
<ul>
	<li><a href="#uc_policy_qos_detailed_auditing_pm_01">Audit Entire Message and Message Metrics</a></li>
</ul>


<h4 id="uc_policy_qos_detailed_auditing_pm_01">Audit Entire Message and Message Metrics</h4>
<p>Audit entire message and message metrics of each exchange in usage logs of Monitoring tab.</p>
<ol>
	<li>Create a physical service in the <strong>Policy Manager Management Console</strong> using <strong>Create Physical Service</strong>.</li>
	<li>Provide service details and finish the wizard.</li>
	<li>Using <strong>Virtualize Service</strong>, virtualize and host the physical service on Network Director (<strong>ND1</strong>), and assign a name (for example, <strong>Vs1</strong>).</li>
	<li>Attach the Detailed Auditing Policy located in the Root Organization Policies folder to the Vs1 service in <strong>Service Details</strong> &gt; <strong>Policy Attachments</strong> &gt; <strong>Operational Policies</strong>.</li>
	<li>Send requests from the application/client to the Vs1 service.</li>
	<li>The details of the usage logs show the recorded information for each exchange.
  <p><img src="images/detailed_auditing_uc_pm_01.jpg" alt="" /></p>
  <p>The fields that are recorded in each exchange are:</p>
    <ol>
      <li>Message Size</li>
      <li>Input Message</li>
      <li>Output Message</li>
      <li>Fault Message</li>
      <li>Transport</li>
      <li>Contract</li>
      <li>Binding</li>
      <li>Identities: Consumer/End-User</li>
    </ol>
    <p><img src="images/detailed_auditing_uc_pm_02.jpg" alt="" /></p>
    <p><img src="images/detailed_auditing_uc_pm_03.jpg" alt="" /></p></li>
</ol>
<p><a href="#top">Back to top</a></p>



<div class = "divider1"></div>



<h3 id="related_topics">Related Topics</h3>
<div class="relatedlinks">
<ul>
	<li><a href="about_policies_view.htm">About Policies</a></li>
	<li><a href="policy_management.htm">Managing Policies</a></li>
	<li><a href="policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="http://docs.akana.com/cm/learnmore/basics_glossary.htm">Glossary of Terms for the Developer Portal</a></li>
</ul>
</div>