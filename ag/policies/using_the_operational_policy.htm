---
layout: page
title: Using the Metrics Policy in Policy Manager 7.x
description: Learn how to collect rollup data on specific services/operations using a Metrics Policy.
product: ag
category: learn
sub-nav-class: Monitoring
weight:	5
sub-nav-class: Operational Policies
type: page
nav-title: Using the Metrics Policy
---
<a name="top"></a>
<div class="documentation supportContent">
  <h2 name="top">Using the Metrics Policy</h2>
  <p>Learn how to  collect rollup data on specific services/operations using a Metrics Policy.</p>

<a href="policy_management.htm" class="button secondary">Managing Policies</a>
  <p></p>
  <div class = "divider1"></div>
   <h3 style="color: gray;">Table of Contents</h3>

   <ol class="table_of_contents">

 <li><a href="#introduction">Introduction</a></li>

  <li><a href="#configuration">Configuration</a></li>

  </ol>
  <div class = "divider1"></div><p></p>

<a name="introduction">
<h3>Introduction</h3></a>

<p>The Metrics Policy is an Operational policy that allows you to collect roll-up data for selected services/operations that the policy is attached too. A Metrics Policy is useful for:
</p>
<ul class="usingOrderedList">
  <li><strong>Database Space Conservation</strong> - Roll-up data on a large number of services can take up a significant amount of database space. Designating specific services/operations where roll-up data will be captured reduces the chance of receiving out of memory database exception errors.</li>
  <li><strong>Granular View of Service Activity</strong> - You may have a set of services that include specific operations you want to monitor at a more granular level (i.e., track service level, volume of activity, etc.).</li>
</ul>
<p>This is how it works:</p>
<ul class="usingOrderedList">
  <li>Roll-up data is controlled in the Network Director or Agent container by the <strong>metrics.rollup.reporter.requireMetricsPolicy
    property</strong> in the <strong>com.soa.metrics</strong> configuration category via the <em>Configuration</em> section in the <em>SOA Software Administration Console</em>. </li>
  <li>By default, the <strong>metrics.rollup.reporter.requireMetricsPolicy
    property</strong> is set to <strong>False</strong>. This means that roll-up data is collected for all managed services in Policy Manager. Roll-up data can be viewed in the Logs, Real Time Charts, and Historical Charts  in the<em> Services &gt; Monitoring</em> section. </li>
  <li>If you would like to change the roll-up data collection approach you change the property state to <strong>True</strong>, create a Metrics Policy in the <em>Policy Manager Management Console</em> and attach the policy to any service or service operation you would like to capture roll-up data for.
    <a name="black_list_default_policy">

    </a></li>
</ul>
<a name="black_list_default_policy">
<p><a href="#top">Back to top</a></p></a><a name="configuration">
<h3>Configuration</h3></a>
<p>Let's take a quick walkthrough of the Metrics Policy configuration process to get your started.</p>
<h5>Step 1: Change Roll-up Data Property</h5>
<h5></h5>
<ul class="usingOrderedList">
  <li>Launch the <em>SOA Software Administration Console</em> for your Network Director or Agent container instance.</li>
  <li> Select the <em>Configuration</em> tab.</li>
  <li>Select  <strong>com.soa.metrics</strong> in the <em>Configuration Categories</em> section. The default status of <strong>False</strong> indicates that roll-up data is currently being captured for all managed services.</li>
  <li> Change the state to <strong>True</strong> and save. </li>
</ul>
<p><img src="images/metrics_admin_console.jpg" width="644" height="391"></p>
<h5>Step 2: Add Policy / Use System Policy</h5>
<ul class="usingOrderedList">
  <li>In Policy Manager, you can create a Metrics Policy instance using <strong>Add Policy</strong> in the <em>Policies &gt; Operational Policies</em> section. </li>
  <li><em>Note: The  Metrics Policy does not require any configuration. </em></li>
</ul>
<h5>Step 3: Attach Policy</h5>
<p>After you have saved your policy you can  attach it to a web service  or operation that you would like to capture roll-up data for. </p>
<p><img src="images/metrics_policy_attachment.jpg" width="608" height="163"></p>
<h5>Step 4: Test Policy and View Monitoring Data</h5>
<p>After you attached the Metrics Policy to a service or operation, send a request to your service and go to the <em>Services &gt; Monitoring</em> section to view the results for Logs, Real Time Charts, and Historical Charts. Refer to the Policy Manager Online Help (i.e., Help button) for more information on the using the monitoring functions.</p>
<p><a href="#top">Back to top</a></p>

<div class = "divider1"></div>
