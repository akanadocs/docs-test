---
layout: page
title: Managing Policies
description: Overview of the basic actions you can perform to manage policies, and tools for managing policy definitions.
product: ag
category: learn
sub-nav-class: Policies
weight: 04
type: page
nav-title: Managing Policies
---
<h1 id="top">Managing Policies</h1>
<p>Overview of the basic actions you can perform to manage policies, and tools for managing policy definitions.</p>
<p>For information about using policies in the context of the Community Manager developer portal, see <a href="../../cm/learnmore/bus_admin_organizations.htm#h_business_policies">Business Policies</a>.</p>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#add_policy">Add Policy</a></li>
	<li><a href="#view_policy_details">View Policy Details</a></li>
	<li><a href="#view_policy_overview">View Policy Overview</a></li>
	<li><a href="#attach_policy">Attach Policy</a></li>
	<li><a href="#modify_policy_information">Modify Policy Information</a></li>
	<li><a href="#policy_activate">Activate a Policy</a></li>
	<li><a href="#policy_new_version">Make a New Policy Version</a></li>
	<li><a href="#change_organization_policy">Change Organization</a></li>
	<li><a href="#copy_policy">Copy Policy</a></li>
	<li><a href="#delete_policy">Delete Policy</a></li>
	<li><a href="#export_policy">Export Policy</a></li>
	<li><a href="#view_policy_references">View Policy References</a></li>
	<li><a href="#assign_policy_operation">Assigning a Policy at the Operation Level</a></li>
	<li><a href="#policies_regex">Using Regular Expressions in Policies</a></li>
	<li><a href="#policies_jsonpath">Using JSONPath in Policies</a></li>
	<li><a href="#policies_xpath">Using XPath in Policies</a></li>
</ol>
<hr class="divide_hr" />



<h2 id="policy_management_functions">Policy Management Functions</h2>
<p>The policy management functions below apply to policy definitions in the Policies folder.</p>
<p>Policy management functions are available on the <strong>Policy Summary</strong> drop-down menu or via the Actions Portlet on the <strong>Policies</strong> &gt; <strong>Details</strong> page.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="add_policy">Add Policy</h2>
<p>Used to define policies that are used to manage web service endpoints. Notes:</p>
<ul>
	<li>A policy is initialized with a default configuration. You can then customize the policy to address the unique requirements of your web service management system.</li>
	<li>When you've configured the policy, you'll need to activate it via the <strong>Policy Workflow Portlet</strong> before it is visible and available for attachment in the hierarchy tree.</li>
	<li>After you've activated the policy, you can then attach it to objects it will be managing, including Organizations, Services, Operations, Bindings, and Access Points.</li>
</ul>

<h4 id="proc_policy_add">To add a policy</h4>
<p>On the main <strong>Policies Summary</strong> page, select <strong>Add Policy</strong>, select a policy type, and assign a name and description. The <strong>Add Policy</strong> Wizard creates a policy instance that you can modify on the <strong>Policy Details</strong> page.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="view_policy_details">View Policy Details</h2>
<p>Once you've activated a policy, you can't change any of the policy information unless you start a new version. However, you can view the details of the current policy.</p>

<h4 id="proc_policy_view_details">To view policy details in Policy Manager</h4>
<ol>
	<li>In Policy Manager, go to <strong>Workbench</strong> &gt; <strong>Browse</strong> &gt; <strong>Organization</strong>. Choose the applicable <strong>Policies</strong> folder (<strong>Compliance</strong>, <strong>Operational</strong>, or <strong>QoS</strong>). The <strong>Policies Summary</strong> screen displays.</li>
	<li>To view the details for a specific policy, do one of the following:
		<ul>
			<li>Click the policy name and then, in the second section, click <strong>View</strong>.</li>
			<li>Find the policy on the list and then, from the <strong>Actions</strong> drop-down on the right, choose <strong>View Policy Details</strong>.</li>
		</ul>
			<p> An example is shown below. The top pane is the policy overview, and summarizes policy metadata such as name and type; the second pane summarizes the policy details, including all the technical settings that determine what the policy does.</p>
			<p><img src="images/policy_view_details.jpg" alt="Viewing the policy details" /></p>
		</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="view_policy_overview">View Policy Overview</h2>
<p>The policy overview is a summary of basic general information about the policy, such as policy type, name, version, and description.</p>
<p>Once you've activated a policy, you can't change any of the policy information, including the overview, unless you start a new version. However, you can view the overview for the current policy.</p>
<p>To view the policy overview, follow the instructions in <a href="#proc_policy_view_details">To view policy details in Policy Manager</a> above. The Policy Overview is at the top.</p>
<p>If the policy is in Draft state, you'll see a <strong>Modify</strong> link, and you'll be able to modify the policy overview.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="attach_policy">Attach Policy</h2>
<p>Policies defined in the policies object (the Policies Folder) can be assigned to an organization, and to six different elements of a service. Each policy assignment is based on the business requirements defined for policies supported in each policy category (Compliance, Operational, and QoS) in addition to custom defined policies. Notes:</p>
<ul>
	<li> When a policy is assigned at the <strong>Service Details</strong> level, the policy is referenced in all other elements of the service (operations, bindings, access points).</li>
	<li> When a policy is referenced in a <strong>Policy Attachments Portlet</strong>, it is preceded with (from &lt;object name&gt;).</li>
	<li> Once a policy is referenced, it can only be removed at the source attachment point (in the Policy Attachments Portlet of the service).</li>
	<li>You can add additional policies to each service element using the Policy Attachments Portlet in each Management Console section.</li>
</ul>
<h4>To attach a policy</h4>
<p>Go to the <strong>Policy Attachments</strong> portlet on the <strong>Policy Details</strong> page where you would like to attach a policy, and select <strong>Manage</strong>. Select a policy from the tree and save the configuration.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="modify_policy_information">Modify Policy Information</h2>
<p>Allows you to change the name and description of a policy.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_activate">Activate a Policy</h2>
<p>When you create and configure a policy, the policy is in <strong>Draft</strong> state. When the policy configuration is complete, activate the policy: in the Policy Workflow section, click <strong>Activate Policy</strong>, as shown below, and then confirm.</p>
<p><img src="images/policy_activate.png" alt="Activating a policy" /></p>
<p>A policy in Draft state is not available for general use. Once you activate the policy, it is in <strong>Active</strong> state and is available for use.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_new_version">Make a New Policy Version</h2>
<p>If you need to change an existing policy that's in <strong>Active</strong> state, you'll need to start a new policy version. The new version is in <strong>Draft</strong> state, and can be modified, until you activate it.</p>
<p><strong>Note</strong>: When you activate a new version of the policy, it replaces the previous version in all instances where the policy is in use. Only one version of a policy is active at one time. For example, if Version 1 of a policy is attached to a service, and Version 2 is activated, Version 2 becomes the version that's attached to the service, in all instances.</p>

<h4 id="proc_policy_view_details2">To make a new policy version in Policy Manager</h4>
<ol>
	<li>In Policy Manager, go to <strong>Workbench</strong> &gt; <strong>Browse</strong> &gt; <strong>Organization</strong>. Choose the applicable <strong>Policies</strong> folder (<strong>Compliance</strong>, <strong>Operational</strong>, or <strong>QoS</strong>). The <strong>Policies Summary</strong> screen displays.</li>
	<li>On the list, find the policy, and double-click to go to the policy page.</li>
	<li>In the right pane, click <strong>Start New Version</strong>, as shown below.
<p><img src="images/policy_start_new_version.jpg" alt="Starting a new policy version" /></p></li>
	<li>At the prompt, click <strong>OK</strong>. A new version of the policy is started, in <strong>Draft</strong> state. You can now modify the policy and then activate it.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="change_organization_policy">Change Organization</h2>
<p>Allows you to move the current policy configuration to a new Organization.</p>
<ul>
	<li>Note that you can only move referenced policies (policies that are attached to an object) within the current Policy Scope (for example, Organization, Service, or Operation).</li>
	<li>If you want to move a policy to a different Organization, the references must stay in scope.</li>
	<li>To determine what references a policy might have, go to the current policy and then select <strong>View Policy References</strong>.</li>
	<li>To remove policy references, unattach the policy via the Policy Attachments Portlet.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h2 id="copy_policy">Copy Policy</h2>
<p>Allows you to replicate a policy definition and assign a new <strong>Policy Name</strong> and <strong>Policy Key</strong>. Using this function, you can configure elements that represent core functionality of a policy, replicate them to a new policy, and then perform additional customization on the copy.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="delete_policy">Delete Policy</h2>
<p>Deletes the selected policy definition. You cannot delete a policy if it's referenced (attached to one or more objects). The number of policy references is indicated on the <strong>Policies Summary</strong> page, in the <strong>#</strong> column. To view policies, select <strong>View Policy References</strong>.</p>
<p>If you want to delete a policy, you must remove the policy attachment via the Policy Attachments Portlet.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="export_policy">Export Policy</h2>
<p>Provides a method of exporting a policy definition to a <strong>Package</strong> file. This <strong>Package</strong> file can then be imported into a different Policy Manager deployment using the <strong>Import Package</strong> function.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="view_policy_references">View Policy References</h2>
<p>Displays a list of objects that the current policy is referencing.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="assign_policy_operation">Assigning a Policy at the Operation Level</h2>
<p>In some cases, you can assign a policy at the operation level, so that the policy is applied to designated operations within a service, rather than to all the operations in a service.</p>
<p>This feature is available for many policies but not all. Some example of policies that you can assign at the operation level:</p>
<ul>
	<li><a href="policy_op_cors.htm">CORS policy</a></li>
	<li><a href="policy_op_jose_security_v2.htm">JOSE Security Policy v2</a></li>
</ul>

<h4 id="proc_policy_assign_op">To assign a policy at the operation level</h4>
<ol>
	<li>In Policy Manager, in the Organization Tree, select the service. In the right pane, click <strong>Operations</strong>.</li>
	<li>Find the operation that you want to attach the policy to, and click to access the policy details,  as shown below.
		<p><img src="images/policy_attach_operation_01.jpg" alt="Attaching a policy at the operation level: choosing the operation" /></p>
	</li>
	<li>On the <strong>Operation Overview</strong> page, in one of the Policy Attachment panes, click <strong>Manage</strong>. The <strong>Attachment Point</strong> pane appears, with a tree view, as shown below.
		<p><img src="images/policy_attach_operation_02.jpg" alt="Attaching a policy at the operation level: choosing the policy" /></p>
	</li>
	<li>Expand the tree to find one or more policies you want to attach to the operation, and check one or more boxes to attach the policies.</li>
	<li>Click <strong>Apply</strong> to save and close. The policy or policies are now applied to the operation.</li>
</ol>
<p><strong>Notes:</strong></p>
<ul>
	<li>If there are any policies already attached at the service level, those also apply to the operation. In the example above, no policies are already attached.</li>
	<li>If a policy doesn't appear in the tree view, it isn't available for attaching to the policy.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h2 id="policies_regex">Using Regular Expressions in Policies</h2>
<p>Many types of policies support the use of regular expressions to define values in the policy configuration. To take advantage of this, you'll need a good working knowledge of regular expressions. Some online tools:</p>
<ul>
	<li><a href="http://rubular.com/" target="_blank">rubular.com</a> is a free online regular expression editor based on Ruby.</li>
	<li><a href="https://regex101.com/" title="link to https://regex101.com/" target="_blank">regex101.com</a> is another useful free resource.</li>
</ul>
<p>For examples of the use of regular expressions in a policy definition, see <a href="policy_op_http_malicious_pattern_detection.htm#http_mal_pattern_det_uc_00">Using the HTTP Malicious Pattern Detection Policy: Use Cases</a>.</p>
<p><strong>Note</strong>: Regular expressions work only with certain content types. For example, you cannot use regular expressions with application/json or application/xml content. Use XPath only with XML payloads. Use JSONPath only with JSON messages. Use RegEx if the content type is neither XML nor JSON.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policies_jsonpath">Using JSONPath in Policies</h2>
<p>Some types of policies allow you to filter messages by finding a fieldname in the message body using JSONPath; for example, the <a href="policy_op_detailed_auditing.htm">Detailed Auditing policy</a>.</p>
<p>An online tool for testing JSONPath:</p>
<ul>
	<li><a href="http://jsonpath.com/" title="JSONPath link" target="_blank">http://jsonpath.com/</a></li>
</ul>

<h4 id="eg_01">Example #1</h4>
<p>In the example below, a JSONPath expression is used in the Detailed Auditing Policy. This expression identifies instances of all lastfour digits in card numbers, for filtering; the policy removes this information from the log. </p>
<p><strong>Note</strong>: An alternative treatment for card information is to use the <a href="policy_op_auditing_message.htm">Auditing Message Policy</a> to mask the information (xxxx).</p>
<p><img src="images/auditing_service_filter_settings_jsonpath.jpg" alt="Using JSONPath in policies" /></p>
<p>The JSONPath expression:</p>
<pre>
$.cardNumber[*].lastfour</pre>

<h4 id="eg_02">Example #2</h4>
<p>You could use the following JSONPath expression:</p>
<pre>$.cardNumber[*].expirationdate</pre>
<p>This searches for the cardnumber expiration date, and removes this information from the log.</p>
<p>The element must be defined in the JSON Schema.</p>
<p><strong>Note</strong>: Use JSONPath only with JSON messages.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policies_xpath">Using XPath in Policies</h2>
<p>XPath (XML Path Language) is a query language that you can use to find a node name in an XML document.</p>
<p>Some types of policies allow you to filter messages using an XPath statement; for example, the <a href="policy_op_detailed_auditing.htm">Detailed Auditing policy</a>.</p>
<p>In the sample policy definition shown below, the policy will filter out the following information in messages:</p>
<ul>
	<li>In JSON: filters for credit card expiration date and, if found, does not log that information.</li>
	<li>In XML: filters for the PaymentCard object and, if found, does not log that information.</li>
</ul>
<p><strong>Note</strong>: An alternative treatment for card information is to use the <a href="policy_op_auditing_message.htm">Auditing Message Policy</a> to mask the information (xxxx).</p>
<p>The policy definition:</p>
<p><img src="images/auditing_service_filter_settings_xpath.jpg" alt="UsingXPath in policies" /></p>
<p>The XPath expression:</p>
<pre>//PaymentCard</pre>
<p>In this example, all the following XML content would be omitted in the Detailed Auditing policy, or masked in the Auditing Message Policy:</p>
<pre>Element='&lt;PaymentCard xmlns="http://www.example.org/OTA/2003/05"
  CardCode="VI"
  CardNumber="4321432143214327"
  CardType="1"
  ExpireDate="0614"
  SeriesCode="123"&gt;
     &lt;CardHolderName&gt;John Doe&lt;/CardHolderName&gt;
   &lt;/PaymentCard&gt;'</pre>
<p><strong>Note</strong>: Use XPath only with XML payloads.</p>
<p><a href="#top">Back to top</a></p>



<hr class="divide_hr" />



<h2 id="related_topics">Related Topics</h2>
<div class="relatedlinks">
<ul>
	<li><a href="about_policies_view.htm">About Policies</a></li>
	<li><a href="policy_management.htm">Managing Policies</a></li>
	<li><a href="policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="../../cm/learnmore/basics_glossary.htm">Glossary of Terms for the Community Manager developer portal</a></li>
</ul>
</div>
