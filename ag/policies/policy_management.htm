---
layout: page
title: Managing Policies
description: Overview of the basic actions you can perform to manage policies, and tools for managing policy definitions.
product: ag
category: learn
sub-nav-class: Policies
weight: 04
type: page
nav-title: Managing Policies
---
<h2 id="top">Managing Policies</h2>
<p>Overview of the basic actions you can perform to manage policies, and tools for managing policy definitions.</p>

<p>
<a href="about_policies_view.htm" class="button secondary">About Policies</a>
</p>



<div class = "divider1"></div>



<h3 style="color: gray;">Table of Contents</h3>
<ol class="table_of_contents">
	<li><a href="#add_policy">Add Policy</a></li>
	<li><a href="#attach_policy">Attach Policy</a></li>
	<li><a href="#modify_policy_information">Modify Policy Information</a></li>
	<li><a href="#change_organization_policy">Change Organization</a></li>
	<li><a href="#copy_policy">Copy Policy</a></li>
	<li><a href="#delete_policy">Delete Policy</a></li>
	<li><a href="#export_policy">Export Policy</a></li>
	<li><a href="#view_policy_references">View Policy References</a></li>
	<li><a href="#policies_regex">Using Regular Expressions in Policies</a></li>
	<li><a href="#policies_jsonpath">Using JSONPath in Policies</a></li>
	<li><a href="#policies_xpath">Using XPath in Policies</a></li>
</ol>
<div class = "divider1"></div>



<h3>Policy Management Functions</h3>
<p>The following policy management functions apply to policy definitions in the Policies folder. They are available on the <strong>Policy Summary</strong> drop-down menu or via the Actions Portlet on the <strong>Policies</strong> &gt; <strong>Details</strong> page.</p>
<p><a href="#top">back to top</a></p>



<h3 id="add_policy">Add Policy</h3>
<p>Used to define policies that are used to manage web service endpoints. Notes:</p>
<ul>
	<li>A policy is initialized with a default configuration. You can then customize the policy to address the unique requirements of your web service management system.</li>
	<li>When you've configured the policy, you'll need to activate it via the <strong>Policy Workflow Portlet</strong> before it is visible and available for attachment in the hierarchy tree.</li>
	<li>After you've activated the policy, you can then attach it to objects it will be managing, including Organizations, Services, Operations, Bindings, and Access Points.</li>
</ul>
<p>To add a policy:</p>
<p>On the main <strong>Policies Summary</strong> page, select <strong>Add Policy</strong>, select a policy type, and assign a name and description. The <strong>Add Policy</strong> Wizard creates a policy instance that you can modify on the <strong>Policy Details</strong> page.</p>
<p><a href="#top">back to top</a></p>



<h3 id="attach_policy">Attach Policy</h3>
<p>Policies defined in the policies object (the Policies Folder) can be assigned to an organization, and to six different elements of a service. Each policy assignment is based on the business requirements defined for policies supported in each policy category (Compliance, Operational, and QoS) in addition to custom defined policies. Notes:</p>
<ul>
	<li> When a policy is assigned at the <strong>Service Details</strong> level, the policy is referenced in all other elements of the service (operations, bindings, access points).</li>
	<li> When a policy is referenced in a <strong>Policy Attachments Portlet</strong>, it is preceded with (from &lt;object name&gt;).</li>
	<li> Once a policy is referenced, it can only be removed at the source attachment point (in the Policy Attachments Portlet of the service).</li>
	<li>You can add additional policies to each service element using the Policy Attachments Portlet in each Management Console section.</li>
</ul>
<h5>To attach a policy</h5>
<p>Go to the <strong>Policy Attachments</strong> portlet on the <strong>Policy Details</strong> page where you would like to attach a policy, and select <strong>Manage</strong>. Select a policy from the tree and save the configuration.</p>
<p><a href="#top">back to top</a></p>



<h3 id="modify_policy_information">Modify Policy Information</h3>
<p>Allows you to change the name and description of a policy.</p>
<p><a href="#top">back to top</a></p>



<h3 id="change_organization_policy">Change Organization</h3>
<p>Allows you to move the current policy configuration to a new Organization.</p>
<ul>
	<li>Note that you can only move referenced policies (policies that are attached to an object) within the current Policy Scope (for example, Organization, Service, or Operation).</li>
	<li>If you want to move a policy to a different Organization, the references must stay in scope.</li>
	<li>To determine what references a policy might have, go to the current policy and then select <strong>View Policy References</strong>.</li>
	<li>To remove policy references, unattach the policy via the Policy Attachments Portlet.</li>
</ul>
<p><a href="#top">back to top</a></p>



<h3 id="copy_policy">Copy Policy</h3>
<p>Allows you to replicate a policy definition and assign a new <strong>Policy Name</strong> and <strong>Policy Key</strong>. Using this function, you can configure elements that represent core functionality of a policy, replicate them to a new policy, and then perform additional customization on the copy.</p>
<p><a href="#top">back to top</a></p>



<h3 id="delete_policy">Delete Policy</h3>
<p>Deletes the selected policy definition. In order to delete a policy, it cannot be Referenced (attached to one or more objects). The number of policy references is indicated on the <strong>Policies Summary</strong> page, in the <strong>#</strong> column. To view policies, select <strong>View Policy References</strong>.</p>
<p>If you would like to delete a policy, you must remove the policy attachment via the Policy Attachments Portlet.</p>
<p><a href="#top">back to top</a></p>



<h3 id="export_policy">Export Policy</h3>
<p>Provides a method of exporting a policy definition to a <strong>Package</strong> file. This <strong>Package</strong> file can then be imported into a different Policy Manager deployment using the <strong>Import Package</strong> function.</p>
<p><a href="#top">back to top</a></p>



<h3 id="view_policy_references">View Policy References</h3>
<p>Displays a list of objects that the current policy is referencing.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="policies_regex">Using Regular Expressions in Policies</h3>
<p>Many types of policies support the use of regular expressions to define values in the policy configuration. To take advantage of this, you'll need a good working knowledge of regular expressions. Some online tools:</p>
<ul>
	<li><strong>Regular Expression Tester</strong>: <a href="http://rubular.com/" target="_blank">Rubular.com</a> provides a nice online test tool.</li>
	<li><strong>Regular Expression Builder</strong>: <a href="https://www.debuggex.com/"target="_blank">Debuggex.com</a> provides a more sophisticated (and more complex) tool for building and validating regular expressions.</li>
	</ul>
<p>For examples of the use of regular expressions in a policy definition, see <a href="policy_op_http_malicious_pattern_detection.htm#examples">Using the HTTP Malicious Pattern Detection Policy</a>.</p>
<p><strong>Note</strong>: regular expressions only work with certain content types. For example, you cannot use regular expressions with application/json or application/xml content.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="policies_jsonpath">Using JSONPath in Policies</h3>
<p>Some types of policies allow you to filter messages by finding a fieldname in the message body using JSONPath; for example, the <a href="policy_op_detailed_auditing.htm">Detailed Auditing policy</a>.</p>
<p>An online tool for testing JSONPath:</p>
<ul>
	<li><a href="http://jsonpath.com/" title="JSONPath link" target="_blank">http://jsonpath.com/</a></li>
</ul>

<h5 id="eg_01">Example #1</h5>
<p>In the example below, a JSONPath expression is used in the Detailed Auditing Policy. This expression identifies instances of all lastfour digits in card numbers, for filtering; the policy removes this information from the log. </p>
<p><strong>Note</strong>: An alternative treatment for card information is to use the <a href="using_the_auditing_message_policy.htm">Auditing Message Policy</a> to mask the information (xxxx).</p>
<p><img src="images/auditing_service_filter_settings_jsonpath.jpg" alt="Using JSONPath in policies" /></p>
<p>The JSONPath expression:</p>
<pre>
$.cardNumber[*].lastfour</pre>

<h5 id="eg_02">Example #2</h5>
<p>You could use the following JSONPath expression:</p>
<pre>$.cardNumber[*].expirationdate</pre>
<p>This searches for the cardnumber expiration date, and removes this information from the log.</p>
<p>The element must be defined in the JSON Schema.</p>
<p><a href="#top">Back to top</a></p>



<h3 id="policies_xpath">Using XPath in Policies</h3>
<p>XPath (XML Path Language) is a query language that you can use to find a node name in an XML document.</p>
<p>Some types of policies allow you to filter messages using an XPath statement; for example, the <a href="policy_op_detailed_auditing.htm">Detailed Auditing policy</a>.</p>
<p>In the sample policy definition shown below, the policy will filter out the following information in messages:</p>
<ul>
	<li>In JSON: filters for credit card expiration date and, if found, does not log that information.</li>
	<li>In XML: filters for the PaymentCard object and, if found, does not log that information.</li>
</ul>
<p><strong>Note</strong>: An alternative treatment for card information is to use the <a href="using_the_auditing_message_policy.htm">Auditing Message Policy</a> to mask the information (xxxx).</p>
<p>The policy definition:</p>
<p><img src="images/auditing_service_filter_settings_xpath.jpg" alt="UsingXPath in policies" /></p>
<p>The XPath expression:</p>
<pre>//PaymentCard</pre>
<p>In this example, all the following XML content would be omitted in the Detailed Auditing policy, or masked in the Auditing Message Policy:</p>
<pre>Element='&lt;PaymentCard xmlns="http://www.example.org/OTA/2003/05"
  CardCode="VI"
  CardNumber="4321432143214327"
  CardType="1"
  ExpireDate="0614"
  SeriesCode="123"&gt;
     &lt;CardHolderName&gt;John Doe&lt;/CardHolderName&gt;
   &lt;/PaymentCard&gt;'</pre>
<p><a href="#top">Back to top</a></p>