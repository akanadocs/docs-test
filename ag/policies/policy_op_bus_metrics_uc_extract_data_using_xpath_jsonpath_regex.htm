---
layout: page
title: Business Metrics Policy Use Case - Extracting Business Information from Service Usage Data Using XPath/JsonPath/RegEx
description: Learn how to use the Business Metrics Policy to Extract Business information from service usage data using XPath/JsonPath/RegEx from Request payload and derive operational metrics.
product: ag
category: learn
weight: 05
sub-nav-class: Policies - Operational
type: page
nav-title: Business Metrics Policy Use Case - Extracting Business Information from Service Usage Data Using XPath/JsonPath/RegEx
---
<h2 id="top">Extracting Business Information from Service Usage Data Using XPath/JsonPath/RegEx</h2>
<p>The following use case illustrates how to use the Business Metrics Policy to extract business information from the service usage data using XPath/JsonPath/RegEx from the request payload and derive operational metrics.</p>
<p><a href="policy_management.htm" class="button secondary">Managing Policies</a></p>

<h5 class="stamp">Supported Platforms: 8.0 and later.</h5>
<div id="toc-marker"></div>


<h3>Configuration</h3>
<ol>
  <li>Launch the Envision Console, select <strong>New Dataset</strong>, and define a dataset with sharing set to <strong>Public</strong>.
    <p><img src="images/bus_metrics_pol_usecase1a.jpg" alt="Defining a new public dataset" /></p></li>
  <li>In the new dataset, select <strong>New Dimension</strong> and define a dimension with the <strong>TEXT</strong> type.
  <p><img src="images/bus_metrics_pol_usecase1b.jpg" alt="Defining a dimension" /></p></li>
  <li>In the same dataset, select <strong>New Metric</strong> and define a metric with the the <strong>COUNT</strong> type and all aggregations.
    <p><img src="images/bus_metrics_pol_usecase1c.jpg" alt="Defining a new metric" /></p></li>
  <li>Save aggregation settings for the selected dataset.
  <p><img src="images/bus_metrics_pol_usecase1d.jpg" alt="Saving aggregation settings" /></p></li>
  <li>Select <strong>New Chart</strong>, and create a chart using this dataset with the following configuration:
  <p><img src="images/bus_metrics_pol_usecase1e.jpg" alt="Creating a chart" /></p>
  <p><img src="images/bus_metrics_pol_usecase1f.jpg" alt="Business Metrics chart info" /></p>
  <p><img src="images/bus_metrics_pol_usecase1g.jpg" alt="Business Metrics chart: defining axes" /></p></li>
  <li>Select <strong>New Dashboard</strong>, and create a dashboard with the newly defined chart:
    <p><img src="images/bus_metrics_pol_usecase1h.jpg" alt="Creating a dashboard with the new chart" /></p>
  <p><img src="images/bus_metrics_pol_usecase1i.jpg" alt="Add Chart" /></p>
  <p><img src="images/bus_metrics_pol_usecase1j.jpg" alt="Adding the chart" /></p></li>
  <li>Launch the Policy Manager Management Console, and create a service using the WSDL file at this address: <a href="http://www.restfulwebservices.net/wcf/CurrencyService.svc?wsdl7">http://www.restfulwebservices.net/wcf/CurrencyService.svc?wsdl7</a>.</li>
  <li>Virtualize the service on the Network Director.
    <p><img src="images/bus_metrics_pol_usecase1k.jpg" alt="Virtualizing the service" /></p></li>
  <li>Navigate to <strong>Policies</strong> &gt; <strong>Operational</strong> and click <strong>Add Policy</strong>, then create a Business Metrics policy.</li>
  <li>Configure the policy, selecting the dataset you defined earlier, as shown below.
    <p><img src="images/bus_metrics_pol_usecase1l.jpg" alt="Configuring the Business Metrics policy" /></p></li>
  <li>
Provide Extract/Derive Configuration for each of the dimensions and metrics using the example illustrated below:  

<ul>
  <li><strong>Dimension using Extract</strong> – To obtain a value in request payload using XPath/JsonPath/RegEx.
<p><img src="images/bus_metrics_pol_usecase1m.jpg" alt="Configuring the policy: defining the dimensions" /></p></li>
  <li><strong>Metric using Derive</strong> – To obtain usage count.
<p><img src="images/bus_metrics_pol_usecase1n.jpg" alt="Configuring the policy: defining the metrics" /></p>
  <p><img src="images/bus_metrics_pol_usecase1o.jpg" alt="Configuring the policy: defining the metrics" /></p></li>
</ul>
</li>
  <li>Attach the policy to the service.
  <p><img src="images/bus_metrics_pol_usecase1p.jpg" alt="Attaching the policy to the service" /></p>
  <p><img src="images/bus_metrics_pol_usecase1q.jpg" alt="Attaching the policy to the service" /></p></li>
  <li>Send multiple requests to generate data for various usage scenarios.
  <p><img src="images/bus_metrics_pol_usecase1r.jpg" alt="Sending requests to the service" /></p>
  <p><img src="images/bus_metrics_pol_usecase1s.jpg" alt="Sending requests to the service" /></p>
  <p><img src="images/bus_metrics_pol_usecase1t.jpg" alt="Sending requests to the service" /></p>
  <p><img src="images/bus_metrics_pol_usecase1u.jpg" alt="Sending requests to the service" /></p></li>
  <li>Check the data to be recorded in MongoDB and Dataset. The data should be appropriate per the requests sent.</li>
  <li>The chart should record information based on the data generated in the datasets from the above requests. </li>
</ol>
<p><a href="#top">Back to top</a></p>



<div class = "divider1"></div>



<h3 id="related_topics">Related Topics</h3>
<div class="relatedlinks">
<ul>
	<li><a href="about_policies_view.htm">About Policies</a></li>
	<li><a href="policy_management.htm">Managing Policies</a></li>
	<li><a href="policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="http://docs.akana.com/cm/learnmore/basics_glossary.htm">Glossary of Terms for the Developer Portal</a></li>
</ul>
</div>