---
layout: page
title: Using the Anti-Virus Policy
description: Learn how to set up the anti-virus policy to direct the scanning of messages for viruses.
product: ag
category: learn
sub-nav-class: Policies - Operational
weight: 06
type: page
nav-title: Anti-Virus
---
<h1 id="top">Using the Anti-Virus Policy</h1>
<p>Learn how to set up the anti-virus policy to direct the scanning of messages for viruses.</p>
<p>For information about using policies in the context of the Community Manager developer portal, see <a href="../../cm/learnmore/bus_admin_organizations.htm#h_business_policies">Business Policies</a>.</p>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#introduction">Introduction</a></li>
	<li><a href="#av_policy_create">Creating an Anti-Virus Policy</a></li>
	<li><a href="#av_policy_config">Configuring an Anti-Virus Policy</a></li>
	<li><a href="#av_policy_view">Viewing the Anti-Virus Policy Details</a></li>
	<li><a href="#policy_activating">Activating a policy</a></li>
	<li><a href="#policy_attach">Attaching a policy</a></li>
	<li><a href="#av_policy_scan_uploads">Using an Anti-Virus policy to scan uploaded files</a></li>
</ol>
<hr class="divide_hr" />



<h2 id="introduction">Introduction</h2>
<p>The Anti-Virus Policy is used to direct the scanning of messages for viruses. The Network Director itself does not scan for viruses; the virus scanning is managed by an anti-virus server.</p>
<p>The Network Director communicates with the anti-virus server using the Internet Content Adaptation Protocol (ICAP) protocol. The Anti-Virus policy dictates details of the virus scanning, such as:</p>
<ul>
	<li>What messages should be scanned.</li>
	<li>How to communicate with the anti-virus server.</li>
	<li>What action should be performed when a virus is detected.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h2 id="av_policy_create">Creating an Anti-Virus Policy</h2>
<p>There are two steps to creating a policy in Policy Manager:</p>
<ol>
	<li>Create the policy definition. See below.</li>
	<li>Configure the policy details. See <a href="#av_policy_config">Configuring an Anti-Virus Policy</a>.</li>
</ol>
<p>Once you've completed both those steps, you can activate the policy so that it's in effect and can be attached to organizations and services.</p>

<h4 id="proc_policy_create_av">To create an anti-virus policy in Policy Manager</h4>
<ol>
	<li>In the Organization Tree, find the level at which you want to create the policy. Expand <strong>Policies</strong> and click <strong>Operational Policies</strong>.</li>
	<li>In the right pane, in the <strong>Policies Summary</strong> section, click <strong>Add Policy</strong>.</li>
	<li>In the <strong>Select Policy Creation Option</strong> page, do one of the following:
    <ul>
    	<li>To create a new policy: Choose <strong>Anti Virus Policy</strong> and then click <strong>Next</strong>.</li>
    	<li>To import an existing policy: Click <strong>Import Policy</strong>, browse for the file, and then click <strong>Next</strong>.</li>
    </ul>
    </li>
  
	<li>Enter <strong>Policy Name</strong> (required), <strong>Policy Key</strong>, and <strong>Description</strong> (optional). If you don't specify a key, one is assigned automatically.</li>
	<li>Click <strong>Finish</strong> and then click <strong>Close</strong>.</li>
  </ol>
<p>At this point, you've created the policy, but it doesn't do anything. The next step is to configure the policy details. See <a href="#av_policy_config">Configuring an Anti-Virus Policy</a> below.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="av_policy_config">Configuring an Anti-Virus Policy</h2>
<p>Once you've created the policy, you can configure the policy details that determine how the policy works. Then you can activate the policy so that it can be used.</p>
<h4>To configure an anti-virus policy in Policy Manager</h4>
<ol>
	<li>In the Organization Tree, find the level where the policy was defined. Click to select.</li>
	<li>In the center pane, in the <strong>Anti Virus Policy</strong> section, click <strong>Modify</strong>. The <strong>Modify Anti-Virus Policy</strong> overlay is displayed, as shown below.
    <p><img src="images/anti_virus_modify.jpg" alt="Modify Anti Virus Policy" /></p></li>
	<li>Specify <strong>Message Scope</strong>. This determines which messages in a message exchange should be scanned. The values correspond to the WSDL message types of an operation. Choose one or more:
    <ul>
    	<li>IN</li>
    	<li>OUT</li>
    	<li>FAULT</li>
      </ul>
    </li>
	<li>Choose a value for <strong>Max Message Size</strong> (MB). Messages exceeding the specified size will be rejected by the policy.</li>
	<li>Choose a value for <strong>Scan Scope</strong>:
<ul>
    	<li><strong>Scan Entire Message</strong>: scans all message content including attachments.</li>
  	<li><strong>Scan All Attachments</strong>: scans only attachments.</li>
  	<li><strong>Scan By Content Type</strong>: you can specify message content-types that should be scanned. Choices: application/msword, application/octet-stream, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.ms-project, application/vnd.ms-works, application/x-msaccess, video/mpeg, x-world/x-vrml. You can multi-select to specify multiple content types.</li>
</ul>
  </li>
	<li>Specify the URL of the ICAP server (the anti-virus server). </li>
	<li>Choose the action to be taken if a virus is detected:
    <ul>
    	<li><strong>Log</strong>: Allows the content through but generates an alert.</li>
    	<li><strong>Reject</strong>: Rejects the message and generates an alert.</li>
    	<li><strong>Strip</strong>: Removes the infected portion of the message and generates an alert.</li>
    </ul>
    </li>
  
	<li>Click <strong>Apply</strong>.</li>
</ol>
<p>Now that the policy is defined, you can activate it and start using it. On the right, under <strong>Actions</strong>, choose <strong>Activate Policy</strong>.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="av_policy_view">Viewing the Anti-Virus Policy Details</h2>
<p>You can review the details of the existing anti-virus policy, then change them if needed.</p>
<h4>To view the anti-virus policy details:</h4>
<ol>
	<li>Enter the following navigation path: <strong>Workbench</strong> &gt; <strong>Browse</strong> &gt; <strong>Organization</strong>. Choose the <strong>Policies</strong> folder. The <strong>Policies Summary</strong> screen displays.</li>
	<li>To navigate to the <strong>Policy Details</strong> tab, do either of the following:
    <ul>
    	<li>Click the policy name and then double-click the <strong>Anti-Virus Policy</strong> line item.</li>
    	<li>Select <strong>View Policy Details</strong> from the <strong>Actions</strong> drop-down list box.</li>
    </ul>
      <p> The <strong>Policy Details</strong> page for the Anti-Virus Policy is displayed.</p>
    </li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_activating">Activating a policy</h2>
<p>When you create and configure a policy, the policy is in <strong>Draft</strong> state. When the policy configuration is complete, activate the policy: click <strong>Activate Policy</strong> and then confirm. See <a href="policy_management.htm#policy_activate">Activate a Policy</a>.</p>
<p>A policy in Draft state is not available for general use. Once you activate the policy, it is in <strong>Active</strong> state and is available for use.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_attach">Attaching a policy</h2>
<p>To use the policy, go to the <strong>Policies</strong> folder in the respective organization and attach the policy to a web service, binding, or binding operation.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="av_policy_scan_uploads">Using an Anti-Virus policy to scan uploaded files</h2>
<p>For an example of how you could use an anti-virus policy to scan uploaded files, refer to <a href="../../sp/platform_management/platform-hardening.htm#anti_virus_policy_config_scan_uploaded_files">Configure the Anti-Virus policy to scan for uploaded files</a> in the platform hardening doc.</p>
<p><a href="#top">Back to top</a></p>



<hr class="divide_hr" />



<h2 id="related_topics">Related Topics</h2>
<div class="relatedlinks">
<ul>
	<li><a href="about_policies_view.htm">About Policies</a></li>
	<li><a href="policy_management.htm">Managing Policies</a></li>
	<li><a href="policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="../../cm/learnmore/basics_glossary.htm">Glossary of Terms for the Community Manager developer portal</a></li>
</ul>
</div>