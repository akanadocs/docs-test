---
layout: page
title: Using the HTTP Security Policy
description: Learn how to specify the transport security requirements for web services (SOAP or REST) with HTTP or HTTPS as the underlying transport protocol, using the HTTP Security Policy.
product: ag
category: learn
sub-nav-class: Policies - Operational
weight: 36
type: page
nav-title: HTTP Security
---
<h1 id="top">Using the HTTP Security Policy</h1>
<p>Learn how to specify the transport security requirements for web services (SOAP or REST) with HTTP or HTTPS as the underlying transport protocol, using the HTTP Security Policy.</p>
<p>For information about using policies in the context of the Community Manager developer portal, see <a href="../../cm/learnmore/bus_admin_organizations.htm#h_business_policies">Business Policies</a>.</p>
<p>For a use case illustrating use of this policy, see <a href="howto_implement_2_way_ssl.htm">How To Implement 2-Way SSL Using Policy Manager</a>.</p>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#introduction">Introduction</a></li>
	<li><a href="#http_security_create_config">Creating and Configuring the HTTP Security Policy</a></li>
	<li><a href="#auth_options_http_basic">Specify HTTP Basic Authentication Options</a></li>
	<li><a href="#auth_options_http_digest">Specify HTTP Digest Authentication Options</a></li>
	<li><a href="#auth_options_saml_bearer">Specify SAML Bearer Token Options</a></li>
	<li><a href="#auth_options_jwt_bearer">Specify JWT Bearer Token Options</a></li>
	<li><a href="#auth_options_client_cert">Specify Client Certificate Authentication Options</a></li>
	<li><a href="#auth_options_cookie">Specify Cookie Authentication Options</a></li>
	<li><a href="#http_sec_config_audit_options">Configuring Security Audit Options</a></li>
	<li><a href="#policy_activating">Activating a policy</a></li>
	<li><a href="#policy_attach">Attaching a policy</a></li>
</ol>
<hr class="divide_hr" />



<h2 id="introduction">Introduction</h2>
<p>The HTTP Security Policy is an operational policy that specifies the transport security requirements for web services (SOAP or REST) using HTTP or HTTPS as the underlying transport protocol.</p>
<p>Options include:</p>
<ul>
	<li><strong>HTTP Basic Authentication</strong>&#8212;Allows a client to provide credentials in the form of a username and password with making a request.</li>
	<li><strong>HTTP Digest Authentication</strong>&#8212;Allows a client to negotiate credentials using the HTTP protocol. It supersedes unencrypted use of Basic Authentication and makes it possible to establish a user identity securely without sending a password in plain text over the network. </li>
	<li><strong>SAML Bearer Token Authentication</strong>&#8212;Allows a client to provide credentials in the form of a SAML token that uses the Bearer subject confirmation method when making a request.</li>
	<li><strong>JWT Bearer Token Authentication</strong>&#8212;Allows a client to provide credentials in the form of a JWT Bearer token.</li>
	<li><strong>Client Certificate</strong>&#8212;Allows authentication based on an X.509 certificate provided by the client. The certificate can be taken from the Secure Sockets Layer (SSL) protocol context. This option requires that your client application use SSL to make a secure connection with the application server. The application server must enable mutual authentication for the SSL connection. </li>
	<li><strong>Cookie Authentication</strong>&#8212;Allows authentication by passing user credentials through HTTP cookies when making a request. The cookie is typically issued to clients by a third-party identity provider and Access Manager software for single sign-on purposes.</li>
</ul>
<h2 id="http_security_create_config">Creating and Configuring the HTTP Security Policy</h2>
<p>There are two main tasks in configuring the HTTP Security Policy:</p>
<ul>
	<li>Creating the policy. See <a href="#proc_http_security_policy_create">To create the HTTP Security policy</a>.</li>
	<li>Configuring the policy details. See <a href="#proc_http_security_policy_config">To configure the HTTP Security policy</a>.</li>
</ul>

<h4 id="proc_http_security_policy_create">To create the HTTP Security policy</h4>
<ol>
	<li>Log in to Policy Manager: {protocol}://{hostname}:{port}/ms/index.do.</li>
	<li>Go to <strong>Workbench</strong> &gt; <strong>Browse</strong> and choose the organization that includes services you want to add this policy to.</li>
	<li>Go to the <strong>Policies</strong> &gt; <strong>Operational</strong> folder.</li>
	<li>In the right pane, at the <strong>Policies Summary</strong> page, click <strong>Add Policy</strong>.</li>
	<li>On the <strong>Select Policy Creation Option</strong> page, in the <strong>Add Policy</strong> field, choose <strong>HTTP Security Policy</strong>, and then click <strong>Next</strong>.</li>
	<li>On the <strong>Specify Policy Details</strong> page, provide:
		<ul>
			<li>Name (required)</li>
			<li>Policy Key (optional)</li>
			<li>Description (optional)</li>
		</ul>
	</li>
	<li>Click <strong>Finish</strong> and then click <strong>Close</strong>.</li>
</ol>

<h4 id="proc_http_security_policy_config">To configure the HTTP Security policy</h4>
<ol>
	<li>Create the policy as covered above.</li>
	<li>At the <strong>Policies Summary</strong> page, in the <strong>HTTP Security Policy</strong> section, click <strong>Modify</strong>. The <strong>Select Authentication options</strong> page appears, as shown below.
		<p><img src="images/http_security_01_select_auth.jpg" alt="HTTP Security Policy, Select Authentication Options" /></p>
	</li>
	<li>Choose one or more authentication options and click <strong>Next</strong>.</li>
	<li>The page that's next, and the sequence of pages, is determined by the authentication option or options you choose. Possible pages, in sequence, are listed below. Specify values. For details of the choices available, refer to the information for each page:
		<ul>
			<li>HTTP Basic Authentication: see <a href="#auth_options_http_basic">Specify HTTP Basic Authentication Options</a></li>
			<li>HTTP Digest Authentication: see <a href="#auth_options_http_digest">Specify HTTP Digest Authentication Options</a></li>
			<li>SAML Bearer Token Authentication: see <a href="#auth_options_saml_bearer">Specify SAML Bearer Token Options</a></li>
			<li>JWT Bearer Token Authentication: see <a href="#auth_options_jwt_bearer">Specify JWT Bearer Token Options</a></li>
			<li>Client Certificate: see <a href="#auth_options_client_cert">Specify Client Certificate Authentication Options</a></li>
			<li>Cookies: see <a href="#auth_options_cookie">Specify Cookie Authentication Options</a></li>
		</ul>
	</li>
	<li>After each page, click <strong>Next</strong>.</li>
	<li>When you've set up the basic information for each authentication type you selected, the <strong>Specify Security Audit Options</strong> page appears. Choose options. For more information, refer to <a href="#http_sec_config_audit_options">Configuring HTTP Security Audit Options</a> below.</li>
	<li>When done, click <strong>Finish</strong>. The completion summary is displayed. An example is shown below.
		<p><img src="images/http_security_11_summary.jpg" alt="HTTPSecurity Policy completion summary" /></p>
	</li>
	<li>Click <strong>Close</strong>.</li>
</ol>
<p>Once the policy is configured, you can attach it to a service.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="auth_options_http_basic">Specify HTTP Basic Authentication Options</h2>
<p>If you choose HTTP Basic Authentication, you'll see the page below.</p>
<p><img src="images/http_security_02_http_basic_auth.jpg" alt="HTTP Security Policy Configuration: Specify HTTP Basic Authentication Options" /></p>

<h4 id="proc_config_basic_auth">To configure basic authentication options</h4>
<ol>
	<li>Specify the subject category the authenticated identity will be used as. You can choose:
		<ul>
			<li>Consumer (the default)</li>
			<li>End-User</li>
			<li>User-defined: specify the subject category you want to use</li>
			<li>None: no subject category will be used.</li>
		</ul>
	</li>
	<li>Click <strong>Next</strong> to specify security audit options. See <a href="#http_sec_config_audit_options">Configuring Security Audit Options</a> below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="auth_options_http_digest">Specify HTTP Digest Authentication Options</h2>
<p>If you choose HTTP Digest Authentication, you'll see the page below.</p>
<p><img src="images/http_security_03_http_digest_auth.jpg" alt="HTTP Security Policy Configuration: Specify HTTP Digest Authentication Options" /></p>

<h4 id="proc_config_http_digest_auth">To configure http digest authentication options</h4>
<ol>
	<li>Specify the subject category the authenticated identity will be used as. You can choose:
		<ul>
			<li>Consumer (the default)</li>
			<li>End-User</li>
			<li>User-defined: specify the subject category you want to use</li>
			<li>None: no subject category will be used.</li>
		</ul>
	</li>
	<li>Click <strong>Next</strong> to specify security audit options. See <a href="#http_sec_config_audit_options">Configuring Security Audit Options</a> below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="auth_options_saml_bearer">Specify SAML Bearer Token Options</h2>
<p>If you choose SAML Bearer Token, you'll see the page below.</p>
<p><img src="images/http_security_04_saml_bearer_token.jpg" alt="HTTP Security Policy Configuration: Specify SAML Bearer Token Options" /></p>

<h4 id="proc_config_saml_bearer_token">To configure SAML bearer token authentication options</h4>
<ol>
	<li>Specify the subject category the authenticated identity will be used as. You can choose:
		<ul>
			<li>Consumer (the default)</li>
			<li>End-User</li>
			<li>User-defined: specify the subject category you want to use</li>
			<li>None: no subject category will be used.</li>
		</ul>
	</li>
	<li>Click <strong>Next</strong> to specify security audit options. See <a href="#http_sec_config_audit_options">Configuring Security Audit Options</a> below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="auth_options_jwt_bearer">Specify JWT Bearer Token Options</h2>
<p>If you choose JWT Bearer Token, you'll see the page below.</p>
<p><img src="images/http_security_05_jwt_bearer_token.jpg" alt="HTTP Security Policy Configuration: Specify JWT Bearer Token Options" /></p>
<p><strong>Note</strong>: for general information on JWT Bearer tokens, see <a href="https://jwt.io/introduction/" title="https://jwt.io/introduction/" target="_blank">https://jwt.io/introduction/</a> (external site).</p>

<h4 id="proc_config_jwt_bearer_token">To configure JWT bearer token authentication options</h4>
<ol>
	<li>Modify the Required Claims list as needed, adding or removing as applicable. Supported required claims are:
		<ul>
			<li>Issuer (checked by default)</li>
			<li>Subject</li>
			<li>Audience</li>
			<li>Expiration (checked by default)</li>
			<li>Not Before</li>
			<li>issue At</li>
			<li>JWT ID</li>
		</ul>
	</li>
	<li>Add one or more custom claims if needed.</li>
	<li>In the <strong>Token Protection</strong> section, specify the type of algorithm used to protect each aspect of the JWT bearer token:
		<ul>
			<li><strong>Signature/MAC algorithm</strong>&#8212;Supported values are: None, HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512. Default: <strong>None</strong>.</li>
			<li><strong>Content Encryption algorithm</strong>&#8212;Supported values are: None, A128CBC-HS256, A192CBC-HS384, A256CBC-HS512, A128GCM, A192GCM, A256GCM. Default: <strong>None</strong>.</li>
			<li><strong>Key Encryption algorithm</strong>&#8212;Supported values are: Direct, RSA1_5, RSA-OAEP, A128KW, A192KW, A256KW, A128GCMKW, A192GCMKW, A256GCMKW. Default: <strong>Direct</strong>.</li>
		</ul>
	</li>
	<li>Specify the subject category the authenticated identity will be used as. You can choose:<ul>
		<li>Consumer (the default)</li>
		<li>End-User</li>
		<li>User-defined: specify the subject category you want to use</li>
		<li>None: no subject category will be used.</li>
		</ul>
	</li>
	<li>Click <strong>Next</strong> to specify security audit options. See <a href="#http_sec_config_audit_options">Configuring Security Audit Options</a> below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="auth_options_client_cert">Specify Client Certificate Authentication Options</h2>
<p>If you choose Client Certificate authentication, you'll see the page below.</p>
<p><strong>Note</strong>: By default, in earlier versions, the RFC compliance level of the HTTP parser provided compliance with earlier standards prior to <a href="https://datatracker.ietf.org/doc/html/rfc2616" title="Link to RFC 2616" target="_blank">RFC 2616</a> and <a href="https://datatracker.ietf.org/doc/html/rfc7230" title="Link to RFC 7230" target="_blank">RFC 7230</a>. In 2020.0.0 and later, it offers compliance with the newer standards. In version 2020.2.8 and later, there is an additional configuration setting in the Akana Administration Console that you can use to configure the RFC compliance level for your installation. For details, see <a href="../../sp/platform_management/http_compliance_modes.htm">Configuring Compliance Modes for HTTP Parsing and Handling</a>.</p>
<p><img src="images/http_security_06_client_cert_auth.jpg" alt="HTTP Security Policy Configuration: Specify Client Certificate Authentication Options" /></p>


<h4>To specify client certificate authentication: </h4>
<ol>
	<li>Choose one of the following authentication methods:
		<ul>
			<li>Use the client's X.509 certificate from the SSL context</li>
			<li>Get the client's X.509 certificate from HTTP header: if you choose this option, specify which header to get the certificate from. Default: <strong>X-Client-Cert</strong>. Supported format:
				<p><strong>Versions prior to 2020.2.8</strong>: Raw <a href="../../cm/learnmore/basics_glossary.htm#gl_pem">PEM</a> format.</p>
				<p><strong>2020.2.8 and later</strong>: Raw PEM format or URL-encoded PEM format.			</p>
			</li>
			<li>Get the Issuer DN and serial number of the client's X.509 certificate from HTTP headers. If you choose this option, specify which header to get each value from. Defaults: <strong>X-ClientCert-IssuerDn</strong> for Issuer DN and <strong>X-ClientCert-SerialNo</strong> for serial number.
			<p><strong>Note</strong>: <strong>X-ClientCert-SerialNo</strong> must be in decimal format, not hexadecimal.</p></li>
		</ul>
	</li>
	<li>Specify the subject category the authenticated identity will be used as. You can choose:
		<ul>
			<li>Consumer (the default)</li>
			<li>End-User</li>
			<li>User-defined: specify the subject category you want to use</li>
			<li>None: no subject category will be used.</li>
		</ul>
	</li>
	<li>Click <strong>Next</strong> to specify security audit options. See <a href="#http_sec_config_audit_options">Configuring Security Audit Options</a> below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="auth_options_cookie">Specify Cookie Authentication Options</h2>
<p>Each cookie represents a token and is stored in a text file. A cookie definition includes <strong>Cookie Name</strong> and <strong>Subject Category</strong>. Multiple cookies can be defined within one policy and can represent multiple identities.</p>
<p>If you choose Cookie Authentication, you'll see the page below.</p>
<p><img src="images/http_security_07_cookie_auth.jpg" alt="HTTP Security Policy Configuration: Specify Cookie Authentication Options" /></p>
<h4>To specify cookie authentication: </h4>
<ol>
	<li>In the <strong>Specify Cookie Authentication Options</strong> page, click <strong>Add</strong>. The <strong>Add Cookie for Authentication</strong> page appears, as shown below.
		<p><img src="images/http_security_08_cookie_add.jpg" alt="HTTP Security Policy Configuration: Adding a cookie" /></p>
	</li>
	<li>Enter a name for the cookie, specify <strong>Subject Category</strong>, and click <strong>Finish</strong>.</li>
	<li>Enter additional cookies if needed and then click <strong>Next</strong>. The <strong>Specify Response Cookie Options</strong> page appears, as shown below.
		<p><img src="images/http_security_09_cookie_auth_resp.jpg" alt="HTTP Security Policy Configuration: Specify Response Cookie Options page" /></p>
	</li>
	<li>To add a response cookie, click <strong>Add</strong>.</li>
	<li>In the <strong>Add Response Cookie</strong> page, enter the cookie name and subject category, and then click <strong>Finish</strong>.</li>
	<li>Enter additional response cookies if needed.</li>
	<li>Click <strong>Next</strong> to specify security audit options. See <a href="#http_sec_config_audit_options">Configuring Security Audit Options</a> below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="http_sec_config_audit_options">Configuring Security Audit Options</h2>
<p>Once you've configured the settings for the specific type or types of HTTP Security policy that you chose, the next step is the <strong>Specify Security Audit Options</strong> page, as shown below.</p>
<p><img src="images/policy_specify_security_audit_options.jpg" alt="Policy Configuration: Specify Security Audit Options" /></p>
<p>Choose from the available options controlling the audit data that's captured:</p>
<dl>

<dt>Generate Audit Data</dt>
<dd>Captures all message data, whether success or failure, for all message exchanges.</dd>

<dt>On Error Only</dt>
<dd>If you choose to generate audit data, you can specify that audit data is captured only when an error occurs on a message exchange.</dd>

</dl>
<p>That completes the policy configuration. Click <strong>Finish</strong> to close the wizard. You can now assign the policy to a service.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_activating">Activating a policy</h2>
<p>When you create and configure a policy, the policy is in <strong>Draft</strong> state. When the policy configuration is complete, activate the policy: click <strong>Activate Policy</strong> and then confirm. See <a href="policy_management.htm#policy_activate">Activate a Policy</a>.</p>
<p>A policy in Draft state is not available for general use. Once you activate the policy, it is in <strong>Active</strong> state and is available for use.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_attach">Attaching a policy</h2>
<p>To use the policy, go to the <strong>Policies</strong> folder in the respective organization and attach the policy to a web service, binding, or binding operation.</p>
<p><a href="#top">Back to top</a></p>



<hr class="divide_hr" />



<h2 id="related_topics">Related Topics</h2>
<div class="relatedlinks">
<ul>
	<li><a href="about_policies_view.htm">About Policies</a></li>
	<li><a href="policy_management.htm">Managing Policies</a></li>
	<li><a href="policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="../../cm/learnmore/basics_glossary.htm">Glossary of Terms for the Community Manager developer portal</a></li>
</ul>
</div>