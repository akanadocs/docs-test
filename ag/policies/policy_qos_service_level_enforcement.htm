---
layout: page
title: Using the Service Level Enforcement Policy 
description: Learn how to enable and configure the error message returned to the consumer when an SLA is violated.
product: ag
category: learn
sub-nav-class: Policies - QoS
weight: 04
type: page
nav-title: Service Level Enforcement
---
<h2 id="top">Using the Service Level Enforcement Policy</h2>
<p>Learn how to enable and configure the error message returned to the consumer when an SLA (service level agreement) is violated.</p>

<p>
<a href="about_policies_view.htm" class="button secondary">About Policies</a>  
<a href="policy_management.htm" class="button secondary">Managing Policies</a>  
<a href="qos_policies_intro.htm" class="button secondary">QoS Policies</a></p>

<h5 class="stamp">Supported Platforms: 7.x, 8.0</h5>

<div class = "divider1"></div>



<h3 style="color: gray;">Table of Contents</h3>
<ol class="table_of_contents">
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#options">Service Level Enforcement Policy Options</a></li>
  <li><a href="#configuration">Configuration</a></li>
  <li><a href="#uc_policy_qos_service_level_enforcement_pm">Service Level Enforcement Policy: use cases for Policy Manager</a></li>
  <li><a href="#uc_policy_qos_service_level_enforcement_cm">Service Level Enforcement Policy: use cases for the Akana API Platform (Community Manager)</a></li>
</ol>
<div class = "divider1"></div>



<h3 id="introduction">Introduction</h3>
<p>The Service Level Enforcement Policy is a Quality of Service (QoS) policy that allows you to enable and configure the error message returned to the consumer when an SLA is violated.</p>
<p>This policy only applies to the following Service Level rules:</p>
<ul>
  <li>Usage Count</li>
  <li>Total Request Message Size</li>
  <li>Total Response Message Size</li>
</ul>
<p>The Service Level Enforcement Policy works in conjunction with a Service Level Policy. You define a Service Level Policy and specify each service level condition and alert code; then, you define a Service Level Enforcement Policy and specify the error message you would like displayed when the specified service level condition is violated.</p>
<p>When the Service Level Policy and Service Level Enforcement Policy are attached to the same Organization/Service/Contract, and the Service Level Policy is violated, the messages are rejected and the error message that you configured is returned.</p>



<h3 id="options">Service Level Enforcement Policy Options</h3>
<p>The policy includes the configuration options listed below.</p>
<h5>Service Level Enforcement Policy Details</h5>
<ul>
  <li><strong>Name</strong>: A read-only field that displays the name of the Service Level Enforcement Policy.</li>
  <li><strong>Description</strong>: A read-only field that displays the description of the Service Level Enforcement Policy.</li>
</ul>
<h5>Service Level Enforcement</h5>
<ul>
  <li><strong>Consumer Fault Message</strong>: A field display that allows you to specify the error message returned to the consumer when an SLA is violated.</li>
</ul>
<p><a href="#top">back to top</a></p>



<h3 id="configuration">Configuration</h3>
<p>Let's take a quick walkthrough of the Service Level Enforcement Policy configuration process to get you started.</p>

<h5>Step 1: Add Policy</h5>
<p>In Policy Manager, to create a Service Level Enforcement Policy instance, go to <strong>Policies</strong> &gt; <strong>QoS Policies</strong> and choose <strong>Add Policy</strong>.</p>

<h5>Step 2: Modify Policy</h5>
<p>When you click <strong>Modify</strong> to make changes to the Service Level Enforcement Policy on the <strong>Policy Details</strong> page, the initial policy looks like this:</p>
<p><img src="images/service_level_enforcement1.jpg" width="578" height="388" alt="" /></p>
<p>Configure the policy options based on your requirements and click <strong>Apply</strong>.</p>

<h5>Step 3: Attach Policy</h5>
<p>After you've saved your policy, you can attach it  to a web service, operation, or binding.</p>

<h5>Step 4: Test Policy and View Monitoring Data</h5>
<p>After you've attached the Service Level Enforcement Policy  to a web service, operation, or binding, send a request to your service and go to the <em>Services &gt; Monitoring</em> section to view the results for Logs, Real Time Charts, and Historical Charts. For more information on using the monitoring functions, refer to the Policy Manager Online Help, available via the Help button.</p>
<p><a href="#top">back to top</a></p>



<h3 id="uc_policy_qos_service_level_enforcement_pm">Service Level Enforcement Policy: use cases for Policy Manager</h3>
<p>This section provides a list of Policy Manager-specific usage scenarios for the Service Level Enforcement Policy.</p>
<p>It includes:</p>
<ol>
  <li><a href="#uc_policy_qos_service_level_enforcement_pm_01">Scenario 1: Block Request to Service</a></li>
  <li><a href="#uc_policy_qos_service_level_enforcement_pm_02">Scenario 2: SLA Clear Alert</a></li>
  <li><a href="#uc_policy_qos_service_level_enforcement_pm_03">Scenario 3: SLA Reset</a></li>
  <li><a href="#uc_policy_qos_service_level_enforcement_pm_04">Timeline</a></li>
</ol>



<h4 id="uc_policy_qos_service_level_enforcement_pm_01">Scenario 1: Block Request to Service</h4>
<p>Block request to service for 15 minutes after 300 requests SLA has been violated. In this scenario, a fault message is returned to the app. The message that's returned is the one defined in the Service Level Enforcement Policy.</p>
<ol>
  <li>Create a physical service in the Policy Manager Management Console using <strong>Create Physical Service</strong>.</li>
  <li>Provide service details and finish the wizard.</li>
  <li>Using <strong>Virtualize Service</strong>, virtualize and host the physical service on Network Director (<strong>ND1</strong>), and assign a name (for example, <strong>Vs1</strong>).</li>
  <li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QoS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Enforcement Policy.</li>
  <li>Configure the Service Level Enforcement Policy and define a custom Fault message that reflects the use case scenario purpose.</li>
  <li>Next, use Add Policy and create a Service Level Policy.</li>
  <li>Configure this policy as per the use case with a Custom alert for Usage Count &gt; 300 in a 15-minute interval.</li>
  <li>Attach the Service Level Enforcement policy and Service Level policy to the Vs1 service in the <strong>Service Details</strong> &gt; <strong>Policy Attachments</strong> &gt; <strong>QoS</strong> section.
  <p><img src="images/service_level_enforcement_uc_pm_01.jpg" alt="" /></p></li>
  <li>Send more than 300 requests to Vs1 from application/client.</li>
  <li>The first 300 requests will be successful, and subsequent requests will fail and generate the custom Fault message defined in the Service Level Enforcement Policy.</li>
</ol>


<h4 id="uc_policy_qos_service_level_enforcement_pm_02">Scenario 2: SLA Clear Alert</h4>
<p>SLA generates a clear alert and sends an email to alert the administrator(s) after the App has been denied access for 15 minutes.</p>
<ol>
  <li>Create a physical service in the Policy Manager Management Console using Create Physical Service.</li>
  <li>Provide service details and finish the wizard.</li>
  <li>Using <strong>Virtualize Service</strong>, virtualize and host the physical service on Network Directory (ND1), and assign a name (for example, Vs1).</li>
  <li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QOS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Enforcement Policy.</li>
  <li>Configure the Service Level Enforcement Policy as per the use case a with a custom Fault message.</li>
  <li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QOS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Policy.</li>
  <li>Configure the Service Level Policy as per the use case with a custom alert for Usage Count &gt; 300 in a 15-minute interval.</li>
  <li>Activate the policies in the Service Level Enforcement Policy and Service Level Policy in the Policy Workflow portlet and attach them to the Vs1 service in the <strong>Service Details</strong> &gt; <strong>Policy Attachments</strong> &gt; <strong>QoS</strong> section.</li>
  <li>Send more than 300 requests to Vs1 from application/client.</li>
  <li>The first 300 requests will be successful and subsequent requests will fail and generate the custom Fault message defined in the Service Level Enforcement Policy.</li>
  <li>After the alert is generated, if the SLA is not violated again, a clear alert will be generated.</li>
  <li>If the alert is configured with an email, it will be sent to the assigned users when triggered.</li>
</ol>


<h4 id="uc_policy_qos_service_level_enforcement_pm_03">Scenario 3: SLA Reset</h4>
<p>SLA has been reset and the App can send to the API.</p>
<ol>
  <li>Create a physical service in the <strong>Policy Manager Management Console</strong> using <strong>Create Physical Service</strong>.</li>
  <li>Provide service details and finish the wizard</li>
  <li>Using <strong>Virtualize Service</strong>, virtualize and host the physical service on Network Director (ND1), and assign a name (for example, Vs1),</li>
  <li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QOS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Enforcement Policy.</li>
  <li>Configure the Service Level Enforcement Policy as per the use case a custom Fault message</li>
  <li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QOS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Policy.</li>
  <li>Configure the Service Level Policy as per the use case with custom alert for Usage Count &gt; 300 in 15-minute intervals.</li>
  <li>Activate the policies in the Service Level Enforcement Policy and Service Level Policy in the Policy Workflow portlet and attach them to the Vs1 service in the <strong>Service Details</strong> &gt; <strong>Policy Attachments</strong> &gt; <strong>QoS</strong> section.</li>
  <li>Send more than 300 requests to Vs1 from application/client.</li>
  <li>The first 300 requests will be successful and subsequent requests will fail and generate the custom Fault message in Service Level Enforcement Policy.</li>
  <li>After the alert is generated, if the SLA is not violated again, a clear alert will be generated.</li>
  <li>After clear alert is generated the requests should be successful until it violates the SLA again.</li>
</ol>
<h4 id="uc_policy_qos_service_level_enforcement_pm_04">Timeline</h4>
<p><img src="images/service_level_enforcement_uc_pm_02.jpg" alt="" /></p>
<p><a href="#top">Back to top</a></p>

<p><a href="#top">back to top</a></p>



<h3 id="uc_policy_qos_service_level_enforcement_cm">Service Level Enforcement Policy: use cases for the Akana API Platform (Community Manager)</h3>
<p>This section provides a list of Community Manager-specific usage scenarios for the Service Level Enforcement Policy.</p>
<p>It includes:</p>
<ol>
  <li><a href="#uc_policy_qos_service_level_enforcement_cm_00">Overview</a></li>
  <li><a href="#uc_policy_qos_service_level_enforcement_cm_01">Add / Configure Service Level Enforcement Policy</a></li>
  <li><a href="#uc_policy_qos_service_level_enforcement_cm_02">Scenario 1: How Do I Verify Service Level Enforcement Policy Alerts at the Service Level?</a></li>
  <li><a href="#uc_policy_qos_service_level_enforcement_cm_03">Scenario 2: How Do I Verify Service Level Enforcement Policy Alerts at the Contract Level?</a></li>
  <li><a href="#uc_policy_qos_service_level_enforcement_cm_04">Scenario 3: How Do I Verify Service Level Enforcement Policy Alerts at the License &gt; Term Level?</a></li>
</ol>


<h4 id="uc_policy_qos_service_level_enforcement_cm_00">Overview</h4>
<p>The Service Level Enforcement Policy allows you to enable and configure the error message returned to the consumer when their SLA is violated. It works in conjunction with the Service Level Policy.</p>
<p>If you are using a Service Level Enforcement Policy with Community Manager, you must first add the policy to the Community Manager Tenant Organization in Policy Manager. Once that's done, it will be available for selection in the developer portal.</p>
<p>The policy only applies to the following Service Level Policy rules:</p>
<ul>
  <li>Usage Count</li>
  <li>Total Request Message Size</li>
  <li>Total Response Message Size</li>
</ul>


<h4 id="uc_policy_qos_service_level_enforcement_cm_01">Add / Configure Service Level Enforcement Policy</h4>
<ol>
  <li>In the <strong>Policy Manager Management Console</strong>, go to the Tenant Organization, choose <strong>Policies</strong> &gt; <strong>QoS Policies</strong>, and then click <strong>Add Policy</strong>.
  <p><img src="images/service_level_enforcement_uc_cm_01.jpg" alt="" /></p></li>
  <li>Specify Policy Name, Policy Type (Service Level Enforcement Policy), click <strong>Finish</strong>, and then click <strong>Close</strong>.
  <p><img src="images/service_level_enforcement_uc_cm_02.jpg" alt="" /></p></li>
  <li>On the Service Level Enforcement Policy Details screen, click <strong>Modify</strong>.
  <p><img src="images/service_level_enforcement_uc_cm_03.jpg" alt="" /></p></li>
  <li>Configure error message as shown below, then Finish.
  <p><img src="images/service_level_enforcement_uc_cm_04.jpg" alt="" /></p></li>
  <li>Activate the policy.
  <p><img src="images/service_level_enforcement_uc_cm_05.jpg" alt="" /></p></li>
</ol>


<h4 id="uc_policy_qos_service_level_enforcement_cm_02">Scenario 1: How Do I Verify Service Level Enforcement Policy Alerts at the Service Level?</h4>
<ol>
  <li>Launch Community Manager.</li>
  <li>Go to API Details &gt; Edit API &gt; Proxy Section &gt; Advanced Options and attach the following policies:</li>
  <li>In Quality of Service Policies section, attach Service Level Enforcement Policy.</li>
  <li>In Operational Policies section, attach Atmosphere Application Security Policy (No Signature) and Detailed Auditing.
  <p><img src="images/service_level_enforcement_uc_cm_06.jpg" alt="" /></p></li>
  <li>Go to the app that's connected with the above API. Go to Test client and send more than 5 requests (as Service Level Policy rule is configured with Usage Count &gt; 5).</li>
  <li>When the SLA is violated, the error message configured in the Service Level Enforcement Policy will display.
  <p><img src="images/service_level_enforcement_uc_cm_07.jpg" alt="" /></p></li>
</ol>


<h4 id="uc_policy_qos_service_level_enforcement_cm_03">Scenario 2: How Do I Verify Service Level Enforcement Policy Alerts at the Contract Level?</h4>
<ol>
  <li>Launch Community Manager.</li>
  <li>While requesting API Access, select the Service Level Enforcement Policy and Service Level Policy checkbox and finish the process. Make sure the contract is activated.
  <p><img src="images/service_level_enforcement_uc_cm_08.jpg" alt="" /></p></li>
  <li>Go to App &gt; Test Client and send more than 5 requests.</li>
  <li>You will see an error message after there are more than 5 successful requests.
    <p><img src="images/service_level_enforcement_uc_cm_09.jpg" alt="" /></p></li>
  <li>You will see a Service Level Policy alert also in the Community Manager Dashboard. Once it is cleared, then requests will be successful.
  <p><img src="images/service_level_enforcement_uc_cm_10.jpg" alt="" /></p></li>
</ol>


<h4 id="uc_policy_qos_service_level_enforcement_cm_04">Scenario 3: How Do I Verify Service Level Enforcement Policy Alerts at the License &gt; Term Level?</h4>
<ol>
  <li>To verify this policy, you'll need to set up scope mapping for an API. Assuming that a license is already added as part of the Service Level Policy Configuration, complete the following steps:</li>
  <li>Go to <strong>Edit License</strong> and attach the Service Level Enforcement Policy and Service Level Policy.
<p><img src="images/service_level_enforcement_uc_cm_11.jpg" alt="" /></p></li>
  <li>Use this License >Scope for scope mapping of an API.
  <p><img src="images/service_level_enforcement_uc_cm_12.jpg" alt="" /></p></li>
  <li>Now go to the app that's connected to the API. go to Test Client and send more than 5 requests. Once the SLA is violated, you will see an error message. The specific message is configured in the Service Level Enforcement Policy.
    <p><img src="images/service_level_enforcement_uc_cm_13.jpg" alt="" /></p>
  <p><img src="images/service_level_enforcement_uc_cm_14.jpg" alt="" /></p></li>
  <li>Go to App &gt; Monitoring &gt; Logs. You will see an error record along the lines of the below.
    <p><img src="images/service_level_enforcement_uc_cm_15.jpg" alt="" /></p></li>
  <li>Once SLA is cleared, requests will be successful.
  <p><img src="images/service_level_enforcement_uc_cm_16.jpg" alt="" /></p></li>
</ol>
<p><a href="#top">Back to top</a></p>