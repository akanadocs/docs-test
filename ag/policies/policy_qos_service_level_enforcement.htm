---
layout: page
title: Using the Service Level Enforcement Policy 
description: Learn how to enable and configure the error message returned to the consumer when an SLA is violated.
product: ag
category: learn
sub-nav-class: Policies - QoS
weight: 04
type: page
nav-title: Service Level Enforcement
---
<h1 id="top">Using the Service Level Enforcement Policy</h1>
<p>Learn how to enable and configure the error message returned to the consumer when an SLA (service level agreement) is violated.</p>
<p>For information about using policies in the context of the developer portal, see <a href="../../cm/learnmore/bus_admin_organizations.htm#h_business_policies">Business Policies</a>.</p>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#introduction">Introduction</a></li>
	<li><a href="#service_level_enforcement_policy_create">Creating a Service Level Enforcement policy</a></li>
	<li><a href="#service_level_enforcement_policy_config">Configuring a Service Level Enforcement policy</a></li>
	<li><a href="#policy_attach">Attaching the policy</a></li>
	<li><a href="#policy_test">Testing the Policy and Viewing Monitoring Data</a></li>
	<li><a href="#uc_policy_qos_service_level_enforcement_pm">Service Level Enforcement Policy: use cases for Policy Manager</a></li>
	<li><a href="#uc_policy_qos_service_level_enforcement_cm">Service Level Enforcement Policy: use cases for the Akana API Platform (Community Manager)</a></li>
</ol>
<hr class="divide_hr" />



<h2 id="introduction">Introduction</h2>
<p>The Service Level Enforcement Policy is a Quality of Service (QoS) policy that allows you to enable and configure the error message content, and the HTTP response code, that are returned to the consumer when an SLA is violated.</p>
<p>The Service Level Enforcement Policy works in conjunction with a <a href="policy_qos_service_level.htm">Service Level Policy</a>. You define a Service Level Policy and specify each service level condition and alert code; then, you define a Service Level Enforcement Policy and specify the error message that will be displayed when the specified service level condition is violated.</p>
<p>This policy only applies to the following Service Level rules:</p>
<ul>
	<li>Usage Count</li>
	<li>Total Request Message Size</li>
	<li>Total Response Message Size</li>
</ul>
<p>When the Service Level Policy and Service Level Enforcement Policy are attached to the same Organization/Service/Contract, and the Service Level Policy is violated, the messages are rejected and the error message that you configured is returned.</p>
<p><a href="#top">back to top</a></p>



<h2 id="service_level_enforcement_policy_create">Creating a Service Level Enforcement policy</h2>
<p>The first step in creating a policy is to define the basic policy information.</p>

<h4>To add a Quality of Service (QoS) policy</h4>
<ol>
	<li>Go to <strong>Workbench</strong> &gt; <strong>Browse</strong> &gt; <strong>Organization</strong>, and select <strong>Policies</strong> &gt; <strong>QoS Policies</strong>. The <strong>Policies Summary</strong> is displayed.</li>
	<li>Click <strong>Add Policy</strong>.</li>
	<li>Choose the policy type and click <strong>Next</strong>.</li>
	<li>Specify a name (required) and description (optional) and click <strong>Finish</strong>. At the <strong>Completion Summary</strong>, click <strong>Close</strong>. The <strong>Add Policy</strong> Wizard creates a draft policy instance that you can then configure on the <strong>Policy Details</strong> page.</li>
</ol>
<p>For more information, see <a href="policy_management.htm#add_policy">Add Policy</a>.</p>
<p><a href="#top">back to top</a></p>



<h2 id="service_level_enforcement_policy_config">Configuring a Service Level Enforcement policy</h2>
<p>To configure your Service Level Enforcement policy, follow the steps below.</p>

<h4 id="proc_service_level_policy_config">To configure a Service Level Enforcement policy</h4>
<ol>
	<li>Create the policy as covered above.</li>
	<li>At the <strong>Policies Summary</strong> page, in the <strong>Service Level Enforcement Policy</strong> section, click <strong>Modify</strong>. The <strong>Modify Service Level Enforcement Policy</strong> page appears, as shown below.
		<p><img src="images/qos_service_level_enforcement_modify.png" alt="QoS Service Level Enforcement policy: Modify page" /></p>
		</li>
	<li>Specify values for the following:
		<ul>
			<li><strong>Consumer Fault Message</strong>: The error message returned to the consumer when an SLA is violated.</li>
			<li><strong>HTTP result code</strong>: The HTTP response code returned to the consumer when a message is rejected because the SLA was violated.</li>
		</ul>
		</li>
	
	<li>When done, click <strong>Finish</strong>.</li>
	<li>At the <strong>Completion Summary</strong> page, click <strong>Close</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_attach">Attaching the policy</h2>
<p>To use the Service Level Enforcement policy, go to the <strong>Policies</strong> folder in the respective organization and attach the policy to a web service, binding, or binding operation.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_test">Testing the Policy and Viewing Monitoring Data</h2>
<p>After you've attached the Service Level Enforcement Policy to a web service, operation, or binding, send a request to your service and go to the <strong>Services</strong> &gt; <strong>Monitoring</strong> section to view the results for Logs, Real Time Charts, and Historical Charts.</p>
<p><a href="#top">Back to top</a></p>



<hr class="divide_hr" />



<h2 id="uc_policy_qos_service_level_enforcement_pm">Service Level Enforcement Policy: use cases for Policy Manager</h2>
<p>This section provides a list of Policy Manager-specific usage scenarios for the Service Level Enforcement Policy.</p>
<p>It includes:</p>
<ol>
	<li><a href="#uc_policy_qos_service_level_enforcement_pm_01">Scenario 1: Block Request to Service</a></li>
	<li><a href="#uc_policy_qos_service_level_enforcement_pm_02">Scenario 2: SLA Clear Alert</a></li>
	<li><a href="#uc_policy_qos_service_level_enforcement_pm_03">Scenario 3: SLA Reset</a></li>
	<li><a href="#uc_policy_qos_service_level_enforcement_pm_04">Timeline</a></li>
</ol>



<h3 id="uc_policy_qos_service_level_enforcement_pm_01">Scenario 1: Block Request to Service</h3>
<p>Block request to service for 15 minutes after 300 requests SLA has been violated. In this scenario, a fault message is returned to the app. The message that's returned is the one defined in the Service Level Enforcement Policy.</p>
<ol>
	<li>Create a physical service in the Policy Manager Management Console using <strong>Create Physical Service</strong>.</li>
	<li>Provide service details and finish the wizard.</li>
	<li>Using <strong>Virtualize Service</strong>, virtualize and host the physical service on Network Director (<strong>ND1</strong>), and assign a name (for example, <strong>Vs1</strong>).</li>
	<li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QoS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Enforcement Policy.</li>
	<li>Configure the Service Level Enforcement Policy and define a custom Fault message that reflects the use case scenario purpose.</li>
	<li>Next, use <strong>Add Policy</strong> and create a Service Level Policy.</li>
	<li>Configure this policy as per the use case with a Custom alert for Usage Count &gt; 300 in a 15-minute interval.</li>
	<li>Attach the Service Level Enforcement policy and Service Level policy to the Vs1 service in the <strong>Service Details</strong> &gt; <strong>Policy Attachments</strong> &gt; <strong>QoS</strong> section.
	<p><img src="images/service_level_enforcement_uc_pm_01.jpg" alt="" /></p></li>
	<li>Send more than 300 requests to Vs1 from the application/client.</li>
	<li>The first 300 requests will be successful. Subsequent requests will fail and generate the custom Fault message defined in the Service Level Enforcement Policy.</li>
</ol>


<h3 id="uc_policy_qos_service_level_enforcement_pm_02">Scenario 2: SLA Clear Alert</h3>
<p>SLA generates a clear alert and sends an email to alert the administrator(s) after the App has been denied access for 15 minutes.</p>
<ol>
	<li>Create a physical service in the Policy Manager Management Console using Create Physical Service.</li>
	<li>Provide service details and finish the wizard.</li>
	<li>Using <strong>Virtualize Service</strong>, virtualize and host the physical service on Network Director (ND1), and assign a name (for example, Vs1).</li>
	<li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QOS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Enforcement Policy.</li>
	<li>Configure the Service Level Enforcement Policy as per the use case a with a custom Fault message.</li>
	<li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QOS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Policy.</li>
	<li>Configure the Service Level Policy as per the use case with a custom alert for Usage Count &gt; 300 in a 15-minute interval.</li>
	<li>Activate the policies in the Service Level Enforcement Policy and Service Level Policy in the Policy Workflow portlet and attach them to the Vs1 service in the <strong>Service Details</strong> &gt; <strong>Policy Attachments</strong> &gt; <strong>QoS</strong> section.</li>
	<li>Send more than 300 requests to Vs1 from the application/client.</li>
	<li>The first 300 requests will be successful. Subsequent requests will fail and generate the custom Fault message defined in the Service Level Enforcement Policy.</li>
	<li>After the alert is generated, if the SLA is not violated again, a clear alert will be generated.</li>
	<li>If the alert is configured with an email, it will be sent to the assigned users when triggered.</li>
</ol>


<h3 id="uc_policy_qos_service_level_enforcement_pm_03">Scenario 3: SLA Reset</h3>
<p>SLA has been reset and the App can send to the API.</p>
<ol>
	<li>Create a physical service in the <strong>Policy Manager Management Console</strong> using <strong>Create Physical Service</strong>.</li>
	<li>Provide service details and finish the wizard</li>
	<li>Using <strong>Virtualize Service</strong>, virtualize and host the physical service on Network Director (ND1), and assign a name (for example, Vs1),</li>
	<li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QOS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Enforcement Policy.</li>
	<li>Configure the Service Level Enforcement Policy as per the use case a custom Fault message</li>
	<li>Navigate to <strong>Organization</strong> &gt; <strong>Policies</strong> &gt; <strong>QOS Policies</strong> and use <strong>Add Policy</strong> to create a Service Level Policy.</li>
	<li>Configure the Service Level Policy as per the use case with custom alert for Usage Count &gt; 300 in 15-minute intervals.</li>
	<li>Activate the policies in the Service Level Enforcement Policy and Service Level Policy in the Policy Workflow portlet and attach them to the Vs1 service in the <strong>Service Details</strong> &gt; <strong>Policy Attachments</strong> &gt; <strong>QoS</strong> section.</li>
	<li>Send more than 300 requests to Vs1 from the application/client.</li>
	<li>The first 300 requests will be successful. Subsequent requests will fail and generate the custom Fault message defined in the Service Level Enforcement Policy.</li>
	<li>After the alert is generated, if the SLA is not violated again, a clear alert will be generated.</li>
	<li>After clear alert is generated the requests should be successful until it violates the SLA again.</li>
</ol>
<h3 id="uc_policy_qos_service_level_enforcement_pm_04">Timeline</h3>
<p><img src="images/service_level_enforcement_uc_pm_02.jpg" alt="" /></p>
<p><a href="#top">Back to top</a></p>



<h2 id="uc_policy_qos_service_level_enforcement_cm">Service Level Enforcement Policy: use cases for the Akana API Platform (Community Manager)</h2>
<p>This section provides a list of Community Manager-specific usage scenarios for the Service Level Enforcement Policy.</p>
<p>It includes:</p>
<ol>
	<li><a href="#uc_policy_qos_service_level_enforcement_cm_00">Overview</a></li>
	<li><a href="#uc_policy_qos_service_level_enforcement_cm_01">Add / Configure Service Level Enforcement Policy</a></li>
	<li><a href="#uc_policy_qos_service_level_enforcement_cm_02">Scenario 1: Verify Service Level Enforcement Policy Alerts at the Service Level</a></li>
	<li><a href="#uc_policy_qos_service_level_enforcement_cm_03">Scenario 2: Verify Service Level Enforcement Policy Alerts at the Contract Level</a></li>
	<li><a href="#uc_policy_qos_service_level_enforcement_cm_04">Scenario 3: Verify Service Level Enforcement Policy Alerts at the License &gt; Term Level</a></li>
</ol>


<h3 id="uc_policy_qos_service_level_enforcement_cm_00">Overview</h3>
<p>The Service Level Enforcement Policy allows you to enable and configure the error message returned to the consumer when their SLA is violated. It works in conjunction with the Service Level Policy.</p>
<p>If you are using a Service Level Enforcement Policy with Community Manager, you must first add the policy to the Community Manager Tenant Organization in Policy Manager. Once that's done, it will be available for selection in the developer portal.</p>
<p>The policy only applies to the following Service Level Policy rules:</p>
<ul>
	<li>Usage Count</li>
	<li>Total Request Message Size</li>
	<li>Total Response Message Size</li>
</ul>


<h3 id="uc_policy_qos_service_level_enforcement_cm_01">Add / Configure Service Level Enforcement Policy</h3>
<ol>
	<li>In the <strong>Policy Manager Management Console</strong>, go to the Tenant Organization, choose <strong>Policies</strong> &gt; <strong>QoS Policies</strong>, and then click <strong>Add Policy</strong>.
	<p><img src="images/service_level_enforcement_uc_cm_01.jpg" alt="" /></p></li>
	<li>Specify Policy Name, Policy Type (Service Level Enforcement Policy), click <strong>Finish</strong>, and then click <strong>Close</strong>.
	<p><img src="images/service_level_enforcement_uc_cm_02.jpg" alt="" /></p></li>
	<li>On the Service Level Enforcement Policy Details screen, click <strong>Modify</strong>.
	<p><img src="images/service_level_enforcement_uc_cm_03.jpg" alt="" /></p></li>
	<li>Configure error message as shown below, then Finish.
	<p><img src="images/service_level_enforcement_uc_cm_04.jpg" alt="" /></p></li>
	<li>Activate the policy.
	<p><img src="images/service_level_enforcement_uc_cm_05.jpg" alt="" /></p></li>
</ol>


<h3 id="uc_policy_qos_service_level_enforcement_cm_02">Scenario 1: Verify Service Level Enforcement Policy Alerts at the Service Level</h3>
<ol>
	<li>Launch Community Manager.</li>
	<li>Go to API Details &gt; Edit API &gt; Proxy Section &gt; Advanced Options and attach the following policies:</li>
	<li>In Quality of Service Policies section, attach Service Level Enforcement Policy.</li>
	<li>In Operational Policies section, attach Atmosphere Application Security Policy (No Signature) and Detailed Auditing.
	<p><img src="images/service_level_enforcement_uc_cm_06.jpg" alt="" /></p></li>
	<li>Go to the app that's connected with the above API. Go to Test client and send more than 5 requests (as Service Level Policy rule is configured with Usage Count &gt; 5).</li>
	<li>When the SLA is violated, the error message configured in the Service Level Enforcement Policy will display.
	<p><img src="images/service_level_enforcement_uc_cm_07.jpg" alt="" /></p></li>
</ol>


<h3 id="uc_policy_qos_service_level_enforcement_cm_03">Scenario 2: Verify Service Level Enforcement Policy Alerts at the Contract Level</h3>
<ol>
	<li>Launch Community Manager.</li>
	<li>While requesting API Access, select the Service Level Enforcement Policy and Service Level Policy checkbox and finish the process. Make sure the contract is activated.
	<p><img src="images/service_level_enforcement_uc_cm_08.jpg" alt="" /></p></li>
	<li>Go to App &gt; Test Client and send more than 5 requests.</li>
	<li>You will see an error message after there are more than 5 successful requests.
		<p><img src="images/service_level_enforcement_uc_cm_09.jpg" alt="" /></p></li>
	<li>You will see a Service Level Policy alert also in the Community Manager Dashboard. Once it is cleared, then requests will be successful.
	<p><img src="images/service_level_enforcement_uc_cm_10.jpg" alt="" /></p></li>
</ol>


<h3 id="uc_policy_qos_service_level_enforcement_cm_04">Scenario 3: Verify Service Level Enforcement Policy Alerts at the License &gt; Term Level</h3>
<ol>
	<li>To verify this policy, you'll need to set up scope mapping for an API. Assuming that a license is already added as part of the Service Level Policy Configuration, complete the following steps:</li>
	<li>Go to <strong>Edit License</strong> and attach the Service Level Enforcement Policy and Service Level Policy.
<p><img src="images/service_level_enforcement_uc_cm_11.jpg" alt="" /></p></li>
	<li>Use this License >Scope for scope mapping of an API.
	<p><img src="images/service_level_enforcement_uc_cm_12.jpg" alt="" /></p></li>
	<li>Now go to the app that's connected to the API. go to Test Client and send more than 5 requests. Once the SLA is violated, you will see an error message. The specific message is configured in the Service Level Enforcement Policy.
		<p><img src="images/service_level_enforcement_uc_cm_13.jpg" alt="" /></p>
	<p><img src="images/service_level_enforcement_uc_cm_14.jpg" alt="" /></p></li>
	<li>Go to App &gt; Monitoring &gt; Logs. You will see an error record along the lines of the below.
		<p><img src="images/service_level_enforcement_uc_cm_15.jpg" alt="" /></p></li>
	<li>Once SLA is cleared, requests will be successful.
	<p><img src="images/service_level_enforcement_uc_cm_16.jpg" alt="" /></p></li>
</ol>
<p><a href="#top">Back to top</a></p>



<hr class="divide_hr" />



<h2 id="related_topics">Related Topics</h2>
<div class="relatedlinks">
<ul>
	<li><a href="about_policies_view.htm">About Policies</a></li>
	<li><a href="policy_management.htm">Managing Policies</a></li>
	<li><a href="policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="../../cm/learnmore/basics_glossary.htm">Glossary of Terms for the Developer Portal</a></li>
</ul>
</div>