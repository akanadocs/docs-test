---
layout: page
title: Using the Authorization Policy
description: Learn how to use the Authorization policy to authorize the end-user Subject of an API call, including specifying the identity system (domain or realm) that will be the authorization agent.
product: ag
category: learn
sub-nav-class: Policies - Operational
weight: 04
type: page
nav-title: Authorization
---
<h1 id="top">Using the Authorization Policy</h1>
<p>Learn how to use the Authorization policy to authorize the end-user Subject of an API call, including specifying the identity system (domain or realm) that will be the authorization agent.</p>

<p>
<a href="about_policies_view.htm" class="button secondary">About Policies</a>  
<a href="policy_management.htm" class="button secondary">Managing Policies</a>  
<a href="policies_operational_about.htm" class="button secondary">About Operational Policies</a>
</p>
<p>For information about using policies in the context of the developer portal, see <a href="../../cm/learnmore/bus_admin_organizations.htm#h_business_policies">Business Policies</a>.</p>



<hr class="divide_hr" />
<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#introduction">Introduction</a></li>
	<li><a href="#authorization_create">Creating an Authorization Policy</a></li>
	<li><a href="#authorization_config">Configuring the Authorization Policy</a></li>
	<li><a href="#authorization_policy_options">Configuring Authorization Policy Options</a></li>
	<li><a href="#policy_attach">Attaching the Policy</a></li>
	<li><a href="#authorization_policy_assertion">Authorization Policy Assertion</a></li>
	<li><a href="#authorization_policy_scope">Authorization Policy Scope</a></li>
</ol>
<hr class="divide_hr" />



<h2 id="introduction">Introduction</h2>
<p>A typical governance requirement is to provide authorization of the use of services. The authorization rules are defined using a Governance Application. The authorization rules are enforced by two collaborating parties, a Policy Decision Point (PDP) and a Policy Enforcement Point (PEP). The container acts as a PEP. The container might also act as a PDP, but typically it simply integrates with a PDP. It is also possible that multiple PDPs are leveraged within an SOA and must be integrated with the container.</p>
<p>Information relating to authorization, including identification of the requirement for authorization and details about the PDP that must be used for authorization, is configured through an authorization policy.</p>
<p>Specification:</p>
<ul>
	<li><a href="https://www.w3.org/Submission/WS-PolicyAttachment/" title="Link to WS-PolicyAttachment specification" target="_blank">WS-PolicyAttachment specification</a></li>
</ul>
<p><a href="#top">back to top</a></p>



<h2 id="authorization_create">Creating an Authorization policy</h2>
<p>The first step in creating a policy is to define the basic policy information. Then, you can configure the policy details.</p>

<h4>To add an operational policy</h4>
<ol>
	<li>Go to <strong>Workbench</strong> &gt; <strong>Browse</strong> &gt; <strong>Organization</strong>, and select <strong>Policies</strong> &gt; <strong>Operational Policies</strong>. The <strong>Policies Summary</strong> is displayed.</li>
	<li>Click <strong>Add Policy</strong>.</li>
	<li>Choose the policy type and click <strong>Next</strong>.</li>
	<li>Specify a name (required) and description (optional) and click <strong>Finish</strong>. At the <strong>Completion Summary</strong>, Click <strong>Close</strong>. The <strong>Add Policy</strong> Wizard creates a draft policy instance that you can then configure on the <strong>Policy Details</strong> page.</li>
</ol>
<p>For more information, see <a href="policy_management.htm#add_policy">Add Policy</a>.</p>
<p><a href="#top">back to top</a></p>



<h2 id="authorization_config">Configuring the Authorization Policy</h2>
<p>To configure your Authorization policy, follow the steps below.</p>

<h4 id="proc_authorization_policy_config">To configure the Authorization policy</h4>
<ol>
	<li>Create the policy as covered above.</li>
	<li>At the <strong>Policies Summary</strong> page, in the <strong>Authorization policy</strong> section, click <strong>Modify</strong>. The <strong>Modify Authorization Policy</strong> page appears, as shown below.
		<p><img src="images/authorization.jpg" alt="Modify Authorization Policy page" /></p>
	</li>
	<li>Specify values. For information about the fields, refer to <a href="#authorization_policy_options">Configuring Authorization Policy Options</a> below.</li>
	<li>When done, click <strong>Finish</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<h2 id="authorization_policy_options">Configuring Authorization Policy Options</h2>
<p>Once you've created the policy, you can configure the policy options. The sections below provide more information on the options available.</p>

<dl>

<dt>Subject Category</dt>
<dd>Options:
<ul>
	<li><strong>Consumer</strong>: The consumer of the service; the client application. This is the default and most common value.</li>
	<li><strong>End-User</strong>: The end-user of the client application.</li>
	<li><strong>User-Defined</strong>: You can define a specific subject category that will be used for identification purposes. If you choose this option, specify the value that will be used. Make sure you spell it exactly correctly, including capitalization.</li>
</ul></dd>




<dt>Domain (Realm)</dt>
<dd>Allows you to define the trust realm or domain in which authorization is performed. Options:
	<ul>
		<li><strong>Local Domain</strong>: Allows you to specify that authorization is done at the local domain level.
		<p>If you choose Local Domain, the End-User authorization is done locally using the Authorization Rules configured for the service/API. These Authorization Rules are configured using the Policy Manager Console.</p></li>
		<li><strong>External Domain</strong>: Allows you to use an integrated identity system and configure authorization for an external domain.
		<p>Choosing this option allows an Identity System to be used as the Authorization Agent. It must already be configured on the platform, and is then available in the drop-down list. There are two Identity System types that support authorization: <strong>SiteMinder</strong> and <strong>Claims</strong>. In the case of SiteMinder, the authorization rules are specified using the SiteMinder Policy Server admin tools.</p>
		<p>Select from the drop-down list of valid options and specify <strong>Resource</strong>, <strong>Action</strong>, or both. <strong>Resource</strong> represents the established authorization method of the external domain; for example, it could be a user, administrator, local group, domain, or local group. Each resource is assigned privileges that provide an authorization result; for example, prompt for authorization, authorization not required. <strong>Action</strong> represents the level of authorization assigned to a user; for example, admin authorization, root authorization, no authorization.</p></li>
	</ul>
</dd>


<dt>Generate Audit Data</dt>
<dd>Captures all message data, whether success or failure, for all message exchanges. </dd>
<dd>If you choose to generate audit data, you can check <strong>On Error Only</strong> to specify that audit data is captured only when an error occurs on a message exchange.</dd>



</dl>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_attach">Attaching the Policy</h2>
<p>To use the Authorization policy, go to the <strong>Policies</strong> folder in the respective organization and attach the policy to a web service, binding, or binding operation.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="authorization_policy_assertion">Authorization Policy Assertion</h2>
<p>The syntax of the authorization policy assertion is as follows:</p>
<pre>01)  &lt;gazp:Authorization SubjectCategory="xs:anyURI" ...&gt;
02)    &lt;gazp:Realm&gt;xs:anyURI&lt;/gazp:Realm&gt;
03)    (
04)      &lt;xacml:Resource&gt;xacml:ResourceType&lt;/xacml:Resource&gt;
05)      &lt;xacml:Action&gt;xacml:ActionType&lt;/xacml:Action&gt;
06)    ) ?
07)    ...
08)  &lt;/gazp:Authorization&gt;
</pre>
<dl>
<dt>gazp:Authorization</dt>
<dd>Authorization policy assertion element.</dd>
<dt>gazp:Authorization/@SubjectCategory</dt>
<dd>This required attribute identifies the specific identity associated with the message to authorize by the category of the authenticated subject. The SubjectCategory is specified as a URI and must correspond to a SubjectCategory specified in the security policy governing the same message.</dd>
<dt>gazp:Authorization/gazp:Realm</dt>
<dd>URI representing the trust realm, or domain, in which the authorization is performed.</dd>
<dt>gazp:Authorization/xacml:Resource</dt>
<dd>The optional element identifies the resource to authorize access to as defined by the XACML specification. If the element is not included, it is assumed that the PDP can make its authorization decisions using only the context of the message received.</dd>
<dt>gazp:Authorization/xacml:Action</dt>
<dd>The optional element identifies the action to authorize access to as defined by the XACML specification. The element is required if the xacml:Resource element is included.</dd>
<dt>gazp:Authorization /@{any}</dt>
<dd>Additional attributes MAY be specified but MUST NOT contradict the semantics of the [owner element]; if an attribute is not recognized, it SHOULD be ignored.</dd>
<dt>gazp:Authorization /{any}</dt>
<dd>This is an extensibility mechanism to allow additional elements to be specified.</dd>
</dl>
<p>An example of an authorization policy is illustrated below:</p>
<pre>01)  &lt;wsp:Policy Visibility="private" xmlns:wsp="..."&gt;
02)    &lt;gazp:Authorization SubjectCategory="urn:gazp:security:subject-category:consumer" xmlns:soa="..."&gt;
03)      &lt;gazp:Realm&gt;example.com&lt;/gazp:Realm&gt;
04)      &lt;xacml:Resource&gt;
05)        &lt;xacml:Attribute AttributeId="urn:oasis:names:tc:xacml:2.0:resource:resource-id" DataType="http://www.w3.org/2001/XMLSchema#anyURI"&gt;
06)          &lt;xacml:AttributeValue&gt;
07)            http://example.com/consumerBanking
08)          &lt;/xacml:AttributeValue&gt;
09)        &lt;/xacml:Attribute&gt;
10)      &lt;/xacml:Resource&gt;
11)      &lt;xacml:Action&gt;
12)        &lt;xacml:Attribute AttributeId="urn:oasis:names:tc:xacml:2.0:action:action-id" DataType="http://www.w3.org/2001/XMLSchema#string"&gt;
13)          &lt;xacml:AttributeValue&gt;
14)            getQuote
15)          &lt;/xacml:AttributeValue&gt;
16)        &lt;/xacml:Attribute&gt;
17)      &lt;/xacml:Action&gt;
18)    &lt;/gazp:Authorization&gt;
19)  &lt;/wsp:Policy&gt;</pre>
<p>In the above: </p>
<ul>
	<li>On line 02 the <span class="apidoc_code">SubjectCategory</span> attribute indicates this policy is for authenticating consumers.</li>
	<li>Line 03 identifies the <strong>example.com</strong> realm that will make the authorization decision.</li>
	<li>Lines 04&#8211;10 identify the protected resource in the example.com realm that is being requested access to.</li>
	<li>Lines 11&#8211;17 identify the action on that resource that is being performed.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h2 id="authorization_policy_scope">Authorization Policy Scope</h2>
<p>The authorization policy assertion can have the following Policy Subjects as defined in the <a href="https://www.w3.org/Submission/WS-PolicyAttachment/" title="Link to WS-PolicyAttachment specification" target="_blank">WS-PolicyAttachment specification</a>:</p>
<ul>
	<li>Service Policy Subject</li>
	<li>Endpoint Policy Subject</li>
	<li>Operation Policy Subject</li>
</ul>
<p>The WS-PolicyAttachment specification defines a set of WSDL/1.1 policy attachment points for each of the above Policy Subjects. Since an authorization policy assertion has no dependency on any WSDL binding, it SHOULD be attached to the following abstract WSDL policy attachment points:</p>
<ul>
	<li>wsdl:service</li>
	<li>wsdl:port</li>
	<li>wsdl:portType</li>
	<li>wsdl:portType/wsdl:operation</li>
</ul>
<p>An authorization policy assertion MAY be attached to the following physical WSDL policy attachment points:</p>
<ul>
	<li>wsdl:binding</li>
	<li>wsdl:binding/wsd:operation</li>
</ul>
<p>An authorization policy does not dictate any behavior required by a consumer in order to complete message exchanges. Therefore it is RECOMMENDED that authorization policies be classified as <strong>private</strong> by including the <span class="apidoc_code">gazp:Visibility</span> attribute in the enclosing <span class="apidoc_code">wsp:Policy</span> element with a value of <strong>private</strong>.</p>
<p>The following is an example of an authorization policy attached to WSDL components.</p>
<pre>01) &lt;wsdl:definitions name="StockQuote" targetNamespace="..." xmlns:wsdl="..." xmlns:wsoap12="..." xmlns:wsp="..." xmlns:wsu="..." xmlns:gazp="..." &gt;
02)   &lt;wsp:Policy wsu:Id="Authz1" visibility="private"&gt;
03)     &lt;gazp:Authorization&gt;
04)       &lt;!-- Details omitted for readability --&gt;
05)     &lt;/gazp:Authorization&gt;
06)   &lt;/wsp:Policy&gt;
07)   &lt;wsp:Policy wsu:Id="Authz2" visibility="private"&gt;
08)     &lt;gazp:Authorization&gt;
09)       &lt;!-- Details omitted for readability --&gt;
10)     &lt;/gazp:Authorization&gt;
11)   &lt;/wsp:Policy&gt;
12)   &lt;wsdl:import namespace="..." location="..." /&gt;
13)   &lt;wsdl:portType name="StockQuote"&gt;
14)     &lt;wsdl:operation name="GetQuote" /&gt;
15)       &lt;wsdl:input message="..." /&gt;
16)       &lt;wsdl:output message="..." /&gt;
17)       &lt;wsp:PolicyReference URI="#Authz1" wsdl:required="true" /&gt;
18)     &lt;/wsdl:operation&gt;
19)     &lt;wsdl:operation name="GetSymbol" /&gt;
20)       &lt;wsdl:input message="..." /&gt;
21)       &lt;wsdl:output message="..." /&gt;
22)       &lt;wsp:PolicyReference URI="#Authz2" wsdl:required="true" /&gt;
23)     &lt;/wsdl:operation&gt;
24)   &lt;/wsdl:portType&gt;
25) &lt;/wsdl:definitions&gt;</pre>
<p>In the above:</p>
<ul>
	<li>Lines 02&#8211;11 are two authentication policies, <span class="apidoc_code">Authz1</span> and <span class="apidoc_code">Authz2</span>.</li>
	<li><span class="apidoc_code">Authz1</span> is associated with the <span class="apidoc_code">GetQuote</span> operation on line 17.</li>
	<li><span class="apidoc_code">Authz2</span> is associated with the <span class="apidoc_code">GetSymbol</span> operation on line 22.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<hr class="divide_hr" />



<h2 id="related_topics">Related Topics</h2>
<div class="relatedlinks">
<ul>
	<li><a href="about_policies_view.htm">About Policies</a></li>
	<li><a href="policy_management.htm">Managing Policies</a></li>
	<li><a href="policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="../../cm/learnmore/basics_glossary.htm">Glossary of Terms for the Developer Portal</a></li>
</ul>
</div>