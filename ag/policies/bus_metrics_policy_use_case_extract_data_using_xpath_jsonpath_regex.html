---
layout: page
title: Business Metrics Policy Use Case - Extracting Business Information from Service Usage Data Using XPath/JsonPath/RegEx
description: Learn how to use the Business Metrics Policy to Extract Business information from service usage data using XPath/JsonPath/RegEx from Request payload and derive operational metrics.
product: ag
category: learn
weight: 05
sub-nav-class: Policies - Integration
type: page
nav-title: Business Metrics Policy Use Case - Extracting Business Information from Service Usage Data Using XPath/JsonPath/RegEx
---
<h2 id="top">Business Metrics Policy Use Case - Extracting Business Information from Service Usage Data Using XPath/JsonPath/RegEx</h2>
<p>The following use case illustrates how to use the Business Metrics Policy to extract business information from the service usage data using XPath/JsonPath/RegEx from the request payload and derive operational metrics.</p>
<p><a href="policy_management.htm" class="button secondary">Managing Policies</a>  
<a href="policies_use_case_toc.html" class="button secondary">Business Metrics Policy Use Cases</a></p>

<h5 class="stamp">Supported Platforms: 8.0 and greater.</h5>
<div id="toc-marker"></div>


<h3>Configuration</h3>
<ol>
  <li>Launch the <em>Envision Console</em>, select <strong>New Dataset</strong>, and define a dataset with sharing as <strong>Public</strong>.
  <p><img src="images/bus_metrics_pol_usecase1a.jpg" alt="Defining a new public dataset" /></p></li>
  <li>In the new dataset, select <strong>New Dimension</strong> and define a dimension with the <strong>TEXT</strong> type.
  <p><img src="images/bus_metrics_pol_usecase1b.jpg" alt="Defining a dimension" /></p></li>
  <li>Select <strong>New Metric</strong> in the same dataset and define a metric with the the <strong>COUNT</strong> type and all aggregations. 
  <p><img src="images/bus_metrics_pol_usecase1c.jpg" alt="Defining a new metric" /></p></li>
  <li>Save aggregation settings for the selected dataset.
  <p><img src="images/bus_metrics_pol_usecase1d.jpg" alt="Saving aggregation settings" /></p></li>
  <li>Select <strong>New Chart</strong>, and create a chart using this dataset with the follwing configuration:
  <p><img src="images/bus_metrics_pol_usecase1e.jpg" alt="Creating a chart" /></p>
  <p><img src="images/bus_metrics_pol_usecase1f.jpg" alt="Business Metrics chart info" /></p>
  <p><img src="images/bus_metrics_pol_usecase1g.jpg" alt="Business Metrics chart: defining axes" /></p></li>
  <li>Select <strong>New Dashboard</strong> and create a dashboard with the newly defined chart:
  <p><img src="images/bus_metrics_pol_usecase1h.jpg" alt="Creating a dashboard with the new chart" /></p>
  <p><img src="images/bus_metrics_pol_usecase1i.jpg" alt="Add Chart" /></p>
  <p><img src="images/bus_metrics_pol_usecase1j.jpg" alt="Adding the chart" /></p></li>
  <li>Launch the <em>Policy Manager Management Console</em> and create a service with <a href="http://www.restfulwebservices.net/wcf/CurrencyService.svc?wsdl7">http://www.restfulwebservices.net/wcf/CurrencyService.svc?wsdl7</a>.</li>
  <li>Virtualize the service on Network Director.
  <p><img src="images/bus_metrics_pol_usecase1k.jpg" alt="Virtualizing the service" /></p></li>
  <li>Navigate to <em>Policies &gt; Operational</em> and create a <em>Business Metrics Policy</em> using <strong>Add Policy</strong>.</li>
  <li>Configure the policy and select the dataset defined above.
  <p><img src="images/bus_metrics_pol_usecase1l.jpg" alt="Configuring the Business Metrics policy" /></p></li>
  <li>
Provide Extract/Derive Configuration for each of the dimensions and metrics using the example illustrated below:  

<ul>
  <li>a. Dimension using Extract – To obtain a value in request payload using XPath/JsonPath/RegEx.</li>
  <li>b. Metric using Derive – To obtain usage count.
  <p><img src="images/bus_metrics_pol_usecase1m.jpg" alt="Configuring the policy: defining the dimensions" /></p>
  <p><img src="images/bus_metrics_pol_usecase1n.jpg" alt="Configuring the policy: defining the metrics" /></p>
  <p><img src="images/bus_metrics_pol_usecase1o.jpg" alt="Configuring the policy: defining the metrics" /></p></li>
</ul>
</li>
  <li>Attach the policy to the service.
  <p><img src="images/bus_metrics_pol_usecase1p.jpg" alt="Attaching the policy to the service" /></p>
  <p><img src="images/bus_metrics_pol_usecase1q.jpg" alt="Attaching the policy to the service" /></p></li>
  <li>Send multiple requests to generate data for various usage scenarios.
  <p><img src="images/bus_metrics_pol_usecase1r.jpg" alt="Sending requests to the service" /></p>
  <p><img src="images/bus_metrics_pol_usecase1s.jpg" alt="Sending requests to the service" /></p>
  <p><img src="images/bus_metrics_pol_usecase1t.jpg" alt="Sending requests to the service" /></p>
  <p><img src="images/bus_metrics_pol_usecase1u.jpg" alt="Sending requests to the service" /></p></li>
  <li>Check the data to be recorded in MongoDB and Dataset. The data should be appropriate per the requests sent.</li>
  <li>The chart should record information based on the data generated in the datasets from above requests. </li>
</ol>
<p><a href="#top">Back to top</a></p>