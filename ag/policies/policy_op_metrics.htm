---
layout: page
title: Using the Metrics Policy in Policy Manager 
description: Learn how to collect rollup data on specific services/operations using a Metrics Policy.
product: ag
category: learn
sub-nav-class: Policies - Operational
weight: 44
type: page
nav-title: Metrics
---
<h1 id="top">Using the Metrics Policy</h1>
<p>Learn how to collect rollup data on specific services/operations using a Metrics Policy.</p>
<p>For information about using policies in the context of the Community Manager developer portal, see <a href="../../cm/learnmore/bus_admin_organizations.htm#h_business_policies">Business Policies</a>.</p>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#introduction">Introduction</a></li>
	<li><a href="#configuration">Configuration</a></li>
	<li><a href="#policy_activating">Activating a policy</a></li>
	<li><a href="#policy_attach">Attaching a policy</a></li>
</ol>
<hr class="divide_hr" />



<h2 id="introduction">Introduction</h2>
<p>The Metrics Policy is an Operational policy that allows you to collect roll-up data for selected services/operations that the policy is attached to. A Metrics Policy is useful for:</p>
<ul>
	<li><strong>Database Space Conservation</strong>: Roll-up data on a large number of services can take up a significant amount of database space. Designating specific services/operations where roll-up data will be captured reduces the chance of receiving out-of-memory database exception errors.</li>
	<li><strong>Granular View of Service Activity</strong>: You might have a set of services that include specific operations you want to monitor at a more granular level (for example, to track service level or volume of activity).</li>
</ul>
<p>This is how it works:</p>
<ul>
	<li>Roll-up data is controlled in the Network Director or Agent container by the following configuration setting: <strong>Akana Administration Console</strong> &gt; <strong>Configuration</strong> &gt; <strong>com.soa.metrics</strong> configuration category &gt; <strong>metrics.rollup.reporter.requireMetricsPolicy</strong> property.</li>
	<li>By default, the <strong>metrics.rollup.reporter.requireMetricsPolicy property</strong> is set to <strong>False</strong>. This means that roll-up data is collected for all managed services in Policy Manager. Roll-up data can be viewed in the Logs, Real Time Charts, and Historical Charts in the <strong>Services</strong> &gt; <strong>Monitoring</strong> section.</li>
	<li>To change the roll-up data collection approach, change the property state to <strong>True</strong>, create a Metrics Policy in the <strong>Policy Manager Management Console</strong>, and attach the policy to any service or service operation you would like to capture roll-up data for.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h2 id="configuration">Configuration</h2>
<p>Let's take a quick walkthrough of the Metrics Policy configuration process to get you started.</p>

<h4 id="step_01">Step 1: Change Roll-up Data Property</h4>
<ul>
	<li>Launch the Akana Administration Console for your Network Director instance.</li>
	<li> Select the <strong>Configuration</strong> tab.</li>
	<li>In Configuration Categories on the left, choose <strong>com.soa.metrics</strong>. The default status of <strong>False</strong> indicates that roll-up data is currently being captured for all managed services.</li>
	<li> Change the state to <strong>True</strong> and save.</li>
</ul>
<p><img src="images/metrics_admin_console.jpg" alt="" /></p>

<h4 id="step_02">Step 2: Add Policy / Use System Policy</h4>
<ul>
	<li>In Policy Manager, to create a Metrics policy instance, go to <strong>Policies</strong> &gt; <strong>Operational Policies</strong> and choose <strong>Add Policy</strong>.</li>
</ul>
<p class="Note"><strong>Note</strong>: The Metrics Policy does not require any configuration.</p>

<h4 id="step_03_act">Step 3: Activate Policy</h4>
<p>When the policy configuration is complete, activate the policy so that you can use it.</p>


<h4 id="step_03">Step 4: Attach Policy</h4>
<p>After you've saved and activated your policy, you can attach it:</p>
<ul>
	<li>To an individual web service to apply it to that service</li>
	<li>To a specific operation that you would like to capture roll-up data for</li></ul>
<p><img src="images/metrics_policy_attachment.jpg" alt="" /></p>

<h4 id="step_04">Step 5: Test Policy and View Monitoring Data</h4>
<p>After you've attached the Metrics Policy to a service or operation, send a request to your service and go to the <strong>Services</strong><em> &gt; </em><strong>Monitoring</strong> section to view the results for Logs, Real Time Charts, and Historical Charts.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_activating">Activating a policy</h2>
<p>When you create and configure a policy, the policy is in <strong>Draft</strong> state. When the policy configuration is complete, activate the policy: click <strong>Activate Policy</strong> and then confirm. See <a href="policy_management.htm#policy_activate">Activate a Policy</a>.</p>
<p>A policy in Draft state is not available for general use. Once you activate the policy, it is in <strong>Active</strong> state and is available for use.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_attach">Attaching a policy</h2>
<p>To use the policy, go to the <strong>Policies</strong> folder in the respective organization and attach the policy to a web service, binding, or binding operation.</p>
<p><a href="#top">Back to top</a></p>



<hr class="divide_hr" />



<h2 id="related_topics">Related Topics</h2>
<div class="relatedlinks">
<ul>
	<li><a href="about_policies_view.htm">About Policies</a></li>
	<li><a href="policy_management.htm">Managing Policies</a></li>
	<li><a href="policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="../../cm/learnmore/basics_glossary.htm">Glossary of Terms for the Community Manager developer portal</a></li>
</ul>
</div>