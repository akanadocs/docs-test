<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Policies</title>
<link href="../../style/reset.css" rel="stylesheet" type="text/css" />
<link href="../../style/base.css" rel="stylesheet" type="text/css" />
<link href="../../style/document.css" rel="stylesheet" type="text/css" />

</head>
<body>
<div class="documentation supportContent">
<!-----
layout: page
title: Using the Metrics Policy in Policy Manager 
description: Learn how to collect rollup data on specific services/operations using a Metrics Policy.
product: ag
category: learn
sub-nav-class: Policies - Operational
weight: 04
type: page
nav-title: Metrics
----->
<h2 id="top">Using the Metrics Policy</h2>
<p>Learn how to collect rollup data on specific services/operations using a Metrics Policy.</p>

<p>
<a href="about_policies_view.htm" class="button secondary">About Policies</a>  
<a href="policy_management.htm" class="button secondary">Managing Policies</a>  
<a href="policies_operational_about.htm" class="button secondary">About Operational Policies</a></p>
<p>For information about using policies in the context of the developer portal, see <a href="../../cm/learnmore/bus_admin_organizations.htm#h_business_policies">Business Policies</a>.</p>



<div class = "divider1"></div>
<h3 style="color: gray;">Table of Contents</h3>
<ol class="table_of_contents">
	<li><a href="#introduction">Introduction</a></li>
	<li><a href="#configuration">Configuration</a></li>
</ol>
<div class = "divider1"></div>



<h3 id="introduction">Introduction</h3>
<p>The Metrics Policy is an Operational policy that allows you to collect roll-up data for selected services/operations that the policy is attached to. A Metrics Policy is useful for:</p>
<ul>
	<li><strong>Database Space Conservation</strong>: Roll-up data on a large number of services can take up a significant amount of database space. Designating specific services/operations where roll-up data will be captured reduces the chance of receiving out-of-memory database exception errors.</li>
	<li><strong>Granular View of Service Activity</strong>: You might have a set of services that include specific operations you want to monitor at a more granular level (for example, to track service level or volume of activity).</li>
</ul>
<p>This is how it works:</p>
<ul>
	<li>Roll-up data is controlled in the Network Director or Agent container by the following configuration setting: <strong>Akana Administration Console</strong> &gt; <strong>Configuration</strong> &gt; <strong>com.soa.metrics</strong> configuration category &gt; <strong>metrics.rollup.reporter.requireMetricsPolicy</strong> property.</li>
	<li>By default, the <strong>metrics.rollup.reporter.requireMetricsPolicy property</strong> is set to <strong>False</strong>. This means that roll-up data is collected for all managed services in Policy Manager. Roll-up data can be viewed in the Logs, Real Time Charts, and Historical Charts in the<em> Services &gt; Monitoring</em> section.</li>
	<li>To change the roll-up data collection approach, change the property state to <strong>True</strong>, create a Metrics Policy in the <em>Policy Manager Management Console</em>, and attach the policy to any service or service operation you would like to capture roll-up data for.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h3 id="configuration">Configuration</h3>
<p>Let's take a quick walkthrough of the Metrics Policy configuration process to get you started.</p>

<h5 id="step_01">Step 1: Change Roll-up Data Property</h5>
<ul>
	<li>Launch the Akana Administration Console for your Network Director or Agent container instance.</li>
	<li> Select the <strong>Configuration</strong> tab.</li>
	<li>In Configuration Categories on the left, choose <strong>com.soa.metrics</strong>. The default status of <strong>False</strong> indicates that roll-up data is currently being captured for all managed services.</li>
	<li> Change the state to <strong>True</strong> and save.</li>
</ul>
<p><img src="images/metrics_admin_console.jpg" alt="" /></p>

<h5 id="step_02">Step 2: Add Policy / Use System Policy</h5>
<ul>
	<li>In Policy Manager, to create a Metrics policy instance, go to <strong>Policies</strong> &gt; <strong>Operational Policies</strong> and choose <strong>Add Policy</strong>.</li>
</ul>
<p><strong>Note</strong>: The Metrics Policy does not require any configuration.</p>

<h5 id="step_03">Step 3: Attach Policy</h5>
<p>After you've saved your policy, you can attach it:</p>
<ul>
	<li>To an individual web service to apply it to that service</li>
	<li>To a specific operation that you would like to capture roll-up data for</li></ul>
<p><img src="images/metrics_policy_attachment.jpg" alt="" /></p>

<h5 id="step_04">Step 4: Test Policy and View Monitoring Data</h5>
<p>After you've attached the Metrics Policy to a service or operation, send a request to your service and go to the <em>Services &gt; Monitoring</em> section to view the results for Logs, Real Time Charts, and Historical Charts. For more information on using the monitoring functions, refer to the Policy Manager Online Help, available via the Help button.</p>
<p><a href="#top">Back to top</a></p>



<div class = "divider1"></div>



<h3 id="related_topics">Related Topics</h3>
<div class="relatedlinks">
<ul>
	<li><a href="about_policies_view.htm">About Policies</a></li>
	<li><a href="policy_management.htm">Managing Policies</a></li>
	<li><a href="policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="../../cm/learnmore/basics_glossary.htm">Glossary of Terms for the Developer Portal</a></li>
</ul>
</div>




</div>
</body>
</html>