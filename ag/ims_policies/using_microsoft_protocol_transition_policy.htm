---
layout: page
title: Using the Microsoft Protocol Transition Policy
description: Learn how use the Microsoft Protocol Transition Policy to automatically transition inbound identities into outbound Windows security identities within a Microsoft Windows security environment.
product: ag
category: learn
weight: 05
sub-nav-class: Intermediary for Microsoft
type: page
nav-title: Using the Microsoft Protocol Transition Policy
---
<h2 name="top">Using the Microsoft  Protocol Transition Policy</h2>
  <p>Learn how use the Microsoft Protocol Transition Policy to automatically transition inbound identities into outbound Windows security identities within a Microsoft Windows security environment.</p>
<a href="../policies/policy_management.htm" class="button secondary">Managing Policies</a> 

<a href="../ims_policies/ims_policies.htm" class="button secondary">Intermediary for Microsoft Policies</a>

<p></p>
<div class = "divider1"></div>
   <h3 style="color: gray;">Table of Contents</h3>

   <ol class="table_of_contents">

 <li><a href="#introduction">Introduction</a></li>

  <li><a href="#configuration">Configuration</a></li>
  
    <li><a href="#usecases">Use Cases</a></li>


  </ol>
  <div class = "divider1"></div>
<a name="introduction">
<h3>Introduction</h3></a>

<p>The &quot;Microsoft Protocol Transition Policy&quot; is an Intermediary for Microsoft  operational policy that is installed to the Policy Manager Management Console as part of the  Intermediary for Microsoft product installation.
</p>
<p> With this policy, you can enable and specify details for Microsoft's protocol transition feature. With protocol transition, an API gateway can automatically transition inbound identities into outbound Windows security identities within a Microsoft Windows security environment. By default, a service or service operation without a Protocol Transition policy attached will not support protocol transition.</p>
<p>To install this policy, see <em>Chapter 3: Installing SOA Software Intermediary for Microsoft Policy Manager Policy</em> section of the <em>SOA Software Intermediary for MicrosoftÂ® Install Guide</em> for installation instructions.</p>
<h4>Constrained Delegation</h4>
<p>Constrained delegation (use any  authentication protocol) must be  enabled in Active Directory for the Application  pool account. (If the application pool user is NETWORK SERVICE or LOCAL SYSTEM,  the account is the machine account). </p>
<p><em>Note: The application pool  account  IMS runs under must have &ldquo;Act as part of the operating system&rdquo;  privilege selected. </em></p>
<p><a href="#top">back to top</a></p>
<a name="configuration">
<h3>Configuration</h3></a>



<p>Let's take a quick walkthrough of the Microsoft Protocol Transition Policy  configuration process to get your started.
</p>
<h5>Step 1: Add Policy</h5>

  <p>You can create a Microsoft Protocol Transition Policy instance using <strong>Add Policy</strong> in the <em>Policies &gt; Operational Policies</em> section. The summary screen will look like this:</p>
  <p><img src="images/ms_protocol_transition_summary.JPG" width="609" height="214" /></p>
  <h5>Step 2: Modify Policy</h5>
<p>When you <strong>Modify</strong> the Microsoft Protocol Transition Policy on the <em>Policy Details</em> page the initial policy will look like this:</p>
<p><img src="images/modify_ms_protocol_transition_policy.JPG" width="504" height="509" /></p>
<h5>Step 3: Configure Policy</h5>
<p>Configure the Microsoft Protocol Transition Policy as follows:</p>
<h4>Source  Subject Category</h4>
<ul class="usingOrderedList">
  <li><strong>Consumer</strong> -   This protocol transition policy will only affect identities with consumer  subject categories.</li>
  <li><strong>End-User</strong> -   This protocol transition policy will only affect identities with end-user  subject categories.</li>
  <li><strong>User-Defined</strong> -   This protocol transition policy will only affect identities with the provided  user defined subject categories.<br />
  </li>
</ul>
<h4>Credential  Options &gt; Username/Password</h4>
<ul class="usingOrderedList">
  <li><strong>Authenticated  Credentials </strong>- Determines  how username credentials previously authenticated by the API Gateway are  handled. If <strong>Transition</strong> is selected, then they will be transitioned to Windows security, If  <strong>Login</strong> is selected, then a Windows login will occur to produce a Windows security token.</li>
  <li><strong>Unauthenticated  Credentials</strong> - Determines  how username credentials not previously authenticated by the API Gateway are  handled. If <strong>Transition</strong> is selected, then they will be transitioned to Windows security. If <strong>Login</strong> is selected, then a Windows login will occure to product a Windows security token. If  <strong>Reject</strong> is selected, then the transaciton will fail.   </li>
</ul>
<h5>Step 4: Attach Policy</h5>
<p>After you have saved your policy you can  attach it to an Intermediary for Microsoft virtual Service in Policy Manager or you can attach the policy at the Organization level and the policy will be active for all services defined within the organization. </p>
<p><img src="images/ms_protocol_transition_pol_attach.JPG" width="611" height="177" /></p>
<h5>Step 5: Test Policy</h5>
<p>After you attached the Microsoft Protocol  Transition Policy to a virtual service, send a request to your service  and view the results in your client. You can also go to the Services &gt;  Monitoring section to view the results for Logs (i.e., View Usage Record Details),  Real Time Charts, and Historical Charts. Refer to the Policy Manager Online  Help (i.e., Help button) for more information on the using the monitoring  functions.</p>
<p>If you receive errors, review the log information for  details. In most cases, errors are typically associated with Active Directory setting or IMS Application Pool User  permission. Update the settings and  retry.</p>
<p><a href="#top">back to top</a></p>
<a name="usecases">
<h3>Use Cases</h3></a>
<p>For use case information on this policy refer to the following topic on the <em>Akana Customer Support </em>site:</p>

<p><a href="https://support.soa.com/support/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=683&nav=0,133">How Do I Convert Other Types Of Identities To Outgoing Windows Identities Using The Microsoft Protocol Transition Policy?</a></p>
 <p><a href="#top">back to top</a></p>



