---
layout: page
title: Using the Microsoft Service Identity Policy
description: Learn how to use the  Microsoft Service Identity  Policy to specify the SPN/UPN for a  physical service or virtual service that requires Kerberos authentication.
product: ag
category: learn
weight:	3
sub-nav-class: Intermediary for Microsoft
type: page
nav-title: Using the Microsoft Service Identity Policy
---

<h2 name="top">Using the Microsoft  Service Identity  Policy</h2>
  <p>Learn how to use the  Microsoft Service Identity  Policy to specify the SPN/UPN for a  physical service or virtual service that requires Kerberos authentication.</p>
<a href="../policies/policy_management.htm" class="button secondary">Managing Policies</a>

<a href="../ims_policies/ims_policies.htm" class="button secondary">Intermediary for Microsoft Policies</a>

<p></p>

  <div class = "divider1"></div>
   <h3 style="color: gray;">Table of Contents</h3>

   <ol class="table_of_contents">

 <li><a href="#introduction">Introduction</a></li>

  <li><a href="#configuration">Configuration</a></li>
  
  <li><a href="#usecases">Use Cases</a></li>
  



  </ol>
  <div class = "divider1"></div>
<a name="introduction">
<h3>Introduction</h3></a>

<p>The &quot;Microsoft Service Identity Policy&quot; is an Intermediary for Microsoft  operational policy that is installed to the <em>Policy Manager Management Console</em> as part of the  Intermediary for Microsoft product installation. </p>
<p>With this policy, you can specify the SPN/UPN for a  physical service or virtual service that requires Kerberos authentication. The API  gateway will overwrite the service endpoint identity in the WSDL with the value  from this policy.</p>
<p>To install this policy, see <em>Chapter 3: Installing SOA Software Intermediary for Microsoft Policy Manager Policy</em> section of the <em>SOA Software Intermediary for Microsoft® Install Guide</em> for installation instructions.</p>
<p><a href="#top">back to top</a></p>
<a name="configuration">
<h3>Configuration</h3></a>



<p>Let's take a quick walkthrough of the Microsoft Service Identity  Policy configuration process to get your started.
</p>
<h4>Step 1: Add Policy</h4>

  <p>You can create a Microsoft Service Identity  Policy instance using <strong>Add Policy</strong> in the <em>Policies &gt; Operational Policies</em> section. The summary screen will look like this:</p>
  <p><em><img src="images/ms_identity_pol_summary.JPG" width="508" height="122" /></em></p>
  <h4>Step 2: Modify Policy</h4>
<p>When you <strong>Modify</strong> the Microsoft Service Identity  Policy on the <em>Policy Details</em> page the initial policy will look like this:</p>
<p><img src="images/modify_ms_identity_policy.JPG" width="451" height="452" /></p>
<p><img src="images/modify_ms_identity_policy2.JPG" width="449" height="445" /></p>
<h4>Step 3: Configure Policy</h4>
<p>Configure the Microsoft Service Identity  Policy as follows:</p>
<h5>User Principal Name</h5>
<p>User  principal name (UPN) let's you specify the user that this service is running  under. In a Windows security use case, the consumer must communicate with the  service using this identity as the service identity.</p>
<ul class="usingOrderedList">
  <li><strong>Username</strong> - Enter  the username that this service is running under. This is typically an Active  Directory user or a local Windows Server account.</li>
  <li><strong>Domain</strong> - Enter  the domain that this user is a part of. If the user is a local Windows Server  account, enter the hostname of that Windows Server machine.
 
</ul>

<h5>Service  Principal Name</h5>

<p>Service  principal name let's you specify the Service principal name (SPN) that this  service is running under. In a Windows security use case, the consumer must  communicate with the service using this service principal name.</p>
<ul class="usingOrderedList">
  <li><strong>Service principal Name</strong> - Enter  the SPN that this service is running under. This SPN be registered and mapped  to the Windows identity that the service is running under.</li>
</ul>
<h4>Step 4: Attach Policy</h4>
<p>After you have saved your policy you can  attach it to an Intermediary for Microsoft virtual Service in Policy Manager or you can attach the policy at the Organization level and the policy will be active for all services defined within the organization. </p>
<p><img src="images/ms_service_identity_pol_attach.JPG" width="582" height="169" /></p>
<h4>Step 5: Test Policy</h4>
<p>After you attached the Microsoft Service Identity Policy to a service, send a request to  your service and view the results in your client. You can also go to the  Services &gt; Monitoring section to view the results for Logs (i.e., View Usage  Record Details), Real Time Charts, and Historical Charts. Refer to the Policy  Manager Online Help (i.e., Help button) for more information on the using the  monitoring functions.</p>
<p>If you receive errors, review the log information for  details. In most cases, errors are typically associated with specifying the  wrong value for the Microsoft Service Identity Policy. Update the policy and  retry.</p>
<p><a href="#top">back to top</a></p>

<a name="usecases">
<h3>Use Cases</h3></a>


<p>For use case information on this policy refer to the following topic on the <em>Akana Customer Support </em>site:</p>

 <p><a href="https://support.soa.com/support/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=684&nav=0,133">How Do I Configure a Service’s SPN/UPN Identity for Windows Security Using Microsoft Service Identity Policy?</a></p>

 <p><a href="#top">back to top</a></p>

