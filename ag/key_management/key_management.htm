---
layout: page
title: Managing Keys with Policy Manager 7.x
description: Overview of key management options for service, organization, container, and user identity categories.
product: ag
category: learn
weight:	6
sub-nav-class: Security
type: page
nav-title: Managing Keys

---

<h2 name="top">Managing Keys</h2>

<p>Overview of key management options for service, organization, container, and user identity categories. </p>



<a href="identity_categories.htm" class="button secondary"> Identity Categories</a>

<a href="using_external_keystore.htm" class="button secondary">Using External Keystore</a>

<p></p>

<div class = "divider1"></div>
<h3 style="color: gray;">Table of Contents</h3>

<ol class="table_of_contents">

<li><a href="#overview">Key Management Overview</a></li>

<li><a href="#functions">Key Management Functions</a></li>

<li><a href="#genpkikeys">Generate PKI Keys</a></li>

<li><a href="#genx509cert">Generate X.509 Certificate</a></li>

<li><a href="#genpkix509">Generate PKI Keys and X.509 Certificate</a></li>

<li><a href="#gencertsignreq">Generate Certificate Signing Request (CSR)</a></li>


<li><a href="#importx509cert">Import X.509 Certificate</a></li>

<li><a href="#importpkix509">Import PKI Keys and X.509 Certificate</a></li>

<li><a href="#exportx509">Export X.509 Certificate</a></li>


<li><a href="#exportkeyx509">Export Private Key and X.509 Certificate</a></li>

<li><a href="#deletepkix509">Delete PKI Keys and X.509 Certificate</a></li>

<li><a href="#assignpkix509">Assign PKI Keys and X.509 Certificate from User Keystore</a></li>


</ol>
  <div class = "divider1"></div>
 
  
<a name="overview">
<h2>Key Management Overview</h2>
</a>
  
<p>Policy Manager provides key management that uses an &quot;access key&quot; encryption/decryption  service to monitor access to Policy Manager  functionality and managed web  services. The &quot;access key&quot; guarantees message integrity by signing the message with a private key and verifying the message with a public key.</p>
<p>This enables you to publish the public key to an administrator or user, while retaining  the private key. This means that any data that anyone else encrypts using your public key can only be decrypted by you.</p>
<p>The Policy Manager  <em>Manage PKI Keys Wizard</em> is used to generate  and manage (import/export) PKI Keys, Certificates, and Certificate Signing Requests for Service, Organization, Container, and  User identities. </p>

<h5>Supported Key / Certificate Types:</h5>
<ul class="usingOrderedList">
  <li><strong>PKI Keys</strong> - Access keys that guarantee message  integrity by signing the message with a private key and verifying the message  with a public key. </li>
  <li><strong>X.509 Certificates</strong> - An authentication mechanism that  provides visibility to public information and verifies private information while  keeping it secure. Credential Information is embedded in the body of a SOAP  Message, or can be obtained from the HTTPS Context.</li>
  <li><strong>Certificate Signing Request (CSR)</strong> - A file that includes encoded  information generated by a web server. It is sent from an applicant to the Certificate Authority to request a digital certificate. The CSR contains  information identifying the applicant and the public key chosen by the  applicant. Before creating a CSR, the applicant first generates a key pair  keeping the private key secret. The corresponding private key is not included in  the CSR, but is used to digitally sign the entire request.</li>
</ul>


<h5>Identity Categories:</h5>
<p> The  <a href="identity_categories.htm" > Identity Categories</a> section  provides a functional overview of each identity category and available key management options for the default Policy Manager keystore, or External Keystore feature. </p>

<h5>External Keystore Feature</h5>
<p>The  <em>SOA Software External Keystore Feature</em> enables a Container to use an external key store for managing  all the PKI keys and certificates it needs. Without installing this feature the  default Policy Manager key store will be used.</p>
<p><em><strong>Note:</strong> Installation of this feature MUST occur before installing the Policy Manager features (SOA Software Policy Manager Console and SOA Software Policy Manager Services). If you have already installed Policy Manager and would like to use the External Keystore Feature, you must first install the SOA Software External Keystore Feature, and then  reinstall both of the Policy Manager features. </em></p>
<p>Refer to the External Keystore Feature topic for instructions on installing and configuring the feature.</p>

<p><a href="#top">back to top</a>
</p>


<a name="functions">
<h2>Key Management Functions</h2>
</a>

<p>The <em>Manage PKI Keys Wizard</em> supports the   key management options listed below. Supported options vary based on the identity category and whether you are using the External Keystore feature. Refer to the <a href="identity_categories.htm" > Identity Categories</a> topic  for available key management options for the  default Policy Manager keystore, or External Keystore feature. </p>
<p><em>Note: Behaviors for each option are presented based using the &quot;Default&quot;  Policy Manager keystore, and &quot;External Keystore&quot; (with SOA Software External Keystore Feature installed). </em></p>

<h3>Generate Options</h3>



<a name="genpkikeys">
<h4>Generate PKI Keys</h4></a>


<p>The <em>Generate PKI Keys</em> screen uses the SOA Container to generate public and private keys. A  &quot;key strength&quot; must be specified. The default key length is 1024 bits.  The level of cryptographic strength of a key depends on its use (e.g.,  replacement schedule, security levels, etc.). </p>
<ul class="usingOrderedList">
  <li><strong>Default - </strong>Generates public and private PKI keys.  This option does not create an X.509 certificate. </li>
  <li><strong>External Keystore</strong> - This option is  disabled for all identities if the <em>SOA Software External Keystore Feature</em> is installed as the PKI Keys are stored in the external keystore.</li>
</ul>

<h5>Configuration:</h5>
<ol class="usingOrderedList">
  <li>Select <strong>Generate PKI Keys</strong>. In the &quot;Key  Length&quot; section, select the radio button of the key length based on your  requirements. After completing your entries, click <strong>Finish</strong>.   Certificate details are displayed on the <em>Summary</em> screen.</li>
</ol>
<p><a href="#top">back to top</a>
</p>

<a name="genx509cert">
<h4>Generate X.509 Certificate</h4></a>


<p>The  <em>Generate X.509 Certificate</em> screen allows you to generate an X.509  certificate. An X.509 certificate is an authentication mechanism that  provides visibility to public information and verifies private  information while keeping it secure. Credential information is embedded  in the body of a SOAP message, or can be obtained from the HTTPS  Context.</p>
<p>The &quot;Certificate Details&quot; section includes the  certificate elements you will configure for the X.509 certificate  including Subject Distinguished Name (DN) elements, and Validity Period  that represents expiration Date and Time of the certificate.</p>
<ul class="usingOrderedList">
  <li><strong>Default - </strong>Generates X.509 certificate and adds it to the existing PKI keys.</li>
  <li><strong>External Keystore</strong> - Generates   X.509 certificate and adds it to the external keystore alias that already includes PKI keys.</li>
</ul>
<h5>Configuration:</h5>
<ol class="usingOrderedList">
  <li>Select <strong>Generate X.509 Certificate</strong>. Enter  the &quot;Certificate Details&quot; based on your requirements. After completing  your entries, click <strong>Finish</strong>. Certificate details are displayed on the  <em>Summary</em> screen.</li>
</ol>

<p><a href="#top">back to top</a>
</p>


<a name="genpkix509">
<h4>Generate PKI Keys and X.509 Certificate</h4></a>


<p>The  <em>Generate PKI Keys and X.509 Certificate</em> screen allows you to generate  PKI Keys and an X.509 certificate. PKI Keys (i.e., access keys)  guarantee message integrity by signing the message with a private key  and verifying the message with a public key. An X.509 certificate is an  authentication mechanism that provides visibility to public information  and verifies private information while keeping it secure. Credential  Information is embedded in the body of a SOAP Message, or can be  obtained from the HTTPS Context.</p>
<p>A &quot;key strength&quot; must be  specified. The default key length is 1024 bits. The level of  cryptographic strength of a key depends on its use (e.g., replacement  schedule, security levels, etc.).  In the &quot;Key Length&quot; section, select  the radio button of the key length based on your requirements.</p>
<p>The  &quot;Certificate Details&quot; section includes the certificate elements you  will configure for the X.509 certificate including Subject Distinguished  Name (DN) elements, and Validity Period that represents the expiration  Date and Time of the certificate.</p>
<ul class="usingOrderedList">
  <li><strong>Default - </strong>Generates PKI keys and X.509 certificate. </li>
  <li><strong>External Keystore</strong> - Assigns PKI keys and X.509 certificate to the external keystore alias of the current identity. </li> 
</ul>
  
  
  <h5>Configuration (Default):</h5>
<ol class="usingOrderedList">
    <li>Select <strong>Generate PKI Keys and X.509 Certificate</strong>. Select the &quot;Key Length&quot; and  enter the &quot;Certificate Details&quot; based on your requirements. After  completing your entries, click <strong>Finish</strong>.  Certificate details are  displayed on the <em>Summary</em> screen.</li>
  </ol>
  
  <h5>Configuration (External Keystore)</h5>
  <ol class="usingOrderedList">
    <li>If you installed the <em>SOA Software External Keystore Feature</em>, the <em>Generate PKI Keys &amp; X.509 Certificate</em> screen will include a <strong>User Keystore Alias/Password </strong>option that allows you to define an alias (i.e., identity) to assign to the PKI Keys and X.509 Certificate being generated. These keys will be stored on your external keystore.<br />
      <br />
    <img src="images/assign_keys_external_option.jpg" width="579" height="401" /><br />
    <br />
    </li>
    <li>You can then assign these keys to an identity category by selecting the <strong>Assignment Options &gt; Assign PKI Keys and X.509 Certificate from User Keystore</strong> option on the <em>Manage PKI Keys Wizard</em> home page. You will be presented with the <em>Assign Keys from External Keystore</em> screen. <br />
      <br />
    Two options are available for selecting a keystore. <br />
    <br />
    <strong>Browse Alias</strong> -  This option allows you to select an identity from the Policy Manager keystore from a drop-down menu. <br />
    <br />
    <strong>Enter Alias</strong> -  If your containers are using different externals keystores the alias for the keys being used may not exist in the Policy Manager keystore. Use the &quot;Enter Alias&quot; option to reference the alias name if this is the case.    <br />
    <br />
    </li>
    <li>After specifying an alias, you must specify the password to complete the configuration.<br />
      <br />
    <img src="images/assign_keys_external.jpg" width="583" height="390" /></li>
  </ol>
  
  
  <p><a href="#top">back to top</a>
</p>


<a name="gencertsignreq">
<h4>Generate Certificate Signing Request (CSR)</h4></a>


<p>The  <em>Generate CA Certificate Signing Request</em> screen is used to generate a  &quot;Certificate Signing Request&quot; for the current SOA Container. The request  can be sent to a third party Certificate Authority to request an X.509  Certificate. </p>
<p>A &quot;Certificate Signing Request (CSR)&quot; is a file that  includes encoded information generated by a web server. It is sent from  an applicant to Certificate Authority to request a digital certificate.  The CSR contains information identifying the applicant and the public  key chosen by the applicant. Before creating a CSR, the applicant first  generates a key pair, keeping the private key secret. The corresponding  private key is not included in the CSR, but is used to digitally sign  the entire request.</p>
<p>A CSR file typically has a .CSR extension but  can have other extensions based on the source application that generated  the file. The SOA Container supports the PEM (which is a BASE64 encoded  PKCS10) for Certificate Signing Requests.</p>
<ul class="usingOrderedList">
  <li><strong>Default - </strong>Used if user of the container already has a PKI Key pair and  wants to generate a Certificate Signing Request. The request can be sent to a  third party Certificate Authority to request an X.509 Certificate.</li>
  <li><strong>External Keystore</strong> - No change.</li>
</ul>
<h5>Configuration:</h5>
<ol class="usingOrderedList">
  <li>Select <strong>Generate Certificate Signing Request</strong>. Enter the &quot;Certificate  Signing Request Details&quot; based on your requirements. After completing  your entries, click <strong>Finish</strong>. Certificate details are displayed on the  <em>Summary</em> screen.</li>
</ol>
<p><a href="#top">back to top</a>
</p>

<a name="xxx">
<h3>Import Options</h3>
</a>

<a name="importx509cert">
<h4>Import X.509 Certificate</h4></a>

<p>The  <em>Import X.509 Certificate</em> screen is used to import an X.509  Certificate that has been issued by a third party Certificate Authority  (CA). The import function supports .CER and .DER file formats.</p>
<ul class="usingOrderedList">
  <li><strong>Default - </strong>Used to import an X.509 Certificate  that has been issued by a third party Certificate Authority (CA). As a  prerequisite to using this option, a PKI Key pair must already by generated. The  import function supports the certificate file format (.CER). </li>
  <li><strong>External Keystore</strong> - Imports  X.509 Certificate and adds it to the alias that already includes PKI key in the external keystore.</li>
</ul>
<h5>Configuration:</h5>
<ol class="usingOrderedList">
  <li>Select <strong>Import X.509 Certificate</strong>. To  specify the file location of the X.509 Certificate, click <strong>Browse</strong>. The  <em>Choose File</em> dialog displays. Navigate to the directory location where  the certificate is stored, select the certificate file and click <strong>Open</strong>.  The &quot;Certificate Path&quot; is populated with the directory location of the  X.509 Certificate.</li>
  <li>To import the X.509 Certificate, click <strong>Finish</strong>.</li>
</ol>

<p><a href="#top">back to top</a>
</p>


<a name="importpkix509">
<h4>Import PKI Keys and X.509 Certificate</h4></a>

<p>The  <em>Import Private Key and X.509 Certificate from Keystore</em> screen is used  to import keys and a certificate that has been issued by a third party  Certificate Authority. The import function supports .CER and *.DER file  formats.</p>
<p>The &quot;Keystore Details&quot; section is used to configure the elements required to perform the import.</p>
<ul class="usingOrderedList">
  <li><strong>Default - </strong>Used to  import public and private keys and a certificate that has been issued by a third party Certificate  Authority. Import requires that you specify a keystore path or certificate filename. Supported keystore types include <em>Java</em> (imports public keys from a certificate only) and <em>PKCS12</em> (imports keys from a PKCS12 only. The import function supports the certificate file format (.CER). </li>
  <li><strong>External Keystore</strong> - Imports  PKI Keys and X.509 Certificate and assigns them to  external keystore along with the associated alias. </li>
</ul>
<p><strong><em>FIPS Support for  importing external private keys:</em></strong> FIPS 140-2 level II allows import of external private keys. You cannot import external private keys into an HSM that is FIPS-140-2 level III compliant.</p>
<h5>Configuration:</h5>
<ol class="usingOrderedList">
  <li>Select <strong>Import Private Key and X.509 Certificate</strong>. Select the &quot;Keystore Type&quot; you would like to import (Java or PKCS12).</li>
  <li>To  specify the file location of the X.509 Certificate, click <strong>Browse</strong>. The  <em>Choose File</em> dialog displays. Navigate to the directory location where  the certificate is stored, select the certificate file and click <strong>Open</strong>.  The &quot;Keystore Path&quot; is populated with the directory location of the  X.509 Certificate.</li>
  <li>Enter the &quot;Keystore Password&quot; for the certificate and confirm it.</li>
  <li>Click  <strong>Load Aliases</strong>. The &quot;Key Alias&quot; drop-down list box is populated with a  list of Key Alias entries that are defined in the specified keystore  file. Select the Key Alias you would like to import from the drop-down  list box. Enter the Key Password and confirm it.</li>
  <li>To import the  Private Key and X.509 Certificate, click <strong>Finish</strong>. The certificate is  imported into the Policy Manager data repository.</li>
</ol>
<p><a href="#top">back to top</a>
</p>

<h3>Export Options</h3>



<a name="exportx509">
<h4>Export X.509 Certificate</h4></a>

<ul class="usingOrderedList">
  <li><strong>Default - </strong>Exports an X.5.09 certificate to certificate file format (.CER). </li>
  <li><strong>External Keystore</strong> - No change.</li>
</ul>
<h5>Configuration:</h5>
<ol class="usingOrderedList">
  <li>Select <strong>Export X.509 Certificate</strong>,  a save option (i.e., <strong>Open with</strong> or <strong>Save File</strong>), and click <strong>OK</strong> to complete the export.</li>
</ol>

<p><a href="#top">back to top</a>
</p>


<a name="exportkeyx509">
<h4>Export Private Key and X.509 Certificate</h4></a>



<ul class="usingOrderedList">
  <li><strong>Default - </strong>Exports an Private Key and X.5.09 certificate to certificate file format (.CER). </li>
  <li><strong>External Keystore</strong> - This option is  disabled for all identities if the <em>SOA Software External Keystore Feature</em> is installed as the export of private (or secret) keys out of an HSM is restricted. </li>
</ul>
<h5>Configuration:</h5>
<ol class="usingOrderedList">
  <li>Select <strong>Export Private Key and X.509 Certificate</strong>,  a save option (i.e., <strong>Open with</strong> or <strong>Save File</strong>), and click <strong>OK</strong> to complete the export.</li>
</ol>
<p><a href="#top">back to top</a>
</p>

<h3>Delete Options</h3>



<a name="deletepkix509">
<h4>Delete PKI Keys & X.509 Certificate</h4></a>


<ul class="usingOrderedList">
  <li><strong>Default - </strong>Deletes key of the current identity type from the Policy Manager default keystore.    </li>
  <li><strong>External Keystore</strong> - Deletes key of the current identity type from the external keystore. Note that you cannot delete a key if it assigned to one or more identities. </li>
</ul>
<h5>Configuration:</h5>
<ol class="usingOrderedList">
  <li>Select <strong>Delete PKI Keys &amp; X.509 Certificate</strong> and  <strong>OK</strong> after the confirmation message.</li>
</ol>
<p><a href="#top">back to top</a>
</p>
<h3>Assignment Options</h3>

<a name="assignpkix509">
<h4>Assign PKI Keys and X.509 Certificate from User Keystore</h4></a>


<p><em>This option displays if the SOA Software External Keystore feature is installed.</em></p>
<ul class="usingOrderedList">
  <li>Allows you to assign keys that are already added the HSM External Keystore to the current identity. </li>
  <li>Keys available in the  HSM External Keystore represent those added by Policy Manager or by some other external process.</li>
  <li>Key assignment is performed by selecting the Alias name and password associated with the key you would like to assign.</li>
</ul>
<p><a href="#top">back to top</a> </p>


<div class = "divider1"></div>