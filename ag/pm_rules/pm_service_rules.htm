<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Policies</title>
<link href="../style/reset.css" rel="stylesheet" type="text/css" />
<link href="../style/base.css" rel="stylesheet" type="text/css" />
<link href="../document.css" rel="stylesheet" type="text/css" />

</head>
<body>
<div class="documentation supportContent">
<!-----
layout: page
title: Policy Manager Service Rules
description: Learn about how to add and manage Allow and Deny rules to your services, to add security.
product: ag
category: learn
weight: 06
sub-nav-class: Service Rules
type: page
nav-title: Policy Manager Service Rules
----->
<h2 id="top">Policy Manager Service Rules</h2>
<p>Learn about how to add and manage Allow and Deny rules to your services, to add security.</p>

<div class = "divider1"></div>

<h3 style="color: gray;">Table of Contents</h3>



<ol class="table_of_contents">
  <li><a href="#rules_overview">Rules: Overview</a></li>
  <li><a href="#rules_types">Types of rules</a></li>
  <li><a href="#rules_managing">Managing rules</a></li>
  <li><a href="#rules_field_descriptions">Service Rules: Field Descriptions</a></li>
  <li><a href="#web_service_security_practices">Web services: Security practices</a></li>
</ol>



<div class = "divider1"></div>



<a name="rules_overview"></a><h3>Rules: Overview</h3>
<p>Policy Manager provides functionality that allows you to configure rules for securing XML physical and virtual web services, to help protect the services. This functionality is useful for two important Web services: Security practices:</p>
<ul>
  <li>implementation of XML filtering</li>
  <li>Protection against XML denial of service (DoS) attacks.</li>
</ul>
<p>For more information about security practices for web services, see <a href="#web_service_security_practices">Web services: Security practices</a>.</p>
<p><strong>Note</strong>: Policy Manager doesn't support service rules for the JMS listener protocol.</p>
<p><a href="#top">Back to top</a></p>



<a name="rules_types"></a><h3>Types of rules</h3>
<p>There are two types of rules that you can use to add security to a service:</p>
<ul>
  <li><strong>Allow</strong> rules allow you to configure:
    <ul>
      <li>IP address filtering for allowing access to the current service.</li>
      <li>Denial of service parameters such as maximum message size allowed.</li>
    </ul>
  </li>
  <li><strong>Deny</strong> rules allow you to configure IP address filtering configuration parameters for denying access to the current service.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<a name="rules_managing"></a><h3>Managing rules</h3>
<p>In Policy Manager, rules are defined in the context of a specific service within the organization.</p>
<p>You can:</p>
<ul>
  <li><a href="#proc_rules_view">View existing rules</a></li>
  <li><a href="#proc_rules_add_allow">Add an Allow rule</a></li>
  <li><a href="#proc_rules_add_deny">Add a Deny rule</a></li>
  <li><a href="#proc_rules_modify">Modify an existing rule</a></li>
  <li><a href="#proc_rules_delete">Delete a rule</a></li>
</ul>


<a name="proc_rules_view"></a><h5>To view existing rules</h5>
<ol>
  <li>Select <strong>Workbench</strong> &gt; <strong>Browse</strong>. In the left pane, find the organization, click to expand it, and then click <strong>Services</strong>. The summary page for the service is displayed.</li>
  <li>Click the <strong>Rules</strong> tab, as shown below.
  <p><img src="images/rules_overview.jpg" alt="Rules page for a service" /></p>
  </li>
</ol>
<p>If there are any rules already defined for the service, they are displayed.</p>


<a name="proc_rules_add_allow"></a><h5>To add an Allow rule</h5>
<ol>
  <li>In Policy Manager, go to the <strong>Rules</strong> page for the service (see <a href="#proc_rules_view">To view existing rules</a> above).</li>
  <li>Click <strong>Add Allow Rule</strong>. The <strong>Add Allow Rule</strong> page is displayed, as shown below.
  <p><img src="images/rules_allow_add.jpg" alt="Adding an Allow rule" /></p>
  </li>
  <li>Choose configuration options. For information on the choices available, refer to <a href="#rules_field_descriptions">Service Rules: Field Descriptions</a>.</li>
  <li>Click <strong>Apply</strong>.</li>
</ol>
<a name="proc_rules_add_deny"></a><h5>To add a Deny rule</h5>
<ol>
  <li>In Policy Manager, go to the <strong>Rules</strong> page for the service (see <a href="#proc_rules_view">To view existing rules</a> above).</li>
  <li>Click <strong>Add Deny Rule</strong>. The <strong>Add Deny Rule</strong> page is displayed, as shown below.
  <p><img src="images/rules_allow_deny.jpg" alt="Adding a Deny rule" /></p>
  </li>
  <li>Choose configuration options. For information on the choices available, refer to <a href="#rules_field_descriptions">Service Rules: Field Descriptions</a>.</li>
  <li>Click <strong>Apply</strong>.</li>
</ol>
<a name="proc_rules_modify"></a><h5>To modify a rule</h5>
<ol>
  <li>In Policy Manager, go to the <strong>Rules</strong> page for the service (see <a href="#proc_rules_view">To view existing rules</a> above).</li>
  <li>On the list, find the rule you want to modify and double-click to open the <strong>Modify</strong> page.</li>
  <li>Update the configuration options as needed. For information on the choices available, refer to <a href="#rules_field_descriptions">Service Rules: Field Descriptions</a>.</li>
  <li>Click <strong>Apply</strong>.</li>
</ol>
<a name="proc_rules_delete"></a><h5>To delete a rule</h5>
<ol>
  <li>In Policy Manager, go to the <strong>Rules</strong> page for the service (see <a href="#proc_rules_view">To view existing rules</a> above).</li>
  <li>On the list, select the rule you want to delete and click <strong>Delete Rule</strong>.</li>
  <li>At the confirmation prompt, click <strong>OK</strong>. The rule is deleted.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="rules_field_descriptions"></a><h3>Service Rules: Field Descriptions</h3>
<p>The tables below provide information about the fields available for configuring <strong>Allow</strong> or <strong>Deny</strong> rules.</p>
<p><strong>Note</strong>: Policy Manager doesn't support service rules for the JMS listener protocol.</p>
<p>There are two sets of options for <strong>Allow</strong> rules and one set for <strong>Deny</strong> rules:</p>
<ul>
  <li><a href="#rules_field_descriptions_allow_01">Allow Rules: IP Address Filtering</a></li>
  <li><a href="#rules_field_descriptions_allow_02">Allow Rules: Denial of Service</a></li>
  <li><a href="#rules_field_descriptions_deny">Deny Rules: IP Address Filtering</a></li>
</ul>


<a name="rules_field_descriptions_allow_01"></a><h5>Allow Rules: IP Address Filtering</h5>
<p>The <strong>IP Address Filtering</strong> section allows you to configure the XML-based filtering using a variety of IP address combinations. XML-based filtering rules are designed to reduce the "aperture of entry" into the corporate network.</p>
<p>For <strong>Allow</strong> rules, the messages, transaction rate, and connection duration (Blacklist Time) are monitored through the specified IP Address filter. For <strong>Deny</strong> Rules, access is denied to all service requests made through the specified IP Address filter. This functionality addresses the <a href="#webservsec_filtering">Implement XML Filtering</a> XML Web Service Security Practice.</p>
<p>An IP address consists of two parts:</p>
<ol>
  <li>The first part of the address is called the <strong>network number</strong> and identifies a network on the internet.</li>
  <li>The remainder of the address identifies an individual host on the network.</li>
  </ol>
<p>An address mask determines which portion of an IP address identifies the network and which portion identifies the host. A subnet mask is a modified address mask that is used to partition a network into two subnets.</p>
<p>The IP Address Filtering options for <strong>Allow</strong> rules are shown below.</p>

<table cellspacing="0px" class="doctable" style="width: 98%;">
  <thead>
    <tr>
      <th width="20%">Name</th>
      <th width="80%">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr class="t2row">
    <td>Allowed IP Address Range</td>
   <td>Allows you to perform IP filtering for an IP address range. Option is selected by clicking the "Allowed IP Address Range" radio button. Configuration is performed by entering IP address information into a "Start IP Address" and "End IP Address" text box.</td>
  </tr>
  <tr class="t1row">
    <td>Allow Subnet</td>
    <td>Allows you to perform IP filtering using a subnet mask. Option is selected by clicking the "Allow Subnet" radio button. Configuration is performed by entering IP address information into a "IP Address" and "Subnet Mask" text box.</td>
  </tr>
  <tr class="t2row">
    <td>Specific IP Address</td>
    <td>Allows you to perform IP filtering for a single IP address. To choose this option, click <strong>Specific IP Address</strong>, then enter the IP address.</td>
  </tr>
  <tr class="t1row">
    <td>Allow All</td>
    <td>A radio button that allows you to configure the <strong>Allow</strong> rule to disable IP filtering.</td>
  </tr>
</tbody>
</table>

<a name="rules_field_descriptions_allow_02"></a><h5>Allow Rules: Denial of Service</h5>
<p>The <strong>Denial of Service</strong> section provides protections against XML Denial of Service attacks and allow you to implement reasonable constraints for incoming messages based on the XML filtering rules specified in the <strong>IP Address Filtering</strong> section. Configurable options include Message Size, Transaction Rate Per Address, and Blacklist Time which represents the connection duration. This option is configurable for "Add Allow Rule" configuration only. This functionality addresses the <a href="#webservsec_dos">Protect Against XML Denial of Service Attacks</a> XML Web Service Security Practice.</p>
<table cellspacing="0px" class="doctable" style="width: 98%;">
  <thead>
    <tr>
      <th width="20%">Name</th>
      <th width="80%">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr class="t2row">
    <td>Message Size</td>
    <td>Allows you to specify an allowable message size in Bytes (B), Kilobytes (KB), or Megabytes (MB). Message Size options are selectable from a drop-down list box. The message size range specified is based on your specific business requirements and Policy Manager production site configuration. A "No Limit" option is provided but is not recommended.</td>
  </tr>
  <tr class="t1row">
    <td>Transaction Rate</td>
    <td>Allows you to specify the maximum allowable transaction rate in Seconds (sec), Minutes (min), and Hours (hour). Transaction rate options are selectable from a drop-down list box. The maximum transaction rate specified is based on your specific business requirements and Policy Manager production site configuration. A "No Limit" option is provided but is not recommended.</td>
  </tr>
  <tr class="t2row">
    <td>Blacklist Time</td>
    <td>Allows you to specify how long a rule will be blacklisted and undesirable traffic associated with the IP Address Filter will be blocked. You can specify the number of Seconds (sec), Minutes (min), or Hours (hour) that traffic is denied. To specify blacklist time, click <strong>Deny Access For</strong>, select the unit of measure (sec, min, hour), and then enter the numeric time period. If you don't want to blacklist violations, click <strong>Do not blacklist violators</strong>. To ensure optimum security, it's best to use the blacklisting capability.</td>
  </tr>
</tbody>
</table>

<a name="rules_field_descriptions_deny"></a><h5>Deny Rules: IP Address Filtering</h5>
<p>The IP Address Filtering options for <strong>Deny</strong> rules are shown below.</p>

<table cellspacing="0px" class="doctable" style="width: 98%;">
  <thead>
    <tr>
      <th width="20%">Name</th>
      <th width="80%">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr class="t2row">
    <td>Denied IP Address Range</td>
    <td>Allows you to perform IP filtering for an IP address range. Option is selected by clicking the "Denied IP Address Range" radio button. Configuration is performed by entering IP address information into a "Start IP Address" and "End IP Address" text box.</td>
  </tr>
  <tr class="t1row">
    <td>Deny Subnet</td>
    <td>Allows you to perform IP filtering using a subnet mask. Option is selected by clicking the "Allow Subnet" radio button. Configuration is performed by entering IP address information into a "IP Address" and "Subnet Mask" text box.</td>
  </tr>
  <tr class="t2row">
    <td>Specific IP Address</td>
    <td>Allows you to perform IP filtering for a single IP address. Option is selected by clicking the "Specific IP Address" radio button. Configuration is performed by entering an IP address into the "IP Address" text box.</td>
  </tr>
  <tr class="t1row">
    <td>Deny All</td>
    <td>Allows you to configure the Deny rule to filter all IP addresses. If you choose Deny All, the full range of IP addresses, 0.0.0.0 to 255.255.255.255, is applied as the default.</td>
  </tr>
</tbody>
</table>
<p><a href="#top">Back to top</a></p>



<a name="web_service_security_practices"></a><h3>Web services: Security practices</h3>
<p>Effectively deploying a secure web service requires technologies that can parse, filter, and transform XML and SOAP packets, and can apply security policies at the XML document level. These requirements have been defined at the industry level as a set of XML Web services: Security practices.</p>
<p>The set of Web services: Security practices is designed to enhance existing transport-layer security systems with XML Web Services Security. They address important security activities such as:</p>
<ul>
  <li>Securing the transport layer</li>
  <li>Implementing XML filtering</li>
  <li>Masking internal resources</li>
  <li>Protecting against XML Denial of Service attacks</li>
  <li>Validating, transforming, and signing all messages</li>
  <li>Encrypting message fields</li>
  <li>Implementing secure auditing</li>
</ul>
<p>The key Web services: Security practices are summarized in the table below.</p>
<table cellspacing="0px" class="doctable" style="width: 98%;">
  <thead>
    <tr>
      <th width="20%">Category</th>
      <th width="80%">Recommendation</th>
    </tr>
  </thead>
  <tbody>
  <tr class="t2row">
    <td><a name="webservsec_sec_tl"></a>Secure Transport Layer</td>
    <td>Recommends using transport layer security to ensure confidentiality of information during transport. This security practice also recommends the use of server certificates and client certificates during authentication.</td>
  </tr>
  <tr class="t2row">
    <td><a name="webservsec_filtering"></a>Implement XML Filtering</td>
    <td>Recommends applying content-level filtering policies to XML documents after they are parsed and processed. This security practice ensures XML documents cannot be read or processed at wire speed.</td>
  </tr>
  <tr class="t2row">
    <td><a name="webservsec_mask"></a>Mask Internal Resources</td>
    <td>Recommends use of Network Address Translation (NAT) to obscure internal IP addresses.</td>
  </tr>
  <tr class="t2row">
    <td><a name="webservsec_dos"></a>Protect Against XML Denial of Service Attacks</td>
    <td >Recommends applying reasonable constraints to incoming messages including ability to configure message size, transaction rate, and connection duration.</td>
  </tr>
  <tr class="t2row">
    <td><a name="webservsec_validate"></a>Validate All Messages</td>
    <td>Recommends using XML Schema Validation to ensure that incoming and outgoing messages are valid.</td>
  </tr>
  <tr class="t2row">
    <td><a name="webservsec_xform"></a>Transform All Messages</td>
    <td>Recommends using XSLT functionality to transform all XML messages to make internal schemas and object layouts difficult to understand to outside parties.</td>
  </tr>
  <tr class="t2row">
    <td><a name="webservsec_sign"></a>Sign All Messages</td>
    <td>Recommends applying signatures to all outgoing documents and providing the recipient with an option of performing signature verification for authentication.</td>
  </tr>
  <tr class="t2row">
    <td><a name="webservsec_timestamp"></a>Time-stamp All Messages</td>
    <td>Recommends using the Network Time Protocol (NTP) or XML Digital Signatures to time-stamp all incoming and outgoing messages.</td>
  </tr>
  <tr class="t2row">
    <td><a name="webservsec_encrypt"></a>Encrypt Message Fields</td>
    <td>Recommends the encryption of individual XML documents and data fields within documents with different encryption keys. This security practice ensures that a decrypted message exposed in XML plain text format is not vulnerable to a security attack.</td>
  </tr>
  <tr class="t2row">
    <td><a name="webservsec_sec_aud"></a>Implement Secure Auditing</td>
    <td>Recommends using a combination of XML Digital Signatures and time-stamping to security transaction logs.</td>
    </tr>
  </tbody>
</table>
<p><a href="#top">Back to top</a></p>



</div>
</body>
</html>