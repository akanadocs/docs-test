---
layout: page
title: Using the Microsoft Protocol Transition Policy
description: Learn how use the Microsoft Protocol Transition Policy to automatically transition inbound identities into outbound Windows security identities within a Microsoft Windows security environment.
product: ag
category: learn
weight: 05
sub-nav-class: Intermediary for Microsoft
type: page
nav-title: Microsoft Protocol Transition Policy
---
<h1 id="top">Using the Microsoft Protocol Transition Policy</h1>
<p>Learn how use the Microsoft Protocol Transition Policy to automatically transition inbound identities into outbound Windows security identities within a Microsoft Windows security environment.</p>
<hr class="divide_hr" />



<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#introduction">Introduction</a></li>
	<li><a href="#constrained_delegation">Constrained Delegation</a></li>
	<li><a href="#configuration">Configuration</a></li>
</ol>
<hr class="divide_hr" />



<h2 id="introduction">Introduction</h2>
<p>The <strong>Microsoft Protocol Transition Policy</strong> is an Intermediary for Microsoft operational policy that is installed to the Policy Manager Management Console as part of the Intermediary for Microsoft product installation.
</p>
<p> With this policy, you can enable and specify details for Microsoft's protocol transition feature. With protocol transition, an API gateway can automatically transition inbound identities into outbound Windows security identities within a Microsoft Windows security environment. By default, a service or service operation without a Protocol Transition policy attached will not support protocol transition.</p>


<h2 id="constrained_delegation">Constrained Delegation</h2>
<p>Constrained delegation (use any authentication protocol) must be enabled in Active Directory for the Application pool account. (If the application pool user is NETWORK SERVICE or LOCAL SYSTEM, the account is the machine account).</p>
<p><strong>Note: The application pool account IMS runs under must have &ldquo;Act as part of the operating system&rdquo; privilege selected.</strong> </p>
<p><a href="#top">Back to top</a></p>



<h2 id="configuration">Configuration</h2>
<p>Let's take a quick walkthrough of the Microsoft Protocol Transition Policy configuration process to get you started.</p>
<ul>
	<li><a href="#step_01">Step 1: Add Policy</a></li>
	<li><a href="#step_02">Step 2: Modify Policy</a></li>
	<li><a href="#step_03">Step 3: Configure Policy</a></li>
	<li><a href="#step_04">Step 4: Attach Policy</a></li>
	<li><a href="#step_05">Step 5: Test Policy</a></li>
</ul>

<h4 id="step_01">Step 1: Add Policy</h4>
<p>You can create a Microsoft Protocol Transition Policy instance using <strong>Add Policy</strong> in the <strong>Policies</strong> &gt; <strong>Operational Policies</strong> section. The summary screen will look like this:</p>
<p><img src="images/ms_protocol_transition_summary.JPG" alt="" /></p>

<h4 id="step_02">Step 2: Modify Policy</h4>
<p>When you <strong>Modify</strong> the Microsoft Protocol Transition Policy on the <strong>Policy Details</strong> page, the initial policy will look like this:</p>
<p><img src="images/modify_ms_protocol_transition_policy.JPG" alt="" /></p>

<h4 id="step_03">Step 3: Configure Policy</h4>
<p>Configure the Microsoft Protocol Transition Policy as follows:</p>


<p><strong>Source Subject Category</strong></p>
<ul>
	<li><strong>Consumer&#8212;</strong>This protocol transition policy will only affect identities with consumer subject categories.</li>
	<li><strong>End-User&#8212;</strong>This protocol transition policy will only affect identities with end-user subject categories.</li>
	<li><strong>User-Defined&#8212;</strong>This protocol transition policy will only affect identities with the provided user defined subject categories.</li>
</ul>


<p><strong>Credential Options &gt; Username/Password</strong></p>
<ul>
	<li><strong>Authenticated Credentials&#8212;</strong>Determines how username credentials previously authenticated by the API Gateway are handled. If <strong>Transition</strong> is selected, then they will be transitioned to Windows security, If <strong>Login</strong> is selected, then a Windows login will occur to produce a Windows security token.</li>
	<li><strong>Unauthenticated Credentials&#8212;</strong>Determines how username credentials not previously authenticated by the API Gateway are handled. If <strong>Transition</strong> is selected, then they will be transitioned to Windows security. If <strong>Login</strong> is selected, then a Windows login will occur to product a Windows security token. If <strong>Reject</strong> is selected, then the transaction will fail.</li>
</ul>

<h4 id="step_04">Step 4: Attach Policy</h4>
<p>After you have saved your policy you can attach it to an Intermediary for Microsoft virtual Service in Policy Manager or you can attach the policy at the Organization level and the policy will be active for all services defined within the organization.</p>
<p><img src="images/ms_protocol_transition_pol_attach.JPG" alt="" /></p>

<h4 id="step_05">Step 5: Test Policy</h4>
<p>After you attached the Microsoft Protocol Transition Policy to a virtual service, send a request to your service and view the results in your client. You can also go to the <strong>Services</strong> &gt; <strong>Monitoring</strong> section to view the results for Logs (View Usage Record Details), Real Time Charts, and Historical Charts.</p>
<p>If you receive errors, review the log information for details. In most cases, errors are typically associated with Active Directory setting or IMS Application Pool User permission. Update the settings and retry.</p>
<p><a href="#top">Back to top</a></p>



<hr class="divide_hr" />



<h2 id="related_topics">Related Topics</h2>
<div class="relatedlinks">
<ul>
	<li><a href="../policies/about_policies_view.htm">About Policies</a></li>
	<li><a href="../policies/policy_management.htm">Managing Policies</a></li>
	<li><a href="../policies/policies_operational_about.htm">About Operational Policies</a></li>
</ul>
<ul>
	<li><a href="../../cm/learnmore/basics_glossary.htm">Glossary of Terms for the Community Manager developer portal</a></li>
</ul>
</div>
