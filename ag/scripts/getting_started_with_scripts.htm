---
layout: page
title: Getting Started with Scripts
description: Learn about the script creation process, using a Script Activity in a process, documentation, and management tools.
product: ag
category: gs
sub-nav-class: Scripts
weight: 08
type: page
nav-title: Getting Started with Scripts
---
<h1 id="top">Getting Started with Scripts</h1>
<p>Learn about the script creation process, using a script activity in a process, documentation, and management tools.</p>
<hr />



<h2 style="color: gray;">Table of Contents</h2>
<ol class="table_of_contents">
	<li><a href="#script_contexts"> Script Contexts</a></li>
	<li><a href="#add_script">Add Script</a></li>
	<li><a href="#reference_script">Reference Script</a></li>
	<li><a href="#script_activity">Script Activity</a></li>
	<li><a href="#script_predefined_methods">Pre-Defined Script Objects</a></li>
	<li><a href="#script_proc_seq">Sequence of Script Processing</a></li>
	<li><a href="#policy_manager_scripting_api">Policy Manager Scripting API</a></li>
	<li><a href="#process_reference">Process Reference</a></li>
	<li><a href="#script_management">Script Management Tools</a></li>
	<li><a href="#whats_next">What's Next?</a></li>
</ol>
<hr />



<h2 id="overview">Overview</h2>
<p>Akana Policy Manager provides a scripts interface that is available in the <strong>Scripts</strong> folder of each Organization. It allows you to define a series of utility scripts for performing common tasks. You can then import and reference scripts:</p>
<ul>
	<li>In a Process definition using the Script Activity</li>
	<li>In a QoS or Operational Script Policy</li>
</ul>
<p>Let's take a quick walkthrough of the script creation options and tools available to get you started.</p>



<h2 id="script_contexts">Script Contexts</h2>
<p>There are several ways that you can configure your script definitions:</p>
<ul>
	<li>You can define a script object in the <strong>Scripts</strong> section, using the <strong>Add Script</strong> function. This is useful for building a library of scripts you can reuse in your Process or Script Policy definitions. </li>
	<li> You can create a process, add a Script Activity, and then import an existing script. </li>
	<li>You can create a QoS or Operational Script Policy and then, from within that context, define a new script or import an existing script. For example, choose <strong>Policies</strong> &gt; <strong>Operational Policies</strong> &gt; <strong>Add Policy</strong> and choose either <strong>Private Operational Script Policy</strong> or <strong>Public Operational Script Policy</strong>. Once you've defined the policy, you can add the script, in JavaScript, Jython, or BeanShell Engine. For more information, see <a href="../policies/policy_op_op_script.htm">Using the Public and Private Operational Script Policies</a>.</li>
	<li> If there is a portion of a pre-defined script object that you want to use in your local script, you can import the script object and then reference it in the imported script. </li>
	<li>You can use scripts in workflows. See <a href="../workflow/07_pm_wf_scripts.htm">Using Scripts in Workflows</a>.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<h2 id="add_script">Add Script</h2>
<p>You add a script using the <strong>Add Script</strong> function on the <strong>Scripts Summary</strong> page.</p>
<p><img src="images/script_summary.jpg" alt="Scripts Summary page" /></p>
<p>The steps are:</p>
<ol>
	<li>Select the language you will be writing your script in (JavaScript, Jython, or BeanShell engine).</li>
	<li>Add your script content.</li>
	<li>Save.</li>
</ol>
<p>The example below shows adding the first script, so there are no existing scripts in the <strong>Available Scripts</strong> section. This section represents scripts that are available to be imported. In this example, we are adding a script named <strong>Sample Script</strong>.</p>
<p><img src="images/script_content.jpg" alt="scripts available to be imported" /></p>
<p>After you save the script and are creating an additional script, all existing scripts are displayed in the <strong>Available Scripts</strong> section. In the example below, <strong>Sample Script</strong> is now available. This means that it can be reused by importing it into a new script definition.</p>
<p><img src="images/script_import.jpg" alt="sample script is now available" /></p>
<p>Now that you've added a script, let's see how to reference a script. See <a href="#reference_script">Reference Script</a> below.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="reference_script">Reference Script</h2>
<p>After you add your set of utility scripts, in your virtual service operation process definition, you can:</p>
<ul>
	<li>Add a <strong>Script Activity</strong></li>
	<li>Import a pre-defined script</li>
	<li>Add a script reference for the function you want to perform</li>
</ul>
<p> For example, let's say you have a requirement to validate some data as part of your process. To do this, you created a reusable script, <strong>TestScript</strong>, that includes a function for validating data (<strong>validateData</strong>). In your process definition, import <strong>TestScript</strong> and reference the function in the script source as shown below.</p>
<p><img src="images/script_example.jpg" alt="referencing a script function" /></p>
<p><a href="#top">Back to top</a></p>



<h2 id="script_activity">Script Activity</h2>
<p>The Script Activity provides the ability to execute a script as part of a process. The script is executed at the point in the process at which the activity is connected. The script can be written in JavaScript, Jython, or BeanShell.</p>
<p>The Script Details Editor is organized into two separate areas, <strong>Imports</strong> and <strong>Source</strong>. In the Source tab, you can:</p>
<ul>
	<li>Choose from a list of supported script languages.</li>
	<li>Write or paste the script, in the large source code editor text area.</li>
</ul>
<p><img src="images/script_activity_source_area.jpg" alt="Script Activity Source Area" /></p>
<p>You can save common functions, that you might want to re-use in your scripts, as Script objects. In the Policy Manager Workbench, for each organization, there is a Scripts section. To add a re-usable script for the organization, go to the Scripts section and click <strong>Add Script</strong>.</p>
<p>Within the Script activity, to use a common function, you must import the Script object that defines the function. Scripts are defined for import in the <strong>Imports</strong> area. Available scripts are listed in the <strong>Available Scripts</strong> tree, as shown below.</p>
<p>You can move any number of scripts from Available Scripts to the Imported Scripts list box. Only scripts in the specified scripting language type are displayed.</p>
<p> The script does not return a value.</p>
<p><img src="images/script_activity_imports_area.jpg" alt="Script Activity Imports Area" /></p>
<p>In the illustration above, the json2 script from the Registry/Scripts folder is imported. Once you import a script, you can use any functions that are defined in that script, within the Script Activity source code.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="script_predefined_methods">Pre-Defined Script Objects</h2>
<p>The platform includes some pre-defined objects that you can use in your scripts.</p>
<p>From the script workspace, to access the list of pre-defined script objects, type CTRL+Space, and then choose from the list below. Typing a period (.) after the script object name, followed by CTRL+Space, allows you to select from the available methods for the object.</p>
<div class="relatedlinks">
	<p><img src="images/scripts_default_methods_be_jython.jpg" alt="Default methods for scripts" /></p>
<p><img src="images/scripts_default_methods_be_jython_02.jpg" alt="Default methods for scripts, detail" /></p>
</div>
<p>The pre-defined script objects are shown below. These objects are available for all three supported scripting languages.</p>
<ul>
	<li id="result"><strong>result</strong> <strong>(2018.0.0 and later)</strong>: Allows the script to indicate its status to the policy framework. The <strong>result</strong> object has two methods:
<ul>
			<li><strong>result.isSuccess()</strong>: Returns a Boolean indicating whether or not message processing should proceed.</li>
			<li><strong>result.setSuccess(Boolean status)</strong>: Accepts a Boolean value indicating whether or not script execution was successful and message processing should proceed as normal.</li>
		</ul>
	</li>
	<li id="recorder"><strong>recorder</strong>: Provides an interface for recording content in the Policy Manager usage log pages.</li>
	<li id="auditlog"><strong>auditLog:</strong> Provides logging functions to the process audit log. If auditing is enabled for the virtual service operation that is invoking the process statements logged using this variable, log information will be inserted into the audited message log for the operation&rsquo;s execution. In Policy Manager, you can find this information on the <strong>Monitoring</strong> tab for the service, in the <strong>Logs</strong> sub-tab.</li>
	<li id="messagecontext"><strong>messageContext</strong>: Provides information about the platform's message handler framework's processing of a message. From the context you can get information such as the message being processed, the role of the message in a message exchange (IN, OUT, FAULT), and properties that can be changed and read by the chain of handlers that process the message.</li>
	<li id="alerter"><strong>alerter:</strong> Provides an interface for generating alerts that are displayed on the Policy Manager alert pages.</li>
	<li id="msgfactory"><strong>msgFactory:</strong> Provides functions for creating message variables. A message variable cannot simply be assigned content such as a simple string or int variable. It must be initialized using one of the functions in the msgFactory. </li>
	<li id="processcontext"><strong>processContext:</strong> Provides functions for retrieving and changing information about the currently running process, such as the variables defined in the process and one or more authenticated subjects of the process. </li>
	<li id="systemlog"><strong>systemLog</strong>: Provides logging functions to the container&rsquo;s log. The statements logged with this interface are mixed with the other system log statements.</li>
	<li id="msgrservice"><strong>msgrService</strong>: Provides a messaging bus for exchanging messages with web services. The MessengerService provides access to an ExchangeFactory for creating Exchanges and a Messenger for executing them.</li>
</ul>
<p>For JavaScript, supported JavaScript keywords are included on the list, as shown below. Information on these is generally available in JavaScript reference works.</p>
<p><img src="images/scripts_default_methods_javascript.jpg" alt="Default methods for JavaScript" /></p>
<p>Supported JavaScript keywords include:</p>
<div class="relatedlinks">
<ul>
	<li>break</li>
	<li>case</li>
	<li>catch</li>
	<li>continue</li>
	<li>debugger</li>
	<li>default</li>
	<li>delete</li>
</ul>
<ul>
	<li>do</li>
	<li>else</li>
	<li>false</li>
	<li>finally</li>
	<li>for</li>
	<li>function</li>
	<li>if</li>
</ul>
<ul>
	<li>in</li>
	<li>instanceof</li>
	<li>new</li>
	<li>null</li>
	<li>return</li>
	<li>switch</li>
	<li>throw</li>
</ul>
<ul>
	<li>true</li>
	<li>try</li>
	<li>typeof</li>
		<li>var</li>
	<li>void</li>
	<li>while</li>
	<li>with</li>
</ul>
</div>
<p>For more information, refer to the Scripting API documentation; see <a href="#policy_manager_scripting_api">Policy Manager Scripting API</a> below.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="script_proc_seq">Sequence of Script Processing</h2>
<p>The script associated with an Operational Script policy is executed before the script associated with a process. For this reason, some properties in messages might be missing.</p>
<p>In the context of an Operational Script policy, the <a href="#messagecontext">messageContext</a> and <a href="#result">result</a> script objects are available.</p>
<p>In the context of a process, the <a href="#processcontext">processContext</a> and <a href="#recorder">recorder</a> script objects are available.</p>
<p>Other available objects listed in <a href="#script_predefined_methods">Pre-Defined Script Objects</a> above are available in both contexts: <a href="#auditlog">auditLog</a>, <a href="#systemlog">systemLog</a>, <a href="#alerter">alerter</a>, <a href="#msgfactory">msgFactory</a>, and <a href="#msgrservice">msgrService</a>.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="policy_manager_scripting_api">Policy Manager Scripting API</h2>
<p>The Policy Manager Scripting API provides a series of interfaces and classes that you can use to build process-related scripts. The API includes lots of use cases and sample code you can experiment with and use as a baseline when building your own scripts. You can access the scripting API documentation in the following locations:</p>
<ul>
	<li>In the <strong>docs\scriptDocs</strong> folder of the Akana Platform folder.</li>
	<li>On the Akana docs site: <a href="../apidoc_scripting_api_all.htm" >Policy Manager Scripting API</a></li>
</ul>
<p><a href="#top">Back to top</a></p>



<h2 id="process_reference">Process Reference</h2>
<p>Another essential resource you will need when working with Processes and Scripts is the <a href="../processes/process_reference.htm">Process Reference</a> document. Here you will learn all the fundamentals about creating a process, using the process editors, and configuring activities.</p>
<p><a href="#top">Back to top</a></p>



<h2 id="script_management">Script Management Tools</h2>
<p>For an overview of all the available tools for managing Script definitions, see <a href="script_management.htm" >Managing Scripts</a>.</p>
<p><img src="images/script_tools.jpg" alt="script management tools" /></p>
<p><a href="#top">Back to top</a></p>



<h2 id="whats_next">What's Next?</h2>
<p>Now that you've familiarized yourself with high-level information about building scripts, and know what reference materials and tools are available, you can start building your script library and begin to automate your process definitions and QoS Script Policies.</p>
<p><a href="#top">Back to top</a></p>
