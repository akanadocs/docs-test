---
layout: page
title: Troubleshooting for Policy Manager and Network Director
description: Overview to troubleshooting documentation for Policy Manager and Network Director.
product: ag
category: ref
sub-nav-class: Troubleshooting
weight: 04
type: page
nav-title: Troubleshooting PM ND Overview
---
<h2 id="top">Troubleshooting Policy Manager and Network Director: Introduction</h2>
<p>Overview of ways to get help with troubleshooting.</p>
<p><a href="ts_pm_nd_02.htm" class="button secondary">Troubleshooting PM</a> 
	<a href="ts_pm_nd_03.htm" class="button secondary">Troubleshooting ND</a> 
	<a href="ts_pm_nd_04.htm" class="button secondary">Database Queries</a></p>



<div class = "divider1"></div>
<h3 style="color: gray;">Table of Contents</h3>
<ol class="table_of_contents">
	<li><a href="#s01_00">Overview</a></li>
	<li><a href="#s01_01">Documentation Summary</a></li>
	<li><a href="#s01_02">Customer Support</a></li>
	<li><a href="#s01_03">Monitoring Tabs: Alerts and Logs</a></li>
	<li><a href="#s01_04">Log Files</a></li>
	<li><a href="#s01_05">stdout.txt File</a></li>
	<li><a href="#s01_06">Monitoring Tool</a></li>
	<li><a href="#s01_07">Restarting the Container: General Information</a></li>
	<li><a href="#s01_08">Knowledge Base</a></li>
	<li><a href="#s01_09">Release Notes</a></li>
	<li><a href="#s01_10">Product Documentation</a></li>
</ol>
<div class = "divider1"></div>



<h3 id="s01_00">Overview</h3>
<p>Over the course of using Policy Manager, Network Director, Policy Manager for DataPower, or other Akana products, you're likely to have to do some troubleshooting from time to time. Due to the relationship between the various containers and a selection of different type of web services, security, databases, and networks, there is a wide range of issues that might occur.</p>
<p>These products are deployed in a wide range of environments, and interface with a wide selection of products and versions, including operating systems, databases, servers, firewalls, security mechanisms, and others. It is important to take an orderly approach to installation, deployment, and troubleshooting.</p>
<p>If you encounter errors, check this publication and the resources referenced here.</p>
<p>This document also includes information about contacting technical support and the support process. Finally, it includes some resource material such as firewall settings and database queries for your reference.</p>



<p><a href="#top">back to top</a></p>



<h3 id="s01_01">Documentation Summary</h3>
<p>The table below provides a summary of the information in this troubleshooting documentation and how it is organized.</p>
<table class="doctable">
	<thead>
		<tr>
			<th>This section...</th>
			<th>Provides this information...</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Introduction</td>
			<td>General information about information resources available, information about working with Support, general information about basic troubleshooting tools.</td>
		</tr>
		<tr>
			<td><a href="ts_pm_nd_02.htm">Troubleshooting Policy Manager </a></td>
			<td>Troubleshooting information for Policy Manager</td>
		</tr>
		<tr>
			<td><a href="ts_pm_nd_03.htm">Troubleshooting Network Director </a></td>
			<td>Troubleshooting information for Network Director</td>
		</tr>
		<tr>
			<td><a href="ts_pm_nd_04.htm">Reference: Database Queries </a></td>
			<td>Examples of database queries you can use to resolve issues or optimize.</td>
		</tr>
	</tbody>
</table>
<p><a href="#top">back to top</a></p>



<h3 id="s01_02">Customer Support</h3>
<p>This section provides information about working with Akana technical support, including:</p>
<ul>
	<li><a href="#s01_02_01">Contacting Technical Support</a></li>
	<li><a href="#s01_02_02">Logging a Support Ticket</a></li>
	<li><a href="#s01_02_03">Support Tickets: Customer Responsibilities</a></li>
	<li><a href="#s01_02_04">Notes for Support Customers</a></li>
	</ul>


<h4 id="s01_02_01">Contacting Technical Support</h4>
<p>If you experience an issue with an Akana product, you can contact Akana Technical Support. Akana offers a variety of support services by email and phone. Support options and details are listed in the table below.</p>
<p>For the latest information on how to contact&nbsp;Technical Support, go to the Akana docs site, <a href="http://docs.akana.com/" title="Link to Akana docs site">http://docs.akana.com/</a>. In the footer of every page is a link to Customer Support. On that page, you'll see the contact numbers and email addresses listed. Use the information in the Akana section.</p>
<p>When sending an email to Customer Support, please provide the following information:</p>
<ul>
	<li>Your name</li>
	<li>Email address</li>
	<li>Subject</li>
	<li>As much information as possible regarding your question.</li>
</ul>
<p>You'll receive an acknowledgment email and one of our support staff will contact you.</p>


<h4 id="s01_02_02">Logging a Support Ticket</h4>
<p>For information about logging a support ticket, go to the Akana documentation site, <a href="http://docs.akana.com/" title="Link to Akana docs site" target="_blank">http://docs.akana.com/</a>, and follow the Customer Support link in the page footer.</p>
<p>The page includes information about how to file a support request, email Technical Support, or call.</p>
<p>When you log a support ticket, provide clear and specific details about the issue you are having, with as much background information as possible. Include:</p>
<ul>
	<li>Product version and update</li>
	<li>Database version</li>
	<li>Operating system</li>
	<li>A clear subject and description of the issue and, if possible, steps to reproduce your issue so that Support can troubleshoot it more effectively.</li>
	<li>The appropriate log files based on the type of issue being reported. Screen captures are also helpful.</li>
	<li>If applicable, other related files such as the WSDL file for an API service.</li>
</ul>
<h4 id="s01_02_03">Support Tickets: Customer Responsibilities</h4>
<p>When logging a support ticket, please bear in mind these additional points and customer responsibilities:</p>
<ul>
	<li>Please make sure that the issue is related to the Akana product. In some cases, issues are caused by other factors such as network, firewall, or security certificates.</li>
	<li>In case of a Production Critical issue, you can contact Akana Technical Support immediately and one of our knowledgeable support staff will help you troubleshoot your problem and collect information for further diagnosis. If you are reporting the issue by email, specify in the subject line that it is Production Critical. A production critical issue is defined as follows:
		<ul>
			<li>Actual or potential complete failure of traffic on a critical route due to failure of a system or network element.</li>
			<li>Complete or partial loss of visibility/control of network elements.</li>
			<li>Loss or impairment of control/monitoring equipment.</li>
		</ul>
	</li>
	<li>Document the scenario/steps to reproduce the issue. If it's not possible to reproduce the issue, explain what was happening at the time you experienced the issue and what then occurred.</li>
	<li>Provide the appropriate log files from all Akana containers that are involved in the request flow.</li>
	<li>Collect any other information that you think will be useful for Akana engineers to understand and troubleshoot the issue.</li>
	<li>Report the issue to Akana Technical Support using one of the options listed earlier in this section.</li>
</ul>


<h4 id="s01_02_04">Notes for Support Customers</h4>
<ol>
	<li>For the response time and actions taken based on ticket priority, refer to the Response Times table in the general Support Policy section of the Support Site.</li>
	<li>If you urgently need a quick response (for example, in the case of a Production Critical issue), please call Akana Technical Support, or submit a ticket and indicate it on the ticket.</li>
	<li>If screen sharing or an online session is needed, please specify this in the ticket so that Akana Technical Support can be prepared.</li>
	<li>In the case of screen sharing or an online session, Akana Technical Support might need to control the console to demonstrate how to resolve the issue.</li>
	<li>If you allow Akana Technical Support to access your system directly, remember to also provide the needed access information such as VPN or authentication information.</li>
</ol>
<p><a href="#top">back to top</a></p>



<h3 id="s01_03">Monitoring Tabs: Alerts and Logs</h3>
<p>Monitoring information, including alerts and logs, is available at the following levels:</p>
<ul>
	<li><a href="#s01_03_01">For the entire organization</a></li>
	<li><a href="#s01_03_01">For each container</a></li>
	<li><a href="#s01_03_01">For each service</a></li>
	<li><a href="#s01_03_01">For each contract</a></li>
</ul>
<p>At each level, a monitoring tab gives you access to alerts, logs, and other information so that you can view the state of functions in real time.</p>


<h4 id="s01_03_01">Organization Monitoring Tab</h4>
<p>The highest level of monitoring information is available via the monitoring tab for an organization. This lets you view all logs and alerts sent by services and sub-organizations within the organization you are viewing.</p>
<p>This tab includes three types of alerts:</p>
<ul>
	<li>Service Alerts</li>
	<li>SLA Alerts</li>
	<li>Container Alerts</li>
</ul>
<p>If there is an error with one of your services, the monitoring tab is a good place to look first, to see if the alerts and log entries can help you identify the problem.</p>

<p>An example of the monitoring tab for an organization is shown below.</p>
<p><img src="assets/01_01.jpg" alt="Monitoring tab for an organization" /></p>


<h4 id="s01_03_02">Service-Level Monitoring Tab</h4>
<p>Each service also has its own monitoring tab, with alerts and logs relating only to that service and its operations, as shown below.</p>
<p>If the basic auditing policy is being used, the Monitoring -> Logs tab also shows usage data for the service. However, as a best practice this should only be used while troubleshooting or in non-production environments as the payload data is stored in the database.</p>
<p><img src="assets/01_02.jpg" alt="Service-level monitoring tab" /></p>
<p>If the detailed auditing policy is being used, you can also view the request and response payload in the Logs tab. Double-click a specific message to see the Usage Data Details overlay. This includes usage detail, recorded messages, and transaction events. In the Recorded Messages tab you can see the individual request and response message. You can also choose to view Raw Format, which includes the HTTP headers. An example is shown below.</p>
<p><img src="assets/01_03.jpg" alt="viewing request and response in the Logs tab" /></p>


<h4 id="s01_03_03">Monitoring Tab for the Container</h4>
<p>If there is an issue with a specific container, alerts are displayed in the container's monitoring tab as well. You also see the container alerts when you log in to the Policy Manager console.</p>
<p>The example below shows the monitoring tab for a container.</p>
<p><img src="assets/01_04.jpg" alt="Monitoring tab for a container" /></p>
<p>In some cases the information on the monitoring tab can help you discover a deeper error occurring within the container or service.</p>
<p>The next step in troubleshooting an instance is to make use of the logging system.</p>


<h4 id="s01_03_04">Monitoring Tab for the Contract</h4>
<p>A monitoring tab is also available for each contract, giving access to the logs applicable to the contract.</p>

<p><a href="#top">back to top</a></p>



<h3 id="s01_04">Log Files</h3>
<p>By default, Policy Manager and Network Director only log errors (exceptions) that happen over the course of normal usage. If you are having any runtime processing errors or issues while performing some action in the Policy Manager console, applicable errors will generally be logged in the log file for the applicable container.</p>
<p>This section includes the following information about log files:</p>
<ul>
	<li><a href="#s01_04_01">File Location</a></li>
	<li><a href="#s01_04_02">Modifying the Default Logging Behavior</a></li>
	<li><a href="#s01_04_03">Turning Trace Logging On</a></li>
</ul>
<p class="apidoc_note"><strong>Note</strong>: There is another type of log that you can enable if needed. In the Policy Manager Administration Console, <strong>Configuration</strong> tab, choose the configuration category of <strong>com.soa.transport.jetty</strong> and enable the NCSA Access log (set the <strong>ncsa.access.log.enable</strong> property to <strong>true</strong>). Then, in the<strong> ncsa.access.log.filename</strong> field, specify the location for the log file. After that, access to any page in the Policy Manager Console or the Akana Administration Console for the Policy Manager instance generates an entry to the specified log file.</p>


<h4 id="s01_04_01">File Location</h4>
<p>Each instance has its own set of logs at the following default location:</p>
<pre>{installation directory}/sm60/instances/{instance name}/log</pre>
<p>The default behavior for the logging system is to have a maximum of ten backup logs at 4.7 MB (5000000 bytes) each. When a log reaches 4.7 MB in size, the logging information rolls over into the next file. Once the total number of log files reaches 10, the oldest file is deleted when the new one starts.</p>


<h4 id="s01_04_02">Modifying the Default Logging Behavior</h4>
<p>You can modify the default settings for logging behavior, along with the level of logging and other customization, in the Akana Administration Console for the Policy Manager and Network Director instance.</p>
<p><img src="assets/01_05.jpg" alt="Modifying the default logging behavior" /></p>

<h5 id="proc_modify_logging">To modify the default logging behavior</h5>
<ol>
	<li>Log in to the Akana Administration Console for the Policy Manager or Network Director instance.</li>
	<li>Click the <strong>Configuration</strong> tab.</li>
	<li>From the configuration categories on the left, find com.soa.log.</li>
	<li>In the properties panel on the right, the two properties below control the number of backups and/or the maximum size for each log file. Modify as needed:
		<ul>
			<li><strong>log4j.appender.FILE.MaxBackupIndex</strong>: the number of backup files that are kept</li>
			<li><strong>log4j.appender.FILE.MaxFileSize</strong>: the maximum size for each file</li>
		</ul>
		</li>
	
	<li>Click <strong>Apply Changes</strong>.</li>
</ol>


<h4 id="s01_04_03">Turning Trace Logging On</h4>
<p>If a problem with a container persists, you could enable trace logging in the Akana Administration Console. Trace logging is enabled dynamically and does not require a container restart.</p>
<p>Depending on the category for which trace logging is enabled, detailed information is collected in the log file, including such activity as:</p>
<ul>
	<li>Internal communication between Akana containers</li>
	<li>Database queries</li>
	<li>Incoming requests</li>
	<li>Certificate information</li>
	<li>Scheduled jobs</li>
</ul>

<p>When the troubleshooting is complete, trace logging for the specific category should set back to the default setting of <strong>error</strong>.</p>
<p>A good practice is to figure what action is causing specific symptoms in the container, and turn on trace logging only while that action is occurring. For example, if a service detail page is coming up blank, you might want to see what Policy Manager is doing when you click on the service detail page. You would set the logging level to <strong>trace</strong>, click on the service detail page, and then change the level back to <strong>error</strong> and analyze the logs.</p>

<h5 id="proc_trace_logging">To turn trace logging on or off</h5>
<ol><li>Log in to the Akana Administration Console for the Policy Manager or Network Director instance.</li>
	<li>Click the <strong>Configuration</strong> tab.</li>
	<li>From the configuration categories on the left, find com.soa.log.</li>
	<li>In the properties panel on the right, modify this property to enable or disable trace for all runtime activity on the container:
		<ul>
			<li>To enable: <strong>log4j.category.com.soa</strong>: Switch from <strong>ERROR</strong> to <strong>TRACE</strong></li>
			<li>To disable: <strong>log4j.category.com.soa</strong>: Switch from <strong>TRACE</strong> to <strong>ERROR</strong></li>
		</ul>
		</li>
	<li>Click <strong>Apply Changes</strong>.</li>
</ol>
<p><a href="#top">back to top</a></p>



<h3 id="s01_05">stdout.txt File</h3>
<p>If there is an issue with the bundles not starting, you can check the stdout.txt file to get additional information for troubleshooting purposes.</p>
<p>This file is created whenever the container starts up. It is stored in the instances folder (<strong>instances/{container name}/log/stdout.txt</strong>).</p>
<p>Normally the file contains a one-line message stating that the bundles have started. However, if the bundles fail to load, the errors that occur during the container initialization process are recorded in this file. Errors relating to bundles loading do not appear in the Policy Manager log files, since logging of messages starts when the container has started.</p>
<p><a href="#top">back to top</a></p>



<h3 id="s01_06">Monitoring Tool</h3>
<p>All Policy Manager 6.x containers include an optional Monitoring Tool to help troubleshoot issues related to the container resources. It is not installed by default but you can easily install it. You can use this tool to monitor and analyze the following:</p>
<ul>
	<li>Incoming HTTP connections (<strong>com.soa.transport.httpclient</strong>)</li>
	<li>Database thread pool (<strong>com.soa.database.config.{db-config-id}-mon</strong>)</li>
	<li>Active/idle Policy Manager processes (<strong>com.soa.framework</strong>)</li>
	<li>Container memory usage (<strong>com.soa.vmstats</strong>)</li>
	<li>Outgoing HTTP connections (<strong>com.soa.transport.jetty</strong>)</li>
	<li>Monitoring queues (<strong>com.soa.usage</strong>)</li>
	<li>JMS connections (<strong>com.soa.transport.jms</strong>)</li>
</ul>

<h5 id="proc_install_monitoring">To install the monitoring tool</h5>
<ol><li>Log in to the Akana Administration Console for the Policy Manager or Network Director instance.</li>
	<li>Click the <strong>Available Features</strong> tab.</li>
	<li>From the <strong>Filter</strong> drop-down list at the top of the left panel, choose <strong>Tool</strong>.</li>
	<li>Click the checkbox for the Akana Admin Monitoring Tool and click <strong>Install Feature</strong>.</li>
	<li>Restart the container.</li>
	<li>After restart, verify that the <strong>Monitoring</strong> tab is now present in the Akana Administration Console, as shown below.
<p><img src="assets/01_06.jpg" alt="Making sure the Monitoring tab is present" /></p></li>
</ol>
<p class="apidoc_note"><strong>Note</strong>: This tool does not require additional machine or container resources to run. Before closing the tool, set the polling interval to 0.</p>
<p><a href="#top">back to top</a></p>



<h3 id="s01_07">Restarting the Container: General Information</h3>
<p>Some types of changes that you might make will require restarting of the container before the changes go into effect. Other types of changes are effective immediately, without restarting the container.</p>
<p>In most cases, specific procedures and issue resolution notes in this document state whether you need to restart the container or not. In general, configuration changes do not require restart unless they include changes to the container listener or database. If you add or remove container features you'll need to restart the container for the changes to go into effect.</p>
<p>Examples of changes that require restart:</p>
<ul>
	<li>Adding the monitoring tool in the Akana Administration Console for the Policy Manager instance</li>
	<li>Changing database properties such as username, password, or hostname</li>
	<li>Changing the port number for the container listener (for Policy Manager versions 6.0 and prior)</li>
	</ul>
<p>Examples of changes that do not require restart:</p>
<ul>
	<li>Increasing the log level to <strong>TRACE</strong></li>
	<li>Adding an HTTP route configuration file to the <strong>/instances/
		{ND}/deploy</strong> folder</li>
	<li>Adding an identity system such as LDAP to the Policy Manager Workbench</li>
	<li>Changing the port number for the container listener (for Policy Manager version 6.1)</li>
</ul>


<h4 id="s01_07_01">Determining Where to Look for Error Information</h4>
<p>When trying to narrow down information for troubleshooting purposes, it might be useful to know what symptoms are likely to relate to which container types.</p>
<table class="doctable">
	<thead>
		<tr>
			<th>You might find info about these types of errors...</th>
			<th>In this location...</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Issues with Policy Manager (for example, usage writer or container configuration), user interface issues, search results, and some database issues.</td>
			<td><p>Policy Manager log files.</p>
				<p>These types of issues are generally a problem with the Policy Manager instance.</p></td>
		</tr>
		<tr>
			<td>404 when invoking a service, bad context paths, virtual service authentication errors, authorization errors, or routing issues.</td>
			<td><p>Network Director log files.</p>
				<p>Possibly also Policy Manager log files.</p>
				<p>These issues are likely to relate to the Network Director. However, since the Network Director communicates with the Policy Manage to retrieve information, in many cases the Policy Manager logs are helpful as well.</p></td>
		</tr>
		<tr>
			<td>Container initialization.</td>
			<td><p>stdout console or the stdout file.</p>
				<p>Any errors that occur during the container initialization process are written to stdout.</p></td>
		</tr>
		</tbody>
</table>
<p><a href="#top">back to top</a></p>



<h3 id="s01_08">Knowledge Base</h3>
<p>The Rogue Wave Akana knowledge base, <a href="https://library.roguewave.com/display/SUPPORT/Akana+-+Knowledgebase" title="Link to Rogue Wave knowledge base" target="_blank">https://library.roguewave.com/display/SUPPORT/Akana+-+Knowledgebase</a>, includes many type of information such as:</p>
<ul>
	<li>How-to articles</li>
	<li>Product compatibility matrices</li>
	<li>Troubleshooting articles</li>
</ul>
<p><a href="#top">back to top</a></p>



<h3 id="s01_09">Release Notes</h3>
<p>It's possible that you could encounter a bug that might have been resolved in a later version of the product. For this and other reasons, it's a good idea to check the release notes for versions later than yours.</p>
<p>The release notes for each product version include information about the bugs/issues that have been fixed in that version, as well as information about new product features and enhancements. You might find that the problem you encountered was resolved in a later version.</p>

<h5 id="proc_view_release_notes">To view release notes</h5>
<ol>
	<li>Log in to the Rogue Wave Support Center (<a href="https://library.roguewave.com" target="_blank">https://library.roguewave.com</a>).
		<p class="apidoc_note"><strong>Note</strong>: If you don't have a login for the site, contact Akana technical support to get access.</p>
	</li>
	<li>In the <strong>My Resources section</strong>, click <strong>Product Downloads</strong>, then click <strong>Akana - Product Downloads</strong> (<a href="https://library.roguewave.com/display/SUPPORT/Akana+-+Product+Downloads" title="Direct link to Akana product downloads" target="_blank">https://library.roguewave.com/display/SUPPORT/Akana+-+Product+Downloads</a>).</li>
	<li>Find the release notes and download the file.</li>
</ol>
<p><a href="#top">back to top</a></p>



<h3 id="s01_10">Product Documentation</h3>
<p>When you download your installation executable files, make sure you get and read the product documentation. The documentation for each product includes general information about installation and often includes troubleshooting information for the specific product.</p>
<p>Updates to documents are available from time to time on the Support site.</p>
<p><a href="#top">Back to top</a></p>



<div class = "divider1"></div>



<h3 id="related_topics">Related Topics</h3>
<div class="troubleshooting">
<ul>
	<li><a href="ts_pm_nd_01.htm">Troubleshooting Policy Manager and Network Director: Introduction</a></li>
	<li><a href="ts_pm_nd_02.htm">Troubleshooting Policy Manager</a></li>
</ul>
<ul>
	<li><a href="ts_pm_nd_03.htm">Troubleshooting Network Director</a></li>
	<li><a href="ts_pm_nd_04.htm">Troubleshooting Reference: Database Queries</a></li>
</ul>
</div>