---
layout: page
title: CA SiteMinder Use Case - Using SMSESSION Cookie with HTTP Security Policy
description: Learn how to authenticate a web service request with CA-SiteMinder using an SMSESSION cookie with an HTTP Security Policy.   
product: ag
category: learn
weight:	9
sub-nav-class: CA SiteMinder
type: page
nav-title: CA SiteMinder Use Case - Using SMSESSION Cookie with HTTP Security Policy
---

<h2 name="top">Using SMSESSION  Cookie with HTTP Security Policy </h2>
  <p>Learn how to  authenticate a web service request with CA-SiteMinder using an SMSESSION cookie with an HTTP Security Policy. </p>


<a href="using_admin_console.htm" class="button secondary">Using Admin Console</a>

<a href="ca_siteminder_implement_use_cases.htm" class="button secondary">CA SiteMinder Use Cases</a>

<p></p>


<a href="ca_siteminder_integrate_with_pm.htm" class="button secondary">Integrate CA SiteMinder with Policy Manager (Main Topic)</a>

<p></p>


  <div class = "divider1"></div>
 <a name="usecase_sessioncookie">
<h3>Introduction</h3></a>
<p>When a user in SiteMinder protected realm is authenticated, a cookie called SMSESSION is generated. This use case will test authentication of this SMSESSION cookie using HTTP Security Policy. To generate the SMSESSION cookie, we will first use Basic Authentication.</p>

<h3>Step 1: Confirm SiteMinder Administrative Settings</h3>
 
 <ol class="usingOrderedList">
   <li>Confirm that the  SiteMinder Agent Configuration Object in      the CA SiteMinder Administrative UI has a parameter called &quot;AcceptTPCookie&quot; with      the value &quot;yes.&quot;</li>
 </ol>
 
 
 
 
 <h3>Step 2: Configure CA SiteMinder Identity System</h3>
<ol class="usingOrderedList">
   <li>Configure a CA SiteMinder Identity System. This step should have been completed as part of the initial configuration. See <a href="http://docs.soa.com/docs-test/ag/ca_siteminder/ca_siteminder_configure_identity_system.htm">Configure CA SiteMinder Identity System in Policy Manager 7.x.</a> for more information. Configuration of the Login Process Options screen and  Identity System integration is not required. </li>
 </ol>
 <h3>Step 3: Create Virtual Services</h3>
 <ol class="usingOrderedList">
   <li>Create a Virtual Service (<strong>VS1</strong>) then virtualize this Virtual      Service again (<strong>VS2</strong>). Host each  Virtual Service on a separate Network Director  (ND).</li>
 </ol>
 <h3>Step 4: Create Policies</h3>
 <p>In the <em>Policies</em> folder, use <strong>Add Policy</strong> to create the following policy configurations for <strong>VS1</strong> and <strong>VS2</strong>.</p>
 <ol class="usingOrderedList">
   <li>Create an HTTP Security Policy with  Basic Authentication, and a Response Cookie called &quot;SMSESSION.&quot;<br />
     <br />
   <img src="images/ca_siteminder_usecase_sessioncookie3.jpg" alt="" width="576" height="280" />   <br />
   <br />
   </li>
   <li>Create an HTTP Security Policy with Cookie Authentication. <br />
     <br />
   <img src="images/ca_siteminder_usecase_sessioncookie6.jpg" alt="" width="576" height="318" />   </li>
 </ol>
 <h3>Step 5: Attach Policies</h3>
 <ol class="usingOrderedList">
   <li>Attach the HTTP  Security Policy with Basic Authentication to <strong>VS1</strong>.<br />
     <br />
   <img src="images/ca_siteminder_usecase_sessioncookie1.jpg" alt="" width="576" height="389" /></li>
   <li>Attach the HTTP Security Policy with Cookie Authentication to <strong>VS2</strong>. <br />
     <br />
   <img src="images/ca_siteminder_usecase_sessioncookie2.jpg" alt="" width="576" height="389" />   </li>
</ol>

<h3>Step 6: Enable Preserve Transport Headers</h3>
<ol class="usingOrderedList">
  <li>On the <em>Service Details</em> page of <strong>VS1</strong> select <strong>Configure Message Processing </strong>in the <em>Actions Portlet</em>. Set <strong>Preserve Transport Headers</strong> to <strong>All</strong> to   preserve this cookie header      downstream.<br />
    <br />
    <img src="images/ca_siteminder_usecase_sessioncookie4.jpg" alt="" width="575" height="275" /><br />
  </li>
</ol>
<h3>Step 7: Test Configuration</h3>
<ol class="usingOrderedList">
  <li>Send requests to <strong>VS1</strong> and <strong>VS2</strong> and view the usage data in the <em>Services &gt; Monitoring</em> section. <br />
    <img src="images/ca_siteminder_usecase_sessioncookie5.jpg" width="576" height="524" /><br />
    <br />
  <img src="images/ca_siteminder_usecase_sessioncookie7.jpg" width="576" height="524" /></li>
</ol>

<p><a href="#top">back to top</a> </p>




<div class = "divider1"></div>
