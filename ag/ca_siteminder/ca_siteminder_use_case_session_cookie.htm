---
layout: page
title: CA SiteMinder Use Case - Using SMSESSION Cookie with HTTP Security Policy
description: Authenticate a web service request with CA-SiteMinder using SMSESSION cookie with HTTP Security Policy.
product: ag
category: learn
weight: 05
sub-nav-class: CA SiteMinder Use Cases
type: page
nav-title: Use SMSESSION Cookie with HTTP Security Policy
---
<h2 id="top">Using SMSESSION Cookie with HTTP Security Policy </h2>
<p>Learn how to authenticate a web service request with CA-SiteMinder using an SMSESSION cookie with an HTTP Security Policy.</p>
<p><a href="../../sp/admin_console/using_admin_console.htm" class="button secondary">Using Admin Console</a> 
<a href="ca_siteminder_implement_use_cases.htm" class="button secondary">CA SiteMinder Use Cases</a> 
<a href="ca_siteminder_integrate_with_pm.htm" class="button secondary">Integrate CA SiteMinder with Policy Manager (Main Topic)</a></p>
<div class = "divider1"></div>



<h3 id="usecase_sessioncookie_intro">Introduction</h3>
<p>When a user in SiteMinder protected realm is authenticated, a cookie called SMSESSION is generated. This use case will test authentication of this SMSESSION cookie using HTTP Security Policy. To generate the SMSESSION cookie, we will first use Basic Authentication.</p>



<h3 id="usecase_sessioncookie_s01">Step 1: Confirm SiteMinder Administrative Settings</h3>
<ol>
	<li>Confirm that the SiteMinder Agent Configuration Object in the CA SiteMinder Administrative UI has a parameter called <strong>AcceptTPCookie</strong> with the value <strong>yes</strong>.</li>
</ol>



<h3 id="usecase_sessioncookie_s02">Step 2: Configure CA SiteMinder Identity System</h3>
<ol>
	<li>Configure a CA SiteMinder Identity System. This step should have been completed as part of the initial configuration. See <a href="ca_siteminder_configure_identity_system.htm">Configure CA SiteMinder Identity System in Policy Manager 7.x.</a> for more information. Configuration of the Login Process Options screen and Identity System integration is not required. </li>
</ol>



<h3 id="usecase_sessioncookie_s03">Step 3: Create Virtual Services</h3>
<ol>
	<li>Create a Virtual Service (<strong>VS1</strong>) then virtualize this Virtual Service again (<strong>VS2</strong>). Host each Virtual Service on a separate Network Director (ND).</li>
</ol>



<h3 id="usecase_sessioncookie_s04">Step 4: Create Policies</h3>
 <p>In the <strong>Policies</strong> folder, use <strong>Add Policy</strong> to create the following policy configurations for <strong>VS1</strong> and <strong>VS2</strong>.</p>
<ol>
	<li>Create an HTTP Security Policy with Basic Authentication, and a Response Cookie called <strong>SMSESSION</strong>.
		<p><img src="images/ca_siteminder_usecase_sessioncookie3.jpg" alt="" /></p></li>
	<li>Create an HTTP Security Policy with Cookie Authentication.
		<p><img src="images/ca_siteminder_usecase_sessioncookie6.jpg" alt="" /></p></li>
</ol>



<h3 id="usecase_sessioncookie_s05">Step 5: Attach Policies</h3>
<ol>
	<li>Attach the HTTP Security Policy with Basic Authentication to <strong>VS1</strong>.
		<p><img src="images/ca_siteminder_usecase_sessioncookie1.jpg" alt="" /></p></li>
	<li>Attach the HTTP Security Policy with Cookie Authentication to <strong>VS2</strong>.
		<p><img src="images/ca_siteminder_usecase_sessioncookie2.jpg" alt="" /></p></li>
</ol>




<h3 id="usecase_sessioncookie_s06">Step 6: Enable Preserve Transport Headers</h3>
<ol>
	<li>On the <strong>Service Details</strong> page of <strong>VS1</strong> select <strong>Configure Message Processing </strong>in the <strong>Actions Portlet</strong>. Set <strong>Preserve Transport Headers</strong> to <strong>All</strong> to preserve this cookie header downstream.
		<p><img src="images/ca_siteminder_usecase_sessioncookie4.jpg" alt="" /></p></li>
</ol>



<h3 id="usecase_sessioncookie_s07">Step 7: Test Configuration</h3>
<ol>
	<li>Send requests to <strong>VS1</strong> and <strong>VS2</strong> and view the usage data in the <strong>Services</strong> &gt; <strong>Monitoring</strong> section.
		<p><img src="images/ca_siteminder_usecase_sessioncookie5.jpg" alt="" /></p>
		<p><img src="images/ca_siteminder_usecase_sessioncookie7.jpg" alt="" /></p></li>
</ol>
<p><a href="#top">Back to top</a></p>